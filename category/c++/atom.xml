<?xml version="1.0"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>http://example.com</id>
    <title>MikeMao&#39;s blog â€¢ Posts by &#34;c++&#34; category</title>
    <link href="http://example.com" />
    <updated>2024-07-28T09:38:31.000Z</updated>
    <category term="C++" />
    <category term="git" />
    <category term="C++ è¯»ä¹¦ç¬”è®°" />
    <category term="Maven" />
    <category term="Linux" />
    <category term="STL C++" />
    <category term="python çˆ¬è™« è®¡ç®—æœºç½‘ç»œ" />
    <category term="python çˆ¬è™«" />
    <category term="goè¯­è¨€" />
    <category term="python" />
    <category term="çˆ¬è™«" />
    <category term="åˆ†å¸ƒå¼" />
    <category term="æ•°ç†é€»è¾‘" />
    <category term="docker" />
    <category term="TVM æ·±åº¦å­¦ä¹  æœºå™¨å­¦ä¹  ç¼–è¯‘" />
    <category term="ç¼–è¯‘åŸç†" />
    <entry>
        <id>http://example.com/2024/07/28/Effective-C-%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/</id>
        <title>Effective C++è¯»ä¹¦ç¬”è®°</title>
        <link rel="alternate" href="http://example.com/2024/07/28/Effective-C-%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
        <content type="html">&lt;p&gt;C++ æ˜¯æˆ‘æœ€å–œæ¬¢çš„ä¸€é—¨è¯­è¨€ï¼ŒC++ programer ä¸€ç›´ä¸ºå…¶æ‹¥æœ‰çš„éåŒå¯»å¸¸çš„èƒ½åŠ›èŒƒå›´å’Œè¡¨ç°åŠ›è€Œè‡ªè±ªï¼ˆå½“ç„¶å¦‚æœèƒ½æ­£ç¡®ä½¿ç”¨çš„è¯ï¼‰ã€‚æ­£å¦‚ Scott Meyers, æœ¬ä¹¦ä½œè€…æ‰€è¨€ï¼šå­¦ä¹ ä¸€ç§ç¼–ç¨‹è¯­è¨€çš„åŸºç¡€æ˜¯ä¸€å›äº‹ï¼›å­¦ä¹ å¦‚ä½•ç”¨é‚£ç§è¯­è¨€è®¾è®¡å’Œå®ç°é«˜æ•ˆç‡çš„ç¨‹åºå®Œå…¨æ˜¯å¦å¤–ä¸€å›äº‹ã€‚æ–­æ–­ç»­ç»­å­¦ä¹ äº†ä¸¤å¹´çš„ C++ programing language, æˆ‘çš„è¿½æ±‚ä»å­¦ä¼šè¯­è¨€åŸºç¡€ï¼Œé€æ¸å˜ä¸ºè¿½æ±‚æ›´åŠ é«˜æ•ˆï¼Œå¹¶åŒæ—¶å…·å¤‡é«˜å¯æ‰©å±•æ€§å’Œå¯ç»´æŠ¤æ€§çš„ç¼–ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;Effetive C++ æ˜¯ä¸€æœ¬ä¸»è¦é¢å‘ C++  03 æ ‡å‡†åŠä¹‹å‰çš„ C++ ç¼–ç¨‹è¿‡ç¨‹ä¸­çš„ä¸€äº›ç¼–ç¨‹ guidelines çš„ï¼Œè‡ª C++  11 ä»¥æ¥ï¼ŒC++ ä¸æ–­æ¨é™ˆå‡ºæ–°ï¼Œå…³äºä¸€äº›åœºæ™¯ä½œè€…æå‡ºçš„è§£å†³æ–¹æ¡ˆä¹Ÿè®¸æœ‰äº†æ›´å¥½çš„æ›¿ä»£æ–¹æ¡ˆã€‚ä½†ä½œä¸ºä¸€åˆ‡çš„åŸºç¡€ï¼Œä»¥åŠä¸€ç³»åˆ—ä¹¦ç›®çš„å¼€å±±ä¹‹ä½œï¼ˆmore Efective C++, Effective Modern C++)ï¼Œæ­¤ä¹¦ä»ç„¶è¢«è®¸å¤šäººè®¤ä¸ºæ˜¯ CPP programer è¿›é˜¶çš„å¿…çœ‹ä¹¦ç›®ã€‚æ­¤è¯»ä¹¦ç¬”è®°ä»…ä¾›æˆ‘è‡ªå·±æŸ¥é˜…ï¼Œæä¾›ç®€å•çš„æ€»ç»“ä¸æ„Ÿæƒ³ï¼Œä»¥ä»ä½œè€…å¼•äººå…¥èƒœä½†å¯¹äºå·²ç»è®¤çœŸä½“ä¼šçš„è¯»è€…è€Œè¨€æ— ç›Šçš„è¡Œæ–‡ä¸­èµ°å‡º (TLDR)ã€‚å¹¶å¯¹ä¹¦ä¸­çš„ä¸€äº›é—®é¢˜å°è¯•ä½¿ç”¨ C++ 11 åçš„æ–°ç‰¹æ€§è§£å†³ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä¸æƒ³æˆä¸ºä¸€ä¸ªè¯­è¨€å­¦å®¶ï¼Œé˜…è¯»ä¹‹åè¿˜éœ€è¦æ›´å¤šçš„ç¼–ç¨‹ç»ƒä¹ æ¥å·©å›ºæ‰€å­¦ä¹ çš„çŸ¥è¯†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;span id=&#34;more&#34;&gt;&lt;/span&gt;&lt;/p&gt;
&lt;h2 id=&#34;æ‚é¡¹&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#æ‚é¡¹&#34;&gt;#&lt;/a&gt; æ‚é¡¹&lt;/h2&gt;
&lt;h3 id=&#34;item1-å°†cè§†ä¸º-federation-of-languagesè¯­è¨€è”åˆä½“&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item1-å°†cè§†ä¸º-federation-of-languagesè¯­è¨€è”åˆä½“&#34;&gt;#&lt;/a&gt; item1 å°† C++ è§†ä¸º federation of languages (è¯­è¨€è”åˆä½“)&lt;/h3&gt;
&lt;p&gt;å°† C++ ä»ä¸€é—¨ç¼–ç¨‹è¯­è¨€çœ‹ä½œå››é—¨äº’ç›¸è”ç³»ä½†æœ‰å„è‡ªä¸»ä½“æ€æƒ³çš„å­è¯­è¨€çš„ç»“åˆä½“ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;C: åŒ…æ‹¬ built-in æ•°æ®ç»“æ„ï¼Œæµç¨‹æ§åˆ¶è¯­å¥ç­‰ï¼Œæä¾›è¯­æ³•åŸºç¡€ã€‚&lt;/li&gt;
&lt;li&gt;Object-Oriented C++ï¼šC++ çš„é¢å‘å¯¹è±¡éƒ¨åˆ†ï¼Œä¸»è¦è®¾è®¡å°è£…ç»§æ‰¿å¤šæ€è¿™ä¸‰ä¸ªæ–¹é¢&lt;/li&gt;
&lt;li&gt;Template C++ï¼šæ³›å‹ç¼–ç¨‹éƒ¨åˆ†ï¼Œå¯¹å¤šæ•°ç¨‹åºå‘˜å°‘ç”¨ä½†åŠå…¶å¼ºå¤§çš„ C++ è¯­è¨€éƒ¨åˆ†ï¼Œæä¾›åŒ…æ‹¬ TMP (æ¨¡æ¿å…ƒç¼–ç¨‹) è¿™æ ·çš„é»‘é­”æ³•ã€‚&lt;/li&gt;
&lt;li&gt;STLï¼šcontainers,iterators,algorithms,functions objects... æ–¹ä¾¿åœ°ä½¿ç”¨å¤§ä½¬ä»¬æä¾›çš„ç¼–ç¨‹å·¥å…·ï¼Œä¼˜åŒ–ç¼–ç¨‹ä½“éªŒï¼Œä¸ç”¨åƒ C é‚£æ · array simulate everything äº†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ¯ä¸€ç§å­è¯­è¨€éƒ½æœ‰ä¸€å¥—è‡ªå·±å¸¸ç”¨çš„ç¼–ç¨‹ç†å¿µï¼Œåœ¨ä¸åŒçš„å­è¯­è¨€ä¸‹ç¼–ç¨‹æ—¶ï¼Œå¯èƒ½ä¼šè¦ä»ä¸åŒçš„è§„åˆ™ä¸­è¿›è¡Œè½¬æ¢ï¼ˆæ¯”å¦‚ä¼ å€¼çš„æ–¹å¼ï¼‰ã€‚&lt;/p&gt;
&lt;h3 id=&#34;item2-ç”¨consts-enumså’Œinlines-å–ä»£defines&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item2-ç”¨consts-enumså’Œinlines-å–ä»£defines&#34;&gt;#&lt;/a&gt; item2 ç”¨ consts, enums, å’Œ inlines å–ä»£ #defines&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;#defines æ— æ³•æä¾›åŒ…æ‹¬ä½œç”¨åŸŸæ§åˆ¶ï¼Œç±»å‹æ£€æŸ¥ç­‰åŠŸèƒ½ï¼Œå› æ­¤èƒ½é¿å…å°±é¿å…ã€‚ä¸€èˆ¬åªåœ¨æ§åˆ¶ç¼–è¯‘é€»è¾‘çš„æ—¶å€™é…åˆ #ifdef/#ifndef ä½¿ç”¨ï¼Œæ¯”å¦‚æ ¹æ®æŸäº›å®ä¿®æ”¹ä¸€äº› objects çš„å®šä¹‰ï¼Œè€Œä¸è¦ç”¨åœ¨ç¼–ç¨‹çš„é€»è¾‘ä¸­ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æƒ³ä½¿ç”¨ #defines å®šä¹‰å¸¸é‡æ—¶ æ¯”å¦‚ &lt;code&gt;#define PI 3.1415926&lt;/code&gt; ï¼Œä½¿ç”¨ const æ›¿ä»£ï¼Œä»¥è·å–æ›´å¥½çš„ç¼–è¯‘å™¨æŠ¥é”™ä½“éªŒä¸ç±»å‹æ£€æŸ¥&lt;/li&gt;
&lt;li&gt;æƒ³ä½¿ç”¨ #defines å®šä¹‰&lt;strong&gt;ç±»å±å¸¸é‡&lt;/strong&gt;æ—¶ï¼Œæ¯”å¦‚&lt;strong&gt;åœ¨ç±»ä¸­&lt;/strong&gt;å®šä¹‰ &lt;code&gt;static const int a = 5;&lt;/code&gt;  è¿™é‡Œæ¶‰åŠåˆ°äº†ç±»å±å¸¸é‡çš„åˆå§‹åŒ–é—®é¢˜ï¼Œç®€è¦æ¥è¯´ï¼Œä¸€äº›ç¼–è¯‘å™¨ç¦æ­¢ static integral class constantsï¼ˆé™æ€æ•´å‹æ—ç±»å±å¸¸é‡ï¼‰çš„ in-class specification è€Œä¸å¾—ä¸åœ¨ç±»å¤–ä½¿ç”¨ &lt;code&gt;const int MyClass::a = 5;&lt;/code&gt;  è¿™æ ·çš„åˆå§‹åŒ–æ–¹å¼ã€‚ï¼ˆpsï¼š éƒ½æ˜¯å¾ˆè€çš„ç¼–è¯‘å™¨äº†ï¼Œåœ¨ä½œè€…é‚£ä¸ªå¹´ä»£éƒ½ç®—è¿‡æ—¶çš„äº†ï¼Œgcc4.0.4 éƒ½å¯ä»¥åœ¨ç±»ä¸­å®šä¹‰æ•´å‹æ—å¸¸é‡ï¼‰ã€‚å¯¹äºé™æ€éæ•´å‹æ—ç±»å±å¸¸é‡ï¼Œæ¯”å¦‚ &lt;code&gt;static const string s = &amp;quot;hello&amp;quot;&lt;/code&gt; ï¼Œæˆ–è€… &lt;code&gt;static const string s = nullptr&lt;/code&gt;  è¿™æ ·çš„è¯­å¥æ˜¯ä¸å…è®¸å‡ºç°åœ¨ç±»çš„å®šä¹‰ä¸­çš„ã€‚ä½ å¿…é¡»è¦åœ¨ç±»å¤–åˆå§‹åŒ–ã€‚for example:&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;MyClass&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;int&lt;/span&gt; cst &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;token comment&#34;&gt;// allowed&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; string s&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;token comment&#34;&gt;// static const string s = &#34;hello&#34;? not allowed&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt; p &lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;token comment&#34;&gt;// static const int* p = nullter? not allowed&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; string MyClass&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;s &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;hello&#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt; MyClass&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;p &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;&lt;strong&gt;è¿™ä¸ªè¿‡ç¨‹ä½“ç°äº† C++ ä»¤äººéš¾ä»¥å¿å—çš„ç¼ºé™·ï¼Œå¯¹äºå¾ˆå¤šä¸œè¥¿ï¼Œå®ƒå…·æœ‰å¾ˆå¤šçš„ç‰¹ä¾‹ï¼Œå¹¶ä¸”ä½ å¾ˆéš¾ç†è§£ä¸ºä»€ä¹ˆï¼Œæ²¡æœ‰ä»€ä¹ˆè§„åˆ™æ˜¯é€šç”¨çš„&lt;/strong&gt;ã€‚ä¸€ä¸ªå¥½æ¶ˆæ¯æ˜¯ï¼ŒC++ 17 ååšå‡ºäº†è¡¥æ•‘ (åˆæœ‰æ–°ä¸œè¥¿è¦è®°äº†)ï¼š&lt;/p&gt;
&lt;p&gt;according to &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTU2Mzg5Ny9ob3ctY2FuLXlvdS1kZWZpbmUtYS1zdGF0aWMtZGF0YS1tZW1iZXItb2YtdHlwZS1jb25zdC1zdGRzdHJpbmc=&#34;&gt;c++ - How can you define a static data member of type const std::string? - Stack Overflow&lt;/span&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;MyClass&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;constexpr&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;int&lt;/span&gt; cst &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;constexpr&lt;/span&gt; std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;string_view STRING &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;some useful string constant&#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;constexpr&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt; p &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;ul&gt;
&lt;li&gt;æƒ³ä½¿ç”¨ #defines å®šä¹‰å‡½æ•°æ—¶ï¼Œä½¿ç”¨ inline çš„æ¨¡ç‰ˆå‡½æ•°æ›¿ä»£ï¼Œä»¥è·å–å‡½æ•°å‚æ•°å…·æœ‰çš„å‚æ•°ç±»å‹æ£€æŸ¥åŠŸèƒ½ï¼Œå¹¶ä¸”æ‹¥æœ‰ä¸è¾“äº defines çš„æ€§èƒ½ã€‚è¿˜æœ‰ï¼Œåœ¨ä½¿ç”¨ defines å®šä¹‰å‡½æ•°æ—¶ï¼Œä½ ä¸å¾—ä¸ç»™å‚æ•°åŠ æ‹¬å· ğŸ˜ƒ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¯¹äº† å¿˜äº†æ enums äº†ï¼Œè¿™é‡Œä½œè€…ä½¿ç”¨äº†ä¸€ä¸ªå«åš the enum hack çš„æŠ€æœ¯ï¼Œä¸»è¦æ¥æºäºä¸€ä¸ª enumerated typeï¼ˆæšä¸¾ç±»å‹ï¼‰çš„å€¼å¯ä»¥ç”¨åœ¨ä¸€ä¸ªéœ€è¦ ints çš„åœ°æ–¹ã€‚for example:&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;GamePlayer&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;private&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;enum&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt; NumTurns &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;5&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;             &lt;span class=&#34;token comment&#34;&gt;// &#34;the enum hack&#34; - makes&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;                                     &lt;span class=&#34;token comment&#34;&gt;// NumTurns a symbolic name for 5&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;int&lt;/span&gt; scores&lt;span class=&#34;token punctuation&#34;&gt;[&lt;/span&gt;NumTurns&lt;span class=&#34;token punctuation&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;              &lt;span class=&#34;token comment&#34;&gt;// fine&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;ä½¿ç”¨è¿™é¡¹æŠ€æœ¯ï¼Œä½ å¯ä»¥ç¦æ­¢å¯¹ NumTurns çš„å–åœ°å€è¡Œä¸ºï¼Œç¬¬äºŒä¸ªç†ç”±æ˜¯ï¼Œå¤§é‡çš„ä»£ç åœ¨ä½¿ç”¨å®ƒï¼ˆä½œä¸ºæ¨¡ç‰ˆå…ƒç¼–ç¨‹çš„åŸºæœ¬æŠ€æœ¯ä¹‹ä¸€ï¼‰ï¼Œæ‰€ä»¥æœ€å¥½è¿˜æ˜¯è®¤è¯†ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;by the way, å½“ä½ å£°æ˜ä¸€ä¸ªå¸¸é‡æŒ‡é’ˆçš„æ—¶å€™ï¼Œæœ€å¥½åˆ«å¿˜äº†æŠŠè¿™ä¸ªæŒ‡é’ˆä¹Ÿè®¾ä¸º constã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&#34;item3-åªè¦å¯èƒ½å°±ç”¨const&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item3-åªè¦å¯èƒ½å°±ç”¨const&#34;&gt;#&lt;/a&gt; item3 åªè¦å¯èƒ½å°±ç”¨ const&lt;/h3&gt;
&lt;p&gt;use &lt;em&gt;const&lt;/em&gt; as long as possible, ç»å¸¸çœ‹åˆ°çš„ä¸€å¥è¯äº†ï¼Œè¿™èŠ‚å†…å®¹ä¸»è¦åˆ†ä¸ºä¸‰ç‚¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;const å…³é”®å­—æä¾›äº†è¯­ä¹‰ä¸Šçš„è¡¨è¾¾ï¼Œæœ‰åŠ©äºç¼–è¯‘å™¨å‘ç°é”™è¯¯ã€‚const ç”¨é€”å¹¿æ³›ï¼Œå¯ç”¨äºå¯¹è±¡ï¼Œå‡½æ•°å‚æ•°ï¼Œè¿”å›ç±»å‹ï¼Œæˆå‘˜å‡½æ•°ç­‰ã€‚ï¼ˆè¿™ç‚¹ä¸ºå¤§éƒ¨åˆ†ç¨‹åºå‘˜å¯¹æ­¤èŠ‚æ ‡é¢˜çš„å”¯ä¸€ç†è§£ï¼‰&lt;/li&gt;
&lt;li&gt;ç¼–è¯‘å™¨åšæŒçš„æ˜¯&lt;strong&gt; bitwise constness&lt;/strong&gt; (äºŒè¿›åˆ¶ä½å¸¸é‡æ€§), ä½†ç¨‹åºå‘˜åº”å½“ä½¿ç”¨&lt;strong&gt; conceptual constness&lt;/strong&gt; (æ¦‚å¿µä¸Šçš„å¸¸é‡æ€§) æ¥ç¼–ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;å½“ const å’Œ non-const æˆå‘˜å‡½æ•°æœ¬è´¨ä¸Šå…·æœ‰ç›¸åŒçš„å®ç°çš„æ—¶å€™ï¼Œä½¿ç”¨ non-const ç‰ˆæœ¬è°ƒç”¨ const ç‰ˆæœ¬å¯ä»¥é¿å…ä»£ç é‡å¤ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å…³äºç¬¬äºŒç‚¹çš„ç†è§£ï¼š&lt;/p&gt;
&lt;p&gt;äºŒè¿›åˆ¶ä½å¸¸é‡æ€§æ˜¯æŒ‡å½“ä½ å£°æ˜ä¸€ä¸ªå˜é‡ä¸º const çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨åªéœ€è¦æ£€æŸ¥å®ƒåœ¨å†…å­˜ä¸­å­˜å‚¨çš„äºŒè¿›åˆ¶ä½æœ‰æ²¡æœ‰è¢«æ›´æ”¹å°±è¡Œäº†ï¼Œå› ä¸ºè¿™æ ·å®ç°ååˆ†æ–¹ä¾¿ï¼Œæ¯”å¦‚å½“ä½ å£°æ˜ä¸€ä¸ªæŒ‡é’ˆä¸º const æ—¶å€™ï¼Œä½ ä¸èƒ½æ”¹å˜æŒ‡é’ˆçš„å€¼ï¼Œä½†æ˜¯ä½ å¯ä»¥æ”¹å˜æŒ‡é’ˆæŒ‡å‘çš„å¯¹è±¡çš„å€¼ã€‚ä½†æ˜¯å½“ä½ å£°æ˜ä¸€ä¸ªç±»ä¸º const çš„æ—¶å€™ï¼Œåªèƒ½è°ƒç”¨ const æˆå‘˜å‡½æ•°ï¼Œå¹¶ä¸”ä¸èƒ½æ”¹å˜å…¶ä»»ä½•æˆå‘˜å˜é‡ï¼Œè¿™å®åœ¨æ˜¯å¤ªè‹›åˆ»äº†ã€‚&lt;/p&gt;
&lt;p&gt;for example: ä¸€ä¸ªå¯ä»¥å­˜å‚¨æ–‡æœ¬å—é•¿åº¦çš„ç±»ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;CTextBlock&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;size_t &lt;span class=&#34;token function&#34;&gt;length&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;private&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt;pText&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;size_t textLength&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;             &lt;span class=&#34;token comment&#34;&gt;// last calculated length of textblock&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;bool&lt;/span&gt; lengthIsValid&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;                 &lt;span class=&#34;token comment&#34;&gt;// whether length is currently valid&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;size_t &lt;span class=&#34;token class-name&#34;&gt;CTextBlock&lt;/span&gt;&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;length&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;15&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;16&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;!&lt;/span&gt;lengthIsValid&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;17&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    textLength &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;strlen&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;pText&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;  &lt;span class=&#34;token comment&#34;&gt;// error! can&#39;t assign to textLength&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;18&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    lengthIsValid &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token boolean&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;             &lt;span class=&#34;token comment&#34;&gt;// and lengthIsValid in a const&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;19&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;                                   &lt;span class=&#34;token comment&#34;&gt;// member function&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;20&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;21&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;return&lt;/span&gt; textLength&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;22&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;å¯¹äº length () æˆå‘˜å‡½æ•°ï¼Œç”±äºè¯­ä¹‰çš„éœ€è¦å¿…é¡»å®šä¹‰ä¸º constã€‚ä½†ä¸æƒ³æ¯æ¬¡éƒ½è°ƒç”¨ strlen è®¡ç®—æ–‡æœ¬é•¿åº¦ï¼Œè¿™ä¼šå¸¦æ¥è®¸å¤šå¼€é”€ï¼Œäºæ˜¯ä¾¿ç”¨ä¸Šè¿°æ–¹æ³•å­˜å‚¨å­—ç¬¦ä¸²é•¿åº¦ã€‚ä½†æ˜¯è¿™è¿åäº†äºŒè¿›åˆ¶å¸¸é‡æ€§ï¼Œæ¯•ç«Ÿæ”¹å˜äº†æˆå‘˜å˜é‡ã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤å¼•å…¥äº†é€»è¾‘å¸¸é‡æ€§çš„æ¦‚å¿µï¼Œè¿™ä¸€ç†å¿µè®¤ä¸ºï¼Œ** ä¸€ä¸ª const æˆå‘˜å‡½æ•°å¯ä»¥æ”¹å˜å¯¹è±¡ä¸­çš„ä¸€äº› bits, ä½†æ˜¯åªèƒ½ç”¨å®¢æˆ·æ— æ³•å¯Ÿè§‰çš„æ–¹æ³•ã€‚** è¿™ç§ç†å¿µçš„å®ç°æ˜¯é€šè¿‡ mutable å…³é”®å­—å®ç°çš„ï¼Œæ¯”å¦‚å°†ä¸Šé¢çš„ textLength å’Œ lengthIsValid å˜é‡ç”¨ mutable ä¿®é¥°å³å¯ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºç¬¬ä¸‰ç‚¹çš„ç†è§£ï¼š&lt;/p&gt;
&lt;p&gt;ä¸€èˆ¬æ¥è¯´ï¼Œç±»ä¸­é‡è½½çš„ const æˆå‘˜å‡½æ•°å’Œé const æˆå‘˜å‡½æ•°çš„é€»è¾‘éƒ½æ˜¯å·®ä¸å¤šçš„ï¼Œè¿™å¸¦æ¥äº†é¢å¤–çš„ç¼–è¯‘æ—¶é—´ï¼Œç»´æŠ¤æˆæœ¬ä»¥åŠä»£ç è†¨èƒ€ï¼Œè¿™å¯¹äºä¸€äº›ç¨‹åºå‘˜æ¥è¯´æ˜¯ä¸å¯å¿å—çš„ã€‚å› æ­¤å¯ä»¥ä½¿ç”¨è¿™æ ·ä¸€ä¸ª trick: é€šè¿‡å¼ºåˆ¶è½¬å‹ï¼Œè®© non-const æˆå‘˜å‡½æ•°è°ƒç”¨ const ç‰ˆæœ¬ã€‚for example:&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;TextBlock&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;operator&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;size_t position&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt;     &lt;span class=&#34;token comment&#34;&gt;// same as before&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;return&lt;/span&gt; text&lt;span class=&#34;token punctuation&#34;&gt;[&lt;/span&gt;position&lt;span class=&#34;token punctuation&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;operator&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;size_t position&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;         &lt;span class=&#34;token comment&#34;&gt;// now just calls const op[]&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;return&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token generic-function&#34;&gt;&lt;span class=&#34;token function&#34;&gt;const_cast&lt;/span&gt;&lt;span class=&#34;token generic class-name&#34;&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;                         &lt;span class=&#34;token comment&#34;&gt;// cast away const on&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;                                                 &lt;span class=&#34;token comment&#34;&gt;// op[]&#39;s return type;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        &lt;span class=&#34;token generic-function&#34;&gt;&lt;span class=&#34;token function&#34;&gt;static_cast&lt;/span&gt;&lt;span class=&#34;token generic class-name&#34;&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; TextBlock&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;     &lt;span class=&#34;token comment&#34;&gt;// add const to *this&#39;s type;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;          &lt;span class=&#34;token punctuation&#34;&gt;[&lt;/span&gt;position&lt;span class=&#34;token punctuation&#34;&gt;]&lt;/span&gt;                             &lt;span class=&#34;token comment&#34;&gt;// call const version of op[]&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;15&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;16&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;è¿™æ ·çš„ä»£ç é€šè¿‡ä¸äº†é€‰ç¾æ¯”èµ› ğŸ˜„ ï¼Œä½†æ˜¯å®ƒæœ‰æ•ˆã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„ï¼Œåè¿‡æ¥è®© const ç‰ˆæœ¬è°ƒç”¨ non-const ç‰ˆæœ¬ä¸å¯å–ï¼Œå› ä¸ºè¿åäº† const çš„è¯­ä¹‰ï¼Œä½ å°†æ‰¿å—æ”¹å˜æˆå‘˜å˜é‡çš„é£é™©ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&#34;item-4-ç¡®ä¿å¯¹è±¡åœ¨ä½¿ç”¨å‰è¢«åˆå§‹åŒ–&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item-4-ç¡®ä¿å¯¹è±¡åœ¨ä½¿ç”¨å‰è¢«åˆå§‹åŒ–&#34;&gt;#&lt;/a&gt; item 4 ç¡®ä¿å¯¹è±¡åœ¨ä½¿ç”¨å‰è¢«åˆå§‹åŒ–&lt;/h3&gt;
&lt;p&gt;å¯¹äº C++ çš„å¯¹è±¡ï¼Œå½“ä½ ä¸åˆå§‹åŒ–å®ƒä»¬æ—¶ï¼Œæœ‰äº›æ—¶å€™å®ƒä»¬ä¼šè‡ªåŠ¨åˆå§‹åŒ–ï¼Œæœ‰æ—¶å€™ä¸ä¼šï¼Œå› æ­¤ä¸ºäº†é¿å… ubï¼Œå†å£°æ˜çš„åŒæ—¶æœ€å¥½ä¹Ÿåˆå§‹åŒ–å®ƒä»¬ã€‚&lt;/p&gt;
&lt;p&gt;è¦ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æ‰‹åŠ¨åˆå§‹åŒ– built-in type çš„ objectsï¼Œå› ä¸º C++ åªåœ¨æŸäº›æ—¶å€™æ‰ä¼šè‡ªå·±åˆå§‹åŒ–å®ƒä»¬&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åœ¨ constructor ä¸­ï¼Œç”¨ member initialization list ä»£æ›¿å‡½æ•°ä½“ä¸­çš„ assignmentã€‚initialization list ä¸­ data members çš„æ’åˆ—é¡ºåºè¦ä¸å®ƒä»¬åœ¨ classï¼ˆç±»ï¼‰ä¸­è¢«å£°æ˜çš„é¡ºåºç›¸åŒã€‚å› ä¸ºåœ¨æ„é€ å‡½æ•°èµ‹å€¼ä¹‹å‰ï¼Œæˆå‘˜å˜é‡å·²ç»è¢«é»˜è®¤åˆå§‹åŒ–å¥½äº†ï¼Œè¿™æ ·åšèƒ½æå‡æ€§èƒ½ã€‚é™¤æ­¤ä¹‹å¤–çš„æ˜¯ï¼Œæœ‰äº›æ—¶å€™ï¼Œåˆå§‹åŒ–åˆ—è¡¨å¼å¯é€‰é¡¹ï¼Œæœ‰æ—¶å€™æ˜¯å¿…é€‰é¡¹ï¼Œå› æ­¤ä¸ºäº†æ–¹ä¾¿è®°å¿†ï¼Œä¸€å¾‹ä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨å³å¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é€šè¿‡ç”¨ local static objectsï¼ˆå±€éƒ¨é™æ€å¯¹è±¡ï¼‰ä»£æ›¿ non-local static objectsï¼ˆéå±€éƒ¨é™æ€å¯¹è±¡ï¼‰æ¥é¿å…è·¨ translation unitsï¼ˆç¼–è¯‘å•å…ƒï¼‰çš„ åˆå§‹åŒ–é¡ºåºé—®é¢˜ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å³å°†åœ¨å…¨å±€ä¸­å®šä¹‰ä¸€ä¸ª &lt;code&gt;static FileSystem fs; &lt;/code&gt;  æ›¿æ¢ä¸ºæä¾›ä¸€ä¸ªå‡½æ•°ï¼Œæœ‰ç‚¹åƒå•ä¾‹æ¨¡å¼ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;FileSystem&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;tfs&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;                   &lt;span class=&#34;token comment&#34;&gt;// this replaces the tfs object; it could be&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;                                   &lt;span class=&#34;token comment&#34;&gt;// static in the FileSystem class&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;static&lt;/span&gt; FileSystem fs&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;             &lt;span class=&#34;token comment&#34;&gt;// define and initialize a local static object&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;return&lt;/span&gt; fs&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;                        &lt;span class=&#34;token comment&#34;&gt;// return a reference to it&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;h2 id=&#34;æ„é€ -ææ„ä¸èµ‹å€¼&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#æ„é€ -ææ„ä¸èµ‹å€¼&#34;&gt;#&lt;/a&gt; æ„é€ ã€ææ„ä¸èµ‹å€¼&lt;/h2&gt;
&lt;h3 id=&#34;item5-äº†è§£cä¸ºä½ é»˜è®¤ç¼–å†™å¹¶è°ƒç”¨äº†å“ªäº›å‡½æ•°&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item5-äº†è§£cä¸ºä½ é»˜è®¤ç¼–å†™å¹¶è°ƒç”¨äº†å“ªäº›å‡½æ•°&#34;&gt;#&lt;/a&gt; item5 äº†è§£ C++ ä¸ºä½ é»˜è®¤ç¼–å†™å¹¶è°ƒç”¨äº†å“ªäº›å‡½æ•°&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ç¼–è¯‘å™¨å¯ä»¥éšå¼ç”Ÿæˆä¸€ä¸ª classï¼ˆç±»ï¼‰çš„ default constructorï¼ˆç¼ºçœæ„é€ å‡½æ•°ï¼‰ï¼Œcopy constructorï¼ˆæ‹·è´æ„é€ å‡½æ•°ï¼‰ï¼Œcopy assignment operatorï¼ˆæ‹·è´èµ‹å€¼è¿ç®—ç¬¦ï¼‰å’Œ destructorï¼ˆææ„å‡½æ•°ï¼‰ã€‚C++11 åè¿˜å¢åŠ äº†ç§»åŠ¨æ„é€ å’Œç§»åŠ¨èµ‹å€¼ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;å¯¹äºä»¥ä¸‹åœºæ™¯ï¼šæ·±æ‹·è´ï¼Œç±»ä¸­æœ‰ const æˆ–å¼•ç”¨æˆå‘˜å˜é‡ï¼Œä»¥åŠææ„å‡½æ•°æœ‰ virtual éœ€æ±‚çš„æ—¶å€™ï¼Œé»˜è®¤ç”Ÿæˆçš„å‡½æ•°å¯èƒ½ä¸ä¼šç¬¦åˆè¦æ±‚&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h3 id=&#34;item6-è‹¥ä¸æƒ³ä½¿ç”¨ç¼–è¯‘å™¨ç”Ÿæˆå‡½æ•°å°±æ˜ç¡®æ‹’ç»&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item6-è‹¥ä¸æƒ³ä½¿ç”¨ç¼–è¯‘å™¨ç”Ÿæˆå‡½æ•°å°±æ˜ç¡®æ‹’ç»&#34;&gt;#&lt;/a&gt; item6 è‹¥ä¸æƒ³ä½¿ç”¨ç¼–è¯‘å™¨ç”Ÿæˆå‡½æ•°ï¼Œå°±æ˜ç¡®æ‹’ç»&lt;/h3&gt;
&lt;p&gt;åœ¨ C++ 11 ä¹‹å‰ï¼Œä½œè€…æ˜¯é€šè¿‡å°†ç›¸åº”çš„æˆå‘˜å‡½æ•°å£°æ˜ä¸º private å®ç°çš„ï¼Œæˆ–è€…ç»§æ‰¿è‡ªä¸€ä¸ªä½¿ç”¨è¿™ç§æ–¹æ³•å®ç°çš„ Uncopyable çš„åŸºç±»ã€‚&lt;/p&gt;
&lt;p&gt;C++ 11 ä¹‹åï¼Œä½¿ç”¨ &lt;code&gt;= delete&lt;/code&gt;  å³å¯&lt;/p&gt;
&lt;h3 id=&#34;item7-ä¸ºå¤šæ€åŸºç±»å£°æ˜è™šææ„å‡½æ•°&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item7-ä¸ºå¤šæ€åŸºç±»å£°æ˜è™šææ„å‡½æ•°&#34;&gt;#&lt;/a&gt; item7 ä¸ºå¤šæ€åŸºç±»å£°æ˜è™šææ„å‡½æ•°&lt;/h3&gt;
&lt;p&gt;ä¸ºäº†é˜²æ­¢å†…å­˜æ³„éœ²ï¼Œå¿…é¡»å°†å¤šæ€åŸºç±»çš„ææ„å‡½æ•°å£°æ˜ä¸ºè™šå‡½æ•°&lt;/p&gt;
&lt;p&gt;é™¤æ­¤ä¹‹å¤–è¿˜è¦æ³¨æ„ä¸¤ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ™®é€šçš„åŸºç±»æ— éœ€ä¹Ÿä¸åº”è¯¥æœ‰è™šææ„å‡½æ•°ï¼Œå› ä¸ºè™šå‡½æ•°æ— è®ºåœ¨æ—¶é—´è¿˜æ˜¯ç©ºé—´ä¸Šéƒ½ä¼šæœ‰ä»£ä»·&lt;/li&gt;
&lt;li&gt;å¦‚æœä¸€ä¸ªç±»å‹æ²¡æœ‰è¢«è®¾è®¡æˆå¤šæ€åŸºç±»ï¼Œåˆæœ‰è¢«è¯¯ç»§æ‰¿çš„é£é™©ï¼Œå¯ä»¥ä½¿ç”¨ C++ 11 ä¸­çš„ &lt;code&gt;final&lt;/code&gt;  å…³é”®å­—ï¼Œè¿™æ ·ç¦æ­¢æ´¾ç”Ÿå¯ä»¥é˜²æ­¢è¯¯ç»§æ‰¿é€ æˆä¸Šè¿°é—®é¢˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;item8-é˜²æ­¢å¼‚å¸¸é€ƒç¦»ææ„å‡½æ•°&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item8-é˜²æ­¢å¼‚å¸¸é€ƒç¦»ææ„å‡½æ•°&#34;&gt;#&lt;/a&gt; item8 é˜²æ­¢å¼‚å¸¸é€ƒç¦»ææ„å‡½æ•°&lt;/h3&gt;
&lt;p&gt;ä¸¤ä¸ªè¦ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;destructorï¼ˆææ„å‡½æ•°ï¼‰åº”è¯¥æ°¸ä¸å¼•å‘ exceptionsï¼ˆå¼‚å¸¸ï¼‰ã€‚å¦‚æœ destructorï¼ˆææ„å‡½æ•°ï¼‰è°ƒç”¨äº†å¯èƒ½æŠ›å‡ºå¼‚å¸¸çš„å‡½æ•°ï¼Œdestructorï¼ˆææ„å‡½æ•°ï¼‰åº”è¯¥æ•æ‰æ‰€æœ‰å¼‚å¸¸ï¼Œç„¶å&lt;strong&gt;æŠ‘åˆ¶å®ƒä»¬æˆ–è€…ç»ˆæ­¢ç¨‹åº&lt;/strong&gt;ã€‚è¿™é‡Œçš„æŠ‘åˆ¶æŒ‡çš„æ˜¯åœ¨ try catch è¯­å¥ä¸­æ•è·å¹¶å¤„ç†ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœ classï¼ˆç±»ï¼‰å®¢æˆ·éœ€è¦èƒ½å¯¹ä¸€ä¸ªæ“ä½œæŠ›å‡ºçš„ exceptionsï¼ˆå¼‚å¸¸ï¼‰åšå‡ºå›åº”ï¼Œåˆ™é‚£ä¸ª classï¼ˆç±»ï¼‰åº”è¯¥æä¾›ä¸€ä¸ªå¸¸è§„çš„å‡½æ•°ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œnon-destructorï¼ˆéææ„å‡½æ•°ï¼‰ï¼‰æ¥å®Œæˆè¿™ä¸ªæ“ä½œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¯¹äºç¬¬äºŒç‚¹ï¼Œä¸€ä¸ªå¸¸è§ä¾‹å­æ˜¯ä½¿ç”¨å„ç§ db çš„è¿æ¥æ± çš„åœºæ™¯ï¼Œé€šå¸¸ç”¨æˆ·éœ€è¦ä½¿ç”¨ db.close () æ˜¾å¼é‡Šæ”¾èµ„æºï¼Œå¯¹äºæ‹¥æœ‰ RAII æœºåˆ¶çš„ C++ æ¥è¯´ï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦è¿™æ ·åšå‘¢ã€‚å› ä¸ºé€šè¿‡ db.close () è¿™æ ·çš„æ™®é€šæˆå‘˜å‡½æ•°ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡ try catch è¯­å¥è‡ªè¡Œå¯¹è¿™ä¸ªå¼‚å¸¸åšå‡ºå›åº”ã€‚åœ¨ææ„å‡½æ•°ä¸­ï¼ŒåŒæ ·å¯ä»¥ç»§ç»­ä½¿ç”¨ RAII æœºåˆ¶ï¼Œè®°å½•ç”¨æˆ·æœ‰æ— æ‰‹åŠ¨é‡Šæ”¾ï¼Œæ²¡æœ‰åˆ™è‡ªè¡Œè°ƒç”¨ db.close ()&lt;/p&gt;
&lt;h3 id=&#34;item9-é¿å…åœ¨æ„é€ å‡½æ•°æˆ–è€…ææ„å‡½æ•°ä¸­è°ƒç”¨è™šå‡½æ•°&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item9-é¿å…åœ¨æ„é€ å‡½æ•°æˆ–è€…ææ„å‡½æ•°ä¸­è°ƒç”¨è™šå‡½æ•°&#34;&gt;#&lt;/a&gt; item9 é¿å…åœ¨æ„é€ å‡½æ•°æˆ–è€…ææ„å‡½æ•°ä¸­è°ƒç”¨è™šå‡½æ•°&lt;/h3&gt;
&lt;p&gt;ç®€å•æ¥è¯´ï¼Œåœ¨æ„é€ å’Œææ„çš„æ—¶å€™ï¼Œå¯¹è±¡çš„ç±»å‹æ˜¯ä¸ç¡®å®šçš„ï¼Œå› æ­¤æƒ³è¦è°ƒç”¨çš„è™šå‡½æ•°å¯èƒ½ä¸ä¼šå¦‚ä½ æ‰€æ„¿ã€‚å¯ä»¥è¿™æ ·ç†è§£ï¼Œå†ææ„å’Œæ„é€ å‡½æ•°ä¸­è™šå‡½æ•°è¡¨çš„æ„é€ å’Œææ„çš„æ—¶æœºæ˜¯ä¸ç¡®å®šçš„ï¼Œå› æ­¤è°ƒç”¨è™šå‡½æ•°ä¼šå­˜åœ¨é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç‚¹çœ‹ä¼¼ç®€å•ï¼Œå´ååˆ†å®¹æ˜“è¸©å‘ï¼Œè€ƒè™‘ä»¥ä¸‹åœºæ™¯ï¼Œä¸ºäº†é¿å…é‡å¤ä»£ç ï¼Œæˆ‘ä»¬å¯èƒ½å°†ä¸åŒçš„å˜é‡åˆå§‹åŒ–æ”¾åˆ°ä¸€ä¸ª init () å‡½æ•°ä¹‹ä¸­ï¼Œå³ä½¿è¿™ä¸ªå‡½æ•°ä¸æ˜¯è™šå‡½æ•°ï¼Œä½†å¦‚æœå…¶ä¸­è°ƒç”¨äº†è™šå‡½æ•°ï¼Œè¿˜æ˜¯è¿èƒŒäº†è¿™ä¸€åŸåˆ™ï¼Œå¹¶ä¸”ä»¥éš¾ä»¥å¯Ÿè§‰çš„æ–¹å¼ã€‚&lt;/p&gt;
&lt;h3 id=&#34;item10-åœ¨èµ‹å€¼è¿ç®—ç¬¦ä¸­è¿”å›ä¸€ä¸ªreference-to-this&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item10-åœ¨èµ‹å€¼è¿ç®—ç¬¦ä¸­è¿”å›ä¸€ä¸ªreference-to-this&#34;&gt;#&lt;/a&gt; item10 åœ¨èµ‹å€¼è¿ç®—ç¬¦ä¸­è¿”å›ä¸€ä¸ª reference to *this&lt;/h3&gt;
&lt;p&gt;ç®€å•æ¥è¯´ è¿™æ ·åšæ˜¯ä¸ºäº†æ”¯æŒé“¾å¼èµ‹å€¼å¹¶è®©è‡ªå·±çš„æ¥å£å’Œå†…ç½®ç±»å‹çš„æ¥å£å°½å¯èƒ½ç›¸ä¼¼ã€‚å› æ­¤ï¼Œè¯·å°†èµ‹å€¼æ“ä½œç¬¦çš„è¿”å›ç±»å‹è®¾ä¸º ObjectClass&amp;amp; å¹¶è¿”å› * thisã€‚&lt;/p&gt;
&lt;h3 id=&#34;item11-åœ¨èµ‹å€¼è¿ç®—ç¬¦ä¸­å¤„ç†è‡ªèµ‹å€¼&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item11-åœ¨èµ‹å€¼è¿ç®—ç¬¦ä¸­å¤„ç†è‡ªèµ‹å€¼&#34;&gt;#&lt;/a&gt; item11 åœ¨èµ‹å€¼è¿ç®—ç¬¦ä¸­å¤„ç†è‡ªèµ‹å€¼&lt;/h3&gt;
&lt;p&gt;å½“ç»™ä¸€ä¸ªå¯¹è±¡èµ‹å€¼æ—¶ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œè¿™ä¸ªå¯¹è±¡éœ€è¦é‡Šæ”¾ç°æœ‰èµ„æºï¼Œç„¶åé€šè¿‡èµ‹å€¼è·å–æ–°èµ„æºï¼Œè¿™ä¸ªé€»è¾‘åœ¨å¤„ç†è‡ªæˆ‘èµ‹å€¼çš„æ—¶å€™ä¼šå¤±æ•ˆï¼Œå› ä¸ºé‡Šæ”¾çš„èµ„æºå¯èƒ½æ°¸è¿œæ‰¾ä¸åˆ°äº†ã€‚&lt;/p&gt;
&lt;p&gt;è§£å†³è¿™ä¸ªé—®é¢˜çš„ä¸€ä¸ªæ–¹æ¡ˆæ˜¯ï¼Œé€šè¿‡ç‰¹åˆ¤å¤„ç†è‡ªèµ‹å€¼æƒ…å†µï¼Œå¾ˆç®€å•ä¹Ÿå¸¸è§çš„ä¸€ç§æ€è·¯å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;SomeClass&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; SomeClass&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;operator&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; SomeClass&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; rhs&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;this&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt;rhs&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;delete&lt;/span&gt; ptr&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;	&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  ptr &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;DataBlock&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt;rhs&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;ptr&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;	&lt;span class=&#34;token comment&#34;&gt;// å¦‚æœæ­¤å¤„æŠ›å‡ºå¼‚å¸¸ï¼Œptr å°†æŒ‡å‘ä¸€å—å·²ç»è¢«åˆ é™¤çš„å†…å­˜ã€‚&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;é¦–å…ˆè¿™ç§æ–¹æ¡ˆçš„ä¸€ä¸ªé—®é¢˜æ˜¯ï¼šå½“é‡Šæ”¾å·²æœ‰èµ„æºåï¼Œè·å–æ–°èµ„æºçš„è¿‡ç¨‹å¯èƒ½å‘ç”Ÿå¼‚å¸¸ï¼Œæ­¤æ—¶æŒ‡é’ˆä¼šæŒ‡å‘è¢«é‡Šæ”¾çš„èµ„æºï¼Œå¯¼è‡´åç»­ç¨‹åºå‡ºé”™ã€‚&lt;/p&gt;
&lt;p&gt;è§£å†³çš„æ€è·¯ä¹Ÿå¾ˆç®€å•ï¼Œå³å…ˆè·å–æ–°çš„èµ„æºï¼Œç„¶åå†é‡Šæ”¾åŸæœ‰çš„èµ„æºï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;SomeClass&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; SomeClass&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;operator&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; SomeClass&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; rhs&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  DataBlock&lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt; pOrg &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; ptr&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  ptr &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;DataBlock&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt;rhs&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;ptr&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;	&lt;span class=&#34;token comment&#34;&gt;// å¦‚æœæ­¤å¤„æŠ›å‡ºå¼‚å¸¸ï¼Œptr ä»ç„¶æŒ‡å‘ä¹‹å‰çš„å†…å­˜ã€‚&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;delete&lt;/span&gt; pOrg&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;åŒæ ·ï¼Œè¿™ç§æ–¹æ¡ˆä¹Ÿä¸ç”¨ç‰¹åˆ¤æ˜¯å¦æ˜¯è‡ªèµ‹å€¼è¯­å¥äº†ï¼Œè¿˜æœ‰ä¸€ç‚¹å¥½å¤„æ˜¯ï¼Œé€šè¿‡å‡å°‘ if è¯­å¥ï¼Œå¯èƒ½ä¼šå¯¹æŒ‡ä»¤æµæ°´çº¿çš„å·¥ä½œæœ‰ç›Šã€‚&lt;/p&gt;
&lt;p&gt;è¿˜æœ‰ä¸€ç§æ–¹æ¡ˆæ˜¯ä½¿ç”¨ copy-and-swap æ–¹æ³•ï¼Œä¸è¿‡æœ¬äººæ„Ÿè§‰æ€§èƒ½å¯èƒ½ä¼šç¨ä½ï¼Œå› æ­¤ä¸ä½œè®¨è®ºã€‚&lt;/p&gt;
&lt;h3 id=&#34;item12-æ‹·è´ä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰ç»„æˆæˆåˆ†&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item12-æ‹·è´ä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰ç»„æˆæˆåˆ†&#34;&gt;#&lt;/a&gt; item12 æ‹·è´ä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰ç»„æˆæˆåˆ†&lt;/h3&gt;
&lt;p&gt;å³æ—¶åˆ»æ³¨æ„ä»¥ä¸‹ä¸‰ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸ºç±»å¢åŠ æˆå‘˜æ—¶ï¼Œåˆ«å¿˜äº†æ›´æ”¹æ‹·è´ç›¸å…³çš„å‡½æ•°ä¸­çš„é€»è¾‘&lt;/li&gt;
&lt;li&gt;åœ¨ç»§æ‰¿çš„åœºæ™¯ä¸‹ï¼Œå­ç±»éœ€è¦å¹¶ä¸”å¿…é¡»é€šè¿‡è°ƒç”¨çˆ¶ç±»çš„æ‹·è´æ„é€ æˆ–æ‹·è´èµ‹å€¼æ¥è¿›è¡Œçˆ¶ç±»æˆå‘˜çš„æ‹·è´ã€‚&lt;/li&gt;
&lt;li&gt;æ‹·è´æ„é€ å’Œæ‹·è´èµ‹å€¼ä¸èƒ½äº’ç›¸è°ƒç”¨ï¼Œå¦‚æœæƒ³å‡å°‘ä»£ç é‡å¤ï¼Œå°±å°†é€šç”¨åŠŸèƒ½æ”¾å…¥ä¸€ä¸ªç¬¬ä¸‰æ–¹çš„å‡½æ•°ä¸­ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;èµ„æºç®¡ç†&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#èµ„æºç®¡ç†&#34;&gt;#&lt;/a&gt; èµ„æºç®¡ç†&lt;/h2&gt;
&lt;h3 id=&#34;item13-ä½¿ç”¨å¯¹è±¡ç®¡ç†èµ„æº&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item13-ä½¿ç”¨å¯¹è±¡ç®¡ç†èµ„æº&#34;&gt;#&lt;/a&gt; item13 ä½¿ç”¨å¯¹è±¡ç®¡ç†èµ„æº&lt;/h3&gt;
&lt;p&gt;ç»å…¸çš„ RAII æ€æƒ³ï¼Œå³åˆ©ç”¨ææ„å‡½æ•°é€€å‡ºä½œç”¨åŸŸè‡ªåŠ¨è°ƒç”¨çš„ç‰¹ç‚¹å¤„ç†èµ„æºçš„é‡Šæ”¾ã€‚&lt;/p&gt;
&lt;p&gt;C++11 åæœ‰äº†æ™ºèƒ½æŒ‡é’ˆï¼Œå› æ­¤ RAII çš„å®è·µå·²ç»å¾ˆç®€å•äº†ã€‚æ²¡æƒ³åˆ°é‚£æ—¶å€™çš„æ™ºèƒ½æŒ‡é’ˆå·²ç»å­˜åœ¨äº tr1 åº“é‡Œäº†ğŸ˜„&lt;/p&gt;
&lt;h3 id=&#34;item14-è°¨æ…è€ƒè™‘èµ„æºç®¡ç†ç±»çš„æ‹·è´è¡Œä¸º&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item14-è°¨æ…è€ƒè™‘èµ„æºç®¡ç†ç±»çš„æ‹·è´è¡Œä¸º&#34;&gt;#&lt;/a&gt; item14 è°¨æ…è€ƒè™‘èµ„æºç®¡ç†ç±»çš„æ‹·è´è¡Œä¸º&lt;/h3&gt;
&lt;p&gt;å³éœ€è¦è€ƒè™‘åœ¨ä¸åŒæƒ…å†µä¸‹æ˜¯å¦è¦ç¦æ­¢æˆ–ä»¥å…¶ä»–æ–¹å¼æ§åˆ¶å¯¹èµ„æºçš„æ‹·è´ã€‚&lt;/p&gt;
&lt;p&gt;C++11 åæœ‰äº† shared_ptr å’Œ unique_ptr åï¼Œåº”è¯¥èƒ½åº”ä»˜å„ç§åœºæ™¯äº†ã€‚&lt;/p&gt;
&lt;h3 id=&#34;item15-åœ¨èµ„æºç®¡ç†ç±»ä¸­å‡†å¤‡è®¿é—®è£¸èµ„æºraw-resources&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item15-åœ¨èµ„æºç®¡ç†ç±»ä¸­å‡†å¤‡è®¿é—®è£¸èµ„æºraw-resources&#34;&gt;#&lt;/a&gt; item15 åœ¨èµ„æºç®¡ç†ç±»ä¸­å‡†å¤‡è®¿é—®è£¸èµ„æºï¼ˆraw resourcesï¼‰&lt;/h3&gt;
&lt;p&gt;åœ¨æ™ºèƒ½æŒ‡é’ˆä¸­ï¼Œå¯ä»¥å‘ç°ï¼Œå®ƒä»¬æä¾›äº† get () æ–¹æ³•è·å–ä¿ç®¡çš„èµ„æºã€‚ä¸ºä»€ä¹ˆï¼Ÿ&lt;/p&gt;
&lt;p&gt;å› ä¸ºå¾ˆå¤š API çš„å‚æ•°ä¸­ï¼Œæ˜¯å’Œèµ„æºæœ¬èº«æ‰“äº¤é“çš„ï¼Œå› æ­¤ä¸€ä¸ª RAII èµ„æºç®¡ç†ç±»éœ€è¦æä¾›è®¿é—®è£¸èµ„æºçš„æ¥å£ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªç–‘é—®æ˜¯ï¼Œè¿™æ ·æ˜¯å¦è¿åäº†å°è£…æ€§ï¼Ÿç­”æ¡ˆæ˜¯ä¸ä¼šï¼Œå› ä¸º RAII åªæ˜¯ä¸ºäº†ä¿è¯èµ„æºé‡Šæ”¾è¿™ä¸ªè¡Œä¸ºçš„å‘ç”Ÿï¼Œå°è£…ä¸æ˜¯å…¶å­˜åœ¨çš„ç›®çš„ã€‚åŒæ—¶ï¼Œå¦‚æœä½ æä¾›éšå¼è½¬æ¢ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä¸€äº›é¢„æœŸä¹‹å¤–çš„é”™è¯¯ï¼Œå› æ­¤èµ„æºç®¡ç†ç±»ä»…æä¾›æ˜¾ç¤ºè½¬æ¢æ˜¯æœ€åˆç†çš„ã€‚&lt;/p&gt;
&lt;h3 id=&#34;item16-ä½¿ç”¨ç›¸åŒå½¢å¼çš„newå’Œdelete&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item16-ä½¿ç”¨ç›¸åŒå½¢å¼çš„newå’Œdelete&#34;&gt;#&lt;/a&gt; item16 ä½¿ç”¨ç›¸åŒå½¢å¼çš„ new å’Œ delete&lt;/h3&gt;
&lt;p&gt;å³ new å’Œ deleteï¼Œnew [] å’Œ delete [] æ­é…ä½¿ç”¨&lt;/p&gt;
&lt;h3 id=&#34;item17-åœ¨ä¸€ä¸ªç‹¬ç«‹çš„è¯­å¥ä¸­å°†newå‡ºæ¥çš„å¯¹è±¡å­˜å…¥æ™ºèƒ½æŒ‡é’ˆ&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item17-åœ¨ä¸€ä¸ªç‹¬ç«‹çš„è¯­å¥ä¸­å°†newå‡ºæ¥çš„å¯¹è±¡å­˜å…¥æ™ºèƒ½æŒ‡é’ˆ&#34;&gt;#&lt;/a&gt; item17 åœ¨ä¸€ä¸ªç‹¬ç«‹çš„è¯­å¥ä¸­å°† new å‡ºæ¥çš„å¯¹è±¡å­˜å…¥æ™ºèƒ½æŒ‡é’ˆ&lt;/h3&gt;
&lt;p&gt;æ­¤æ¡æ˜¯ä¸ºäº†é˜²æ­¢éå¸¸å¾®å¦™çš„å†…å­˜æ³„æ¼ï¼Œè¿™ç§ bug å‘ç”Ÿæ¦‚ç‡å¾ˆå°ï¼Œä½†ä¸€æ—¦å‡ºç°å¾ˆéš¾è¢«è§£å†³ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºè¿™æ ·çš„ä¸¤ä¸ªå‡½æ•°ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;priority&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;processWidget&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;share_ptr&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;Widget&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt; sp&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;int&lt;/span&gt; priority&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;ä¸€ä¸ªç®€æ´çš„è°ƒç”¨æ–¹æ³•æ˜¯ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;processWidget&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token generic-function&#34;&gt;&lt;span class=&#34;token function&#34;&gt;share_ptr&lt;/span&gt;&lt;span class=&#34;token generic class-name&#34;&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;widget&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;Widget&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;priority&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;ä½†è¿™ä¸ªè¯­å¥çš„ä¸€å¤§ç‰¹ç‚¹æ˜¯ï¼Œå¯èƒ½å˜ä¸ºè¿™æ ·çš„æ‰§è¡Œé¡ºåºï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;æ‰§è¡Œ &amp;quot;new Widget&amp;quot;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è°ƒç”¨ priorityã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è°ƒç”¨ shared_ptr çš„æ„é€ å‡½æ•°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å½“åœ¨ç¬¬äºŒç‚¹ä¸­å‘ç”Ÿäº†å¼‚å¸¸ï¼Œç¬¬ä¸€ç‚¹çš„ new Widget () æ„é€ çš„ç±»å¯èƒ½å°±ä¼šå‘ç”Ÿå†…å­˜æ³„æ¼ã€‚&lt;/p&gt;
&lt;p&gt;é¿å…ç±»ä¼¼é—®é¢˜çš„æ–¹æ³•å¾ˆç®€å•ï¼šç”¨ä¸€ä¸ªå•ç‹¬çš„è¯­å¥åˆ›å»º Widget å¹¶å°†å®ƒå­˜å…¥ä¸€ä¸ªæ™ºèƒ½æŒ‡é’ˆï¼Œç„¶åå°†è¿™ä¸ªæ™ºèƒ½æŒ‡é’ˆä¼ é€’ç»™ processWidget&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;shared_ptr&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;Widget&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;pw&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;Widget&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;  &lt;span class=&#34;token comment&#34;&gt;// store newed object&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;                                      &lt;span class=&#34;token comment&#34;&gt;// in a smart pointer in a&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;									  &lt;span class=&#34;token comment&#34;&gt;// standalone statement&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;processWidget&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;pw&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;priority&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;        &lt;span class=&#34;token comment&#34;&gt;// this call won&#39;t leak&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;è¿™æ ·åšæ˜¯å› ä¸ºç¼–è¯‘å™¨åœ¨ä¸åŒçš„è¯­å¥ä¹‹é—´é‡æ–°å®‰æ’æ“ä½œé¡ºåºçš„æ´»åŠ¨ä½™åœ°æ¯”åœ¨ä¸€ä¸ªè¯­å¥ä¹‹å†…è¦å°å¾—å¤š&lt;/p&gt;
&lt;h2 id=&#34;è®¾è®¡ä¸å£°æ˜&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#è®¾è®¡ä¸å£°æ˜&#34;&gt;#&lt;/a&gt; è®¾è®¡ä¸å£°æ˜&lt;/h2&gt;
&lt;h3 id=&#34;item18-è®©æ¥å£å®¹æ˜“è¢«æ­£ç¡®ä½¿ç”¨&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item18-è®©æ¥å£å®¹æ˜“è¢«æ­£ç¡®ä½¿ç”¨&#34;&gt;#&lt;/a&gt; item18 è®©æ¥å£å®¹æ˜“è¢«æ­£ç¡®ä½¿ç”¨&lt;/h3&gt;
&lt;p&gt;æœ¬æ¡æ¬¾è®¨è®ºå¦‚ä½•&lt;strong&gt;å¸®åŠ©ä½ çš„å®¢æˆ·åœ¨ä½¿ç”¨ä½ çš„æ¥å£æ—¶é¿å…ä»–ä»¬çŠ¯é”™è¯¯&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è®¾è®¡æ¥å£æ—¶ï¼Œæˆ‘ä»¬å¸¸å¸¸ä¼šé”™è¯¯åœ°å‡è®¾ï¼Œæ¥å£çš„è°ƒç”¨è€…&lt;strong&gt;æ‹¥æœ‰æŸäº›å¿…è¦çš„çŸ¥è¯†æ¥è§„é¿ä¸€äº›å¸¸è¯†æ€§çš„é”™è¯¯&lt;/strong&gt;ã€‚ä½†äº‹å®ä¸Šï¼Œæ¥å£çš„è°ƒç”¨è€…å¹¶ä¸æ€»æ˜¯åƒæ­£åœ¨è®¾è®¡æ¥å£çš„æˆ‘ä»¬ä¸€æ · â€œèªæ˜â€ æˆ–è€…çŸ¥é“æ¥å£å®ç°çš„â€ å†…å¹•ä¿¡æ¯ â€œï¼Œç»“æœå°±æ˜¯ï¼Œæˆ‘ä»¬é”™è¯¯çš„å‡è®¾ä½¿æ¥å£è¡¨ç°å¾—ä¸ç¨³å®šã€‚è¿™äº›ä¸ç¨³å®šå› ç´ å¯èƒ½æ˜¯ç”±äºè°ƒç”¨è€…ç¼ºä¹æŸäº›å…ˆéªŒçŸ¥è¯†ï¼Œä¹Ÿæœ‰å¯èƒ½ä»…ä»…æ˜¯ä»£ç ä¸Šçš„ç²—å¿ƒé”™è¯¯ã€‚æ¥å£çš„è°ƒç”¨è€…å¯èƒ½æ˜¯åˆ«äººï¼Œä¹Ÿå¯èƒ½æ˜¯æœªæ¥çš„ä½ ã€‚æ‰€ä»¥ä¸€ä¸ªåˆç†çš„æ¥å£ï¼Œåº”è¯¥å°½å¯èƒ½çš„ä»&lt;strong&gt;è¯­æ³•å±‚é¢&lt;/strong&gt;å¹¶åœ¨&lt;strong&gt;ç¼–è¯‘ä¹‹æ—¶è¿è¡Œä¹‹å‰&lt;/strong&gt;ï¼Œå¸®åŠ©æ¥å£çš„è°ƒç”¨è€…è§„é¿å¯èƒ½çš„é£é™©ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨&lt;strong&gt;å¤–è¦†ç±»å‹ï¼ˆwrapperï¼‰&lt;strong&gt;æé†’è°ƒç”¨è€…ä¼ å‚é”™è¯¯æ£€æŸ¥ï¼Œå°†å‚æ•°çš„é™„åŠ æ¡ä»¶é™åˆ¶åœ¨&lt;/strong&gt;ç±»å‹æœ¬èº«&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å½“è°ƒç”¨è€…è¯•å›¾ä¼ å…¥æ•°å­— â€œ13â€ æ¥è¡¨è¾¾ä¸€ä¸ª â€œæœˆä»½â€ çš„æ—¶å€™ï¼Œä½ å¯ä»¥åœ¨å‡½æ•°å†…éƒ¨åšè¿è¡ŒæœŸçš„æ£€æŸ¥ï¼Œç„¶åæå‡ºæŠ¥è­¦æˆ–ä¸€ä¸ªå¼‚å¸¸ï¼Œä½†è¿™æ ·çš„åšæ³•æ›´åƒæ˜¯ä¸€ç§è´£ä»»è½¬å« â€”â€” è°ƒç”¨è€…åªæœ‰åœ¨å°è¯•è¿‡åæ‰å‘ç°è‡ªå·±æ‰‹æ®‹æŠŠ â€œ12â€ å†™æˆäº† â€œ13â€ã€‚å¦‚æœåœ¨è®¾è®¡å‚æ•°ç±»å‹æ—¶å°±æŠŠ â€œæœˆä»½â€ è¿™ä¸€ç±»å‹æŠ½è±¡å‡ºæ¥ï¼Œæ¯”å¦‚ä½¿ç”¨ enum classï¼ˆå¼ºæšä¸¾ç±»å‹ï¼‰ï¼Œå°±èƒ½å¸®åŠ©å®¢æˆ·åœ¨ç¼–è¯‘æ—¶æœŸå°±å‘ç°é—®é¢˜ï¼ŒæŠŠå‚æ•°çš„é™„åŠ æ¡ä»¶é™åˆ¶åœ¨ç±»å‹æœ¬èº«ï¼Œå¯ä»¥è®©æ¥å£æ›´æ˜“ç”¨ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä»&lt;strong&gt;è¯­æ³•å±‚é¢&lt;/strong&gt;é™åˆ¶è°ƒç”¨è€…&lt;strong&gt;ä¸èƒ½åšçš„äº‹&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ¥å£çš„è°ƒç”¨è€…å¾€å¾€æ— æ„ç”šè‡³æ²¡æœ‰æ„è¯†åˆ°è‡ªå·±çŠ¯äº†ä¸ªé”™è¯¯ï¼Œæ‰€ä»¥æ¥å£çš„è®¾è®¡è€…å¿…é¡»åœ¨è¯­æ³•å±‚é¢åšå‡ºé™åˆ¶ã€‚ä¸€ä¸ªæ¯”è¾ƒå¸¸è§çš„é™åˆ¶æ˜¯åŠ ä¸Š &lt;code&gt;const&lt;/code&gt; ï¼Œæ¯”å¦‚åœ¨ &lt;code&gt;operate*&lt;/code&gt;  çš„è¿”å›ç±»å‹ä¸ŠåŠ ä¸Š &lt;code&gt;const&lt;/code&gt;  ä¿®é¥°ï¼Œå¯ä»¥é˜²æ­¢æ— æ„é”™è¯¯çš„èµ‹å€¼ &lt;code&gt;if (a * b = c)&lt;/code&gt; ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ¥å£åº”è¡¨ç°å‡ºä¸å†…ç½®ç±»å‹çš„ä¸€è‡´æ€§&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è®©è‡ªå·±çš„ç±»å‹å’Œå†…ç½®ç±»å‹çš„ä¸€è‡´æ€§ï¼Œæ¯”å¦‚è‡ªå®šä¹‰å®¹å™¨çš„æ¥å£åœ¨å‘½åä¸Šå’Œ STL åº”å…·å¤‡ä¸€è‡´æ€§ï¼Œå¯ä»¥æœ‰æ•ˆé˜²æ­¢è°ƒç”¨è€…çŠ¯é”™è¯¯ã€‚æˆ–è€…ä½ æœ‰ä¸¤ä¸ªå¯¹è±¡ç›¸ä¹˜çš„éœ€æ±‚ï¼Œé‚£ä¹ˆä½ æœ€å¥½é‡è½½ &lt;code&gt;operator*&lt;/code&gt;  è€Œå¹¶éè®¾è®¡åä¸ºâ€multiplyâ€ çš„æˆå‘˜å‡½æ•°ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä»è¯­æ³•å±‚é¢é™åˆ¶è°ƒç”¨è€…&lt;strong&gt;å¿…é¡»åšçš„äº‹&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;åˆ«è®©æ¥å£çš„è°ƒç”¨è€…æ€»æ˜¯è®°å¾—åšæŸäº›äº‹æƒ…&lt;/strong&gt;ï¼Œæ¥å£çš„è®¾è®¡è€…åº”åœ¨å‡å®šä»–ä»¬&lt;strong&gt;æ€»æ˜¯å¿˜è®°&lt;/strong&gt;è¿™äº›æ¡æ¡æ¡†æ¡†çš„å‰æä¸‹è®¾è®¡æ¥å£ã€‚æ¯”å¦‚ç”¨æ™ºèƒ½æŒ‡é’ˆä»£æ›¿åŸç”ŸæŒ‡é’ˆå°±æ˜¯ä¸ºè°ƒç”¨è€…ç€æƒ³çš„å¥½ä¾‹å­ã€‚å¦‚æœä¸€ä¸ªæ ¸å¿ƒæ–¹æ³•éœ€è¦åœ¨ä½¿ç”¨å‰åè®¾ç½®å’Œæ¢å¤ç¯å¢ƒï¼ˆæ¯”å¦‚è·å–é”å’Œå½’è¿˜é”ï¼‰ï¼Œæ›´å¥½çš„åšæ³•æ˜¯å°†è®¾ç½®å’Œæ¢å¤ç¯å¢ƒè®¾ç½®æˆçº¯è™šå‡½æ•°å¹¶è¦æ±‚è°ƒç”¨è€…ç»§æ‰¿è¯¥æŠ½è±¡ç±»ï¼Œå¼ºåˆ¶ä»–ä»¬å»å®ç°ã€‚åœ¨æ ¸å¿ƒæ–¹æ³•å‰åå¯¹è®¾ç½®å’Œæ¢å¤ç¯å¢ƒçš„è°ƒç”¨ï¼Œåˆ™åº”ç”±æ¥å£è®¾è®¡è€…æ“å¿ƒã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å½“æ–¹æ³•çš„è°ƒç”¨è€…ï¼ˆæˆ‘ä»¬çš„å®¢æˆ·ï¼‰è´£ä»»è¶Šå°‘ï¼Œä»–ä»¬å¯èƒ½çŠ¯çš„é”™è¯¯ä¹Ÿå°±è¶Šå°‘ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&#34;item19-å°†classçš„è®¾è®¡å½“æˆè®¾è®¡ä¸€ä¸ªtype&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item19-å°†classçš„è®¾è®¡å½“æˆè®¾è®¡ä¸€ä¸ªtype&#34;&gt;#&lt;/a&gt; item19 å°† class çš„è®¾è®¡å½“æˆè®¾è®¡ä¸€ä¸ª type&lt;/h3&gt;
&lt;p&gt;æœ¬æ¡æ¬¾æé†’æˆ‘ä»¬è®¾è®¡ class éœ€è¦è€ƒè™‘çš„é—®é¢˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¯¹è±¡è¯¥å¦‚ä½•åˆ›å»ºé”€æ¯ï¼šåŒ…æ‹¬æ„é€ å‡½æ•°ã€ææ„å‡½æ•°ä»¥åŠ new å’Œ delete æ“ä½œç¬¦çš„é‡æ„éœ€æ±‚ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹è±¡çš„åˆå§‹åŒ–ä¸èµ‹å€¼è¡Œä¸ºåº”æœ‰ä½•åŒºåˆ«ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹è±¡è¢«æ‹·è´æ—¶åº”è€ƒè™‘çš„è¡Œä¸ºï¼šæ‹·è´æ„é€ å‡½æ•°ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹è±¡çš„åˆæ³•å€¼æ˜¯ä»€ä¹ˆï¼Ÿåœ¨æˆå‘˜å‡½æ•°å†…éƒ¨å¯¹å‚æ•°åšåˆæ³•æ€§æ£€æŸ¥ã€‚&lt;/li&gt;
&lt;li&gt;æ–°çš„ç±»å‹æ˜¯å¦åº”è¯¥å¤åˆæŸä¸ªç»§æ‰¿ä½“ç³»ï¼Œè¿™å°±åŒ…å«è™šå‡½æ•°çš„è¦†ç›–é—®é¢˜ã€‚&lt;/li&gt;
&lt;li&gt;æ–°ç±»å‹å’Œå·²æœ‰ç±»å‹ä¹‹é—´çš„éšå¼è½¬æ¢é—®é¢˜ï¼Œè¿™æ„å‘³ç€ç±»å‹è½¬æ¢å‡½æ•°å’Œé explicit å‡½æ•°ä¹‹é—´çš„å–èˆã€‚&lt;/li&gt;
&lt;li&gt;æ–°ç±»å‹æ˜¯å¦éœ€è¦é‡è½½æ“ä½œç¬¦ã€‚&lt;/li&gt;
&lt;li&gt;ä»€ä¹ˆæ ·çš„æ¥å£åº”å½“æš´éœ²åœ¨å¤–ï¼Œè€Œä»€ä¹ˆæ ·çš„æ¥å£åº”å½“å°è£…åœ¨å†…ï¼ˆpublic å’Œ privateï¼‰&lt;/li&gt;
&lt;li&gt;æ–°ç±»å‹çš„æ•ˆç‡ã€èµ„æºè·å–å½’è¿˜ã€çº¿ç¨‹å®‰å…¨æ€§å’Œå¼‚å¸¸å®‰å…¨æ€§å¦‚ä½•ä¿è¯ã€‚&lt;/li&gt;
&lt;li&gt;è¿™ä¸ªç±»æ˜¯å¦å…·å¤‡ template çš„æ½œè´¨ï¼Œå¦‚æœæœ‰çš„è¯ï¼Œå°±åº”æ”¹ä¸ºæ¨¡æ¿ç±»ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;item20-å°½é‡ä½¿ç”¨pass-by-reference-to-constæ›¿æ¢pass-by-value&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item20-å°½é‡ä½¿ç”¨pass-by-reference-to-constæ›¿æ¢pass-by-value&#34;&gt;#&lt;/a&gt; item20 å°½é‡ä½¿ç”¨ pass-by-reference-to-const æ›¿æ¢ pass-by-value&lt;/h3&gt;
&lt;p&gt;å€¼ä¼ å‚çš„é—®é¢˜æœ‰ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æŒ‰å€¼ä¼ å‚æ¶‰åŠå¤§é‡å‚æ•°çš„å¤åˆ¶ï¼Œè¿™äº›å‰¯æœ¬å¤§å¤šæ˜¯æ²¡æœ‰å¿…è¦çš„ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœæ‹·è´æ„é€ å‡½æ•°è®¾è®¡çš„æ˜¯æ·±æ‹·è´è€Œéæµ…æ‹·è´ï¼Œé‚£ä¹ˆæ‹·è´çš„æˆæœ¬å°†è¿œè¿œå¤§äºæ‹·è´æŸå‡ ä¸ªæŒ‡é’ˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯¹äºå¤šæ€è€Œè¨€ï¼Œå°†çˆ¶ç±»è®¾è®¡æˆæŒ‰å€¼ä¼ å‚ï¼Œå¦‚æœä¼ å…¥çš„æ˜¯å­ç±»å¯¹è±¡ï¼Œä»…ä¼šå¯¹å­ç±»å¯¹è±¡çš„çˆ¶ç±»éƒ¨åˆ†è¿›è¡Œæ‹·è´ï¼Œå³éƒ¨åˆ†æ‹·è´ï¼Œè€Œæ‰€æœ‰å±äºå­ç±»çš„ç‰¹æ€§å°†è¢«ä¸¢å¼ƒï¼Œé€ æˆä¸å¯é¢„çŸ¥çš„é”™è¯¯ï¼ŒåŒæ—¶è™šå‡½æ•°ä¹Ÿä¸ä¼šè¢«è°ƒç”¨ã€‚&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;å°çš„ç±»å‹å¹¶ä¸æ„å‘³ç€æŒ‰å€¼ä¼ å‚çš„æˆæœ¬å°±ä¼šå°ã€‚é¦–å…ˆï¼Œç±»å‹çš„å¤§å°ä¸ç¼–è¯‘å™¨çš„ç±»å‹å’Œç‰ˆæœ¬æœ‰å¾ˆå¤§å…³ç³»ï¼ŒæŸäº›ç±»å‹åœ¨ç‰¹å®šç¼–è¯‘å™¨ä¸Šç¼–è¯‘ç»“æœä¼šæ¯”å…¶ä»–ç¼–è¯‘å™¨å¤§å¾—å¤šã€‚å°çš„ç±»å‹ä¹Ÿæ— æ³•ä¿è¯åœ¨æ—¥åä»£ç å¤ç”¨å’Œé‡æ„ä¹‹åï¼Œå…¶ç±»å‹å§‹ç»ˆå¾ˆå°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å°½ç®¡å¦‚æ­¤ï¼Œé¢å¯¹å†…ç½®ç±»å‹å’Œ STL çš„è¿­ä»£å™¨ä¸å‡½æ•°å¯¹è±¡ï¼Œæˆ‘ä»¬é€šå¸¸è¿˜æ˜¯ä¼šé€‰æ‹©æŒ‰å€¼ä¼ å‚çš„æ–¹å¼è®¾è®¡æ¥å£ã€‚å› ä¸ºï¼Œå¯¹äºå†…ç½®ç±»å‹å’Œè¿­ä»£å™¨ï¼Œå®ƒä»¬å¾€å¾€å¾ˆå°ï¼Œå€¼ä¼ é€’å¼€é”€ä½ï¼Œæœ‰æ—¶ç”šè‡³èƒœè¿‡å¼•ç”¨ã€‚è‡³äºå‡½æ•°å¯¹è±¡ï¼Œå€¼ä¼ é€’ä¸»è¦è§£å†³å¤šçº¿ç¨‹ä¸­çš„åŒæ­¥é—®é¢˜ã€‚&lt;/p&gt;
</content>
        <category term="C++ è¯»ä¹¦ç¬”è®°" />
        <updated>2024-07-28T09:38:31.000Z</updated>
    </entry>
    <entry>
        <id>http://example.com/2022/11/14/C-%EF%BC%9A%E7%A7%BB%E5%8A%A8%E8%AF%AD%E4%B9%89%E4%B8%8E%E5%8F%B3%E5%80%BC%E5%BC%95%E7%94%A8/</id>
        <title>C++ï¼šç§»åŠ¨è¯­ä¹‰ä¸å³å€¼å¼•ç”¨</title>
        <link rel="alternate" href="http://example.com/2022/11/14/C-%EF%BC%9A%E7%A7%BB%E5%8A%A8%E8%AF%AD%E4%B9%89%E4%B8%8E%E5%8F%B3%E5%80%BC%E5%BC%95%E7%94%A8/"/>
        <content type="html">&lt;h1 id=&#34;cçš„ç§»åŠ¨è¯­ä¹‰ä¸å³å€¼å¼•ç”¨&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#cçš„ç§»åŠ¨è¯­ä¹‰ä¸å³å€¼å¼•ç”¨&#34;&gt;#&lt;/a&gt; C++ çš„ç§»åŠ¨è¯­ä¹‰ä¸å³å€¼å¼•ç”¨&lt;/h1&gt;
&lt;p&gt;&lt;span id=&#34;more&#34;&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;preview.jpg&#34; alt=&#34;Gaze&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;ç§»åŠ¨è¯­ä¹‰&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#ç§»åŠ¨è¯­ä¹‰&#34;&gt;#&lt;/a&gt; ç§»åŠ¨è¯­ä¹‰&lt;/h2&gt;
&lt;h3 id=&#34;ä¸ºä½•éœ€è¦ç§»åŠ¨è¯­ä¹‰&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#ä¸ºä½•éœ€è¦ç§»åŠ¨è¯­ä¹‰&#34;&gt;#&lt;/a&gt; ä¸ºä½•éœ€è¦ç§»åŠ¨è¯­ä¹‰&lt;/h3&gt;
&lt;p&gt;å‡è®¾æœ‰å¦‚ä¸‹ä»£ç ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c++&#34;&gt;vector&amp;lt;string&amp;gt; vstr;// build up a vector of 20000 strings,each of 1000 characters
vector&amp;lt;string&amp;gt; vstr_copy1(vstr);
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ä¸ºäº†åˆå§‹åŒ– vstr_copy1 å…ˆè°ƒç”¨ vector çš„å¤åˆ¶æ„é€ å‡½æ•°ï¼Œä½¿ç”¨ new ç»™ 20000 ä¸ª string å¯¹è±¡åˆ†é…å†…å­˜ï¼Œè€Œæ¯ä¸ª string å¯¹è±¡åˆè°ƒç”¨ string çš„å¤åˆ¶æ„é€ å‡½æ•°ï¼Œä¸º 1000 ä¸ªå­—ç¬¦åˆ†é…å†…å­˜ã€‚è¿™å¾ˆæµªè´¹æ—¶é—´ï¼Œä½†å¦‚æœ vstr ä¸ vstr_copy1 éƒ½éœ€è¦ä½¿ç”¨ï¼Œè¿™å¾ˆéš¾é¿å…ã€‚&lt;/p&gt;
&lt;p&gt;å¯æœ‰æ—¶å€™è¿™æ ·ä¸å¤ªå¦¥å½“ï¼Œä¾‹å¦‚ vstr ä¸å†è¢«ä½¿ç”¨æ—¶ã€‚ä¾‹å¦‚å¦‚ä¸‹å®šä¹‰çš„å‡½æ•°ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c++&#34;&gt;vector&amp;lt;string&amp;gt; allcaps(const vector&amp;lt;string&amp;gt; &amp;amp; vs)
&amp;#123;
    vector&amp;lt;string&amp;gt; temp;
    //è®©tempå­˜å‚¨vsä¸­stringçš„å¤§å†™ç‰ˆæœ¬çš„ä»£ç 
    return temp;
&amp;#125;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å¹¶è¿™æ ·ä½¿ç”¨å®ƒï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c++&#34;&gt;vector&amp;lt;string&amp;gt; vstr;
vector&amp;lt;string&amp;gt; vstr_copy1(vstr); //#1
vector&amp;lt;string&amp;gt; vstr_copy2(allcaps(vstr)); //#2
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;allcaps () åˆ›å»ºäº†å¯¹è±¡ tempï¼Œè¯¥å¯¹è±¡ç®¡ç†ç€ 20000000 ä¸ªå­—ç¬¦ï¼›è¯­å¥äºŒä½¿ç”¨ vector å’Œ string çš„å¤åˆ¶æ„é€ å‡½æ•°åˆ›å»ºäº†ä¸€ä¸ª temp çš„å‰¯æœ¬ï¼Œç„¶ååˆ é™¤äº† tempï¼Œåšäº†å¤§é‡æ— ç”¨åŠŸã€‚å¦‚æœç¼–è¯‘å™¨ç›´æ¥æŠŠ temp å¯¹æ•°æ®çš„æ‰€æœ‰æƒè½¬è®©ç»™ vstr_copy2ï¼Œå°†ä¼šæ›´å¥½ã€‚&lt;/p&gt;
&lt;p&gt;å®é™…ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®é™…å†…å®¹ä¿ç•™åœ¨åŸæ¥åœ°æ–¹ï¼Œè€Œä¹‹ä¿®æ”¹è®°å½•ï¼Œè¿™å°±æ˜¯ç§»åŠ¨è¯­ä¹‰çš„æœ¬è´¨ï¼Œå®ƒé¿å…äº†ç§»åŠ¨åŸå§‹æ•°æ®ï¼Œè€Œè½¬ä¸ºä¿®æ”¹è®°å½•ã€‚&lt;/p&gt;
&lt;p&gt;è¦å®ç°ç§»åŠ¨è¯­ä¹‰ï¼Œéœ€è¦é‡‡å–æŸç§æ–¹å¼ï¼Œè®©ç¼–è¯‘å™¨çŸ¥é“ä»€ä¹ˆæ—¶å€™éœ€è¦å¤åˆ¶ã€‚è¿™å°±æ˜¯å³å€¼å¼•ç”¨å‘æŒ¥ä½œç”¨çš„åœ°æ–¹ã€‚å¯å®šä¹‰ä¸¤ä¸ªæ„é€ å‡½æ•°ï¼Œå…¶ä¸­ä¸€ä¸ªæ˜¯å¸¸è§„å¤åˆ¶æ„é€ å‡½æ•°ï¼Œå®ƒä½¿ç”¨ const å·¦å€¼å¼•ç”¨ä½œä¸ºå‚æ•°ï¼Œå¦‚è¯­å¥ #1ã€‚å¦ä¸€ä¸ªæ˜¯ç§»åŠ¨æ„é€ å‡½æ•°ï¼Œå®ƒä½¿ç”¨å³å€¼å¼•ç”¨ä½œä¸ºå‚æ•°ï¼Œè¯¥å¼•ç”¨å…³è”åˆ°å³å€¼å®å‚ï¼Œå¦‚è¯­å¥ #2 ä¸­ allcaps (vstr) çš„è¿”å›å€¼ã€‚ç§»åŠ¨æ„é€ å‡½æ•°å¯èƒ½ä¿®æ”¹å…¶å®å‚ï¼Œè¿™æ„å‘³ç€å³å€¼å¼•ç”¨å‚æ•°ä¸åº”æ˜¯ constã€‚&lt;/p&gt;
&lt;h3 id=&#34;å¦‚ä½•ä½¿ç”¨&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#å¦‚ä½•ä½¿ç”¨&#34;&gt;#&lt;/a&gt; å¦‚ä½•ä½¿ç”¨&lt;/h3&gt;
&lt;p&gt;ç›´æ¥å°†å˜é‡çš„å€¼èµ‹å€¼ä¸ºå‚æ•°çš„å˜é‡å€¼ï¼Œå¦‚æœå˜é‡ä¸ºæŒ‡é’ˆï¼Œä¸ºäº†é˜²æ­¢ double freeï¼Œè¿˜éœ€å°†å‚æ•°çš„æŒ‡é’ˆæ”¹ä¸º nullptrã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Useless(Useless &amp;amp;&amp;amp; f) : n(f.n)
&amp;#123;
	++ct;
	pc = f.pc;
	f.pc = nullptr;
	f.n = 0;
&amp;#125;
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;å¼ºåˆ¶ç§»åŠ¨&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#å¼ºåˆ¶ç§»åŠ¨&#34;&gt;#&lt;/a&gt; å¼ºåˆ¶ç§»åŠ¨&lt;/h3&gt;
&lt;p&gt;ç§»åŠ¨æ„é€ å‡½æ•°å’Œç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦ä½¿ç”¨å³å€¼ï¼Œå¦‚æœè¦è®©å®ƒä»¬ä½¿ç”¨å·¦å€¼ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿä¾‹å¦‚ï¼Œå°†ä¸€ä¸ªå·¦å€¼å˜é‡èµ‹å€¼ç»™ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ç«‹åˆ»ä¸¢å¼ƒè¿™ä¸ªå˜é‡ã€‚æ­¤æ—¶å¯ä»¥ä½¿ç”¨å¤´æ–‡ä»¶ utility ä¸­å£°æ˜çš„å‡½æ•° std::moveã€‚&lt;/p&gt;
</content>
        <category term="C++" />
        <updated>2022-11-14T08:08:33.000Z</updated>
    </entry>
    <entry>
        <id>http://example.com/2022/10/05/STL%E5%AD%A6%E4%B9%A0-01-%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88%E4%B8%8Evector/</id>
        <title>STLå­¦ä¹ -01-æ™ºèƒ½æŒ‡é’ˆä¸vector</title>
        <link rel="alternate" href="http://example.com/2022/10/05/STL%E5%AD%A6%E4%B9%A0-01-%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88%E4%B8%8Evector/"/>
        <content type="html">&lt;h1 id=&#34;c-çš„æ ‡å‡†æ¨¡æ¿åº“&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#c-çš„æ ‡å‡†æ¨¡æ¿åº“&#34;&gt;#&lt;/a&gt; c++ çš„æ ‡å‡†æ¨¡æ¿åº“&lt;/h1&gt;
&lt;p&gt;&lt;span id=&#34;more&#34;&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;%E9%9B%A8%E5%A4%A9-%E5%A5%B3%E5%AD%A9-%E5%95%86%E5%BA%97.jpg&#34; alt=&#34;é›¨å¤© å¥³å­© å•†åº—&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;æ™ºèƒ½æŒ‡é’ˆæ¨¡æ¿ç±»&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#æ™ºèƒ½æŒ‡é’ˆæ¨¡æ¿ç±»&#34;&gt;#&lt;/a&gt; æ™ºèƒ½æŒ‡é’ˆæ¨¡æ¿ç±»&lt;/h2&gt;
&lt;p&gt;æ™ºèƒ½æŒ‡é’ˆæ˜¯ç±»ä¼¼äºæŒ‡é’ˆçš„ç±»å¯¹è±¡ï¼Œæ¯”è¾ƒæ–¹ä¾¿å†…å­˜ç®¡ç†ã€‚ä¼ ç»Ÿçš„æŒ‡é’ˆå¿…é¡»æ—¶æ—¶åˆ»åˆ»è®°å¾— new ä¸ delete çš„é…å¥—ä½¿ç”¨ï¼Œå¾ˆå®¹æ˜“é€ æˆå†…å­˜æ³„æ¼ã€‚è€Œæ™ºèƒ½æŒ‡é’ˆå®é™…ä¸Šç±»ä¼¼äºä¸€ä¸ªç±»ï¼Œæœ‰è‡ªå·±çš„ææ„å‡½æ•°ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨å†ä¸éœ€è¦æ™ºèƒ½æŒ‡é’ˆæ—¶ä¾¿å¯ä»¥è‡ªåŠ¨è°ƒç”¨å…¶ææ„å‡½æ•°é‡Šæ”¾å†…å­˜ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥ç•¥å» delete æ“ä½œã€‚&lt;/p&gt;
&lt;h3 id=&#34;ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆ&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆ&#34;&gt;#&lt;/a&gt; ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆ&lt;/h3&gt;
&lt;p&gt;è¦åˆ›å»ºæ™ºèƒ½æŒ‡é’ˆå¯¹è±¡ï¼Œå¿…é¡»åŒ…å«å¤´æ–‡ä»¶ memory ç„¶åä½¿ç”¨é€šå¸¸çš„æ¨¡æ¿è¯­æ³•æ¥å®ä¾‹åŒ–æ‰€éœ€ç±»å‹çš„æŒ‡é’ˆã€‚&lt;/p&gt;
&lt;p&gt;å£°æ˜ï¼š  &lt;code&gt; template &amp;lt;class X&amp;gt; class auto_ptr&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ egï¼š  &lt;code&gt; auto_ptr&amp;lt;double&amp;gt; pd(new double);&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;â€‹					  &lt;code&gt;auto_ptr&amp;lt;string&amp;gt; ps(new string);&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;æ³¨æ„ï¼š æ™ºèƒ½æŒ‡é’ˆæ¨¡æ¿ä½äºåç§°ç©ºé—´ std ä¸­ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æœ‰å…³æ™ºèƒ½æŒ‡é’ˆçš„æ³¨æ„äº‹é¡¹&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#æœ‰å…³æ™ºèƒ½æŒ‡é’ˆçš„æ³¨æ„äº‹é¡¹&#34;&gt;#&lt;/a&gt; æœ‰å…³æ™ºèƒ½æŒ‡é’ˆçš„æ³¨æ„äº‹é¡¹&lt;/h3&gt;
&lt;p&gt;c++ ç›®å‰æœ‰ä¸‰ç§å¸¸è§æ™ºèƒ½æŒ‡é’ˆï¼šauto_ptr, unique_ptr,shared_ptr&lt;/p&gt;
&lt;p&gt;åœ¨ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆæ—¶ï¼Œå¯èƒ½ä¼šé‡åˆ°é—®é¢˜ï¼Œæ¯”å¦‚å¦‚æœä¸¤ä¸ªæ™ºèƒ½æŒ‡é’ˆæŒ‡å‘åŒä¸€å—å†…å­˜åŒºåŸŸï¼Œåˆ™ç¨‹åºä¼šåˆ é™¤åŒä¸€ä¸ªå¯¹è±¡ä¸¤æ¬¡ï¼Œè¿™æ˜¯ä¼šé€ æˆæå¤§é”™è¯¯çš„ã€‚ä¸ºé¿å…è¿™ç§é—®é¢˜ï¼Œæ–¹æ³•æœ‰å¤šç§ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å»ºç«‹æ‰€æœ‰æƒæ¦‚å¿µï¼Œå¯¹äºç‰¹å®šå¯¹è±¡ï¼Œåªæœ‰ä¸€ä¸ªæ™ºèƒ½æŒ‡é’ˆå¯ä»¥æ‹¥æœ‰ä»–ã€‚ è¿™æ˜¯ç”¨äº auto_ptr å’Œ unique_ptr çš„ç­–ç•¥ï¼Œä½† unique_ptr æ›´ä¸¥æ ¼&lt;/li&gt;
&lt;li&gt;åˆ›å»ºæ™ºèƒ½æ›´é«˜çš„æŒ‡é’ˆï¼Œè·Ÿè¸ªå¼•ç”¨ç‰¹å®šå¯¹è±¡çš„æ™ºèƒ½æŒ‡é’ˆæ•°ï¼Œè¿™ç§°ä¸ºå¼•ç”¨è®¡æ•°ã€‚å½“æœ€åä¸€ä¸ªæŒ‡é’ˆè¿‡æœŸæ—¶ï¼Œæ‰è°ƒç”¨ deleteã€‚è¿™æ˜¯ shared_ptr çš„ç­–ç•¥&lt;/li&gt;
&lt;li&gt;æ‰§è¡Œæ·±æ‹·è´&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;auto_ptr å’Œ unique_ptr çš„åŒºåˆ«ï¼š&lt;/p&gt;
&lt;p&gt;â€‹		ä¸¤ä¸ª auto_ptr æŒ‡å‘åŒä¸€å—å†…å­˜åŒºåŸŸæ—¶ï¼Œå¯ä»¥é€šè¿‡ç¼–è¯‘ï¼Œä½†å¯èƒ½åœ¨è¿è¡Œæ—¶æŠ¥é”™ã€‚ä¸¤ä¸ª unique_ptr æŒ‡å‘åŒä¸€å—å†…å­˜åŒºåŸŸæ—¶ï¼Œä¼šåœ¨ç¼–è¯‘é˜¶æ®µå°±æŠ¥é”™ï¼ˆé™¤éèµ‹å€¼ç»™å…¶ä¸­ä¸€ä¸ª unique_ptr çš„å¦ä¸€ä¸ª unique_ptr æ˜¯ä¸€ä¸ªç”¨å®Œå³æ¯çš„æ™ºèƒ½æŒ‡é’ˆï¼Œå¦‚æŸä¸€å‡½æ•°ä¸­ new å‡ºæ¥çš„ unique_ptr çš„è¿”å›ï¼‰ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ¨¡æ¿ç±»vector&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#æ¨¡æ¿ç±»vector&#34;&gt;#&lt;/a&gt; æ¨¡æ¿ç±» vector&lt;/h2&gt;
&lt;h3 id=&#34;åˆ›å»ºvector&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#åˆ›å»ºvector&#34;&gt;#&lt;/a&gt; åˆ›å»º vector&lt;/h3&gt;
&lt;p&gt;è¦åˆ›å»º vector æ¨¡æ¿å¯¹è±¡ï¼Œ å¯ä½¿ç”¨é€šå¸¸çš„ &amp;lt;type&amp;gt; è¡¨ç¤ºæ³•æ¥æŒ‡å‡ºè¦ä½¿ç”¨çš„ç±»å‹ã€‚å¦å¤–ï¼Œvector æ¨¡æ¿ä½¿ç”¨åŠ¨æ€å†…å­˜åˆ†é…ï¼Œå› æ­¤å¯ä»¥ç”¨åˆå§‹åŒ–å‚æ•°æŒ‡å‡ºéœ€è¦å¤šå°‘å…ƒç´ ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt; vector&amp;lt;int&amp;gt; ratings(5);  // a vector of 5 ints&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&#34;å¯å¯¹vectoræ‰§è¡Œçš„æ“ä½œ&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#å¯å¯¹vectoræ‰§è¡Œçš„æ“ä½œ&#34;&gt;#&lt;/a&gt; å¯å¯¹ vector æ‰§è¡Œçš„æ“ä½œ&lt;/h3&gt;
&lt;p&gt;size ()â€”â€” è¿”å›å®¹å™¨ä¸­å…ƒç´ æ•°ç›®        swap ()â€”â€” äº¤æ¢ä¸¤ä¸ªå®¹å™¨çš„å†…å®¹             begin ()â€”â€” è¿”å›ä¸€ä¸ªæŒ‡å‘å®¹å™¨ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ çš„ &lt;em&gt;&lt;strong&gt;è¿­ä»£å™¨&lt;/strong&gt;&lt;/em&gt;      end () è¿”å›ä¸€ä¸ªè¡¨ç¤ºè¶…è¿‡å®¹å™¨å°¾çš„&lt;em&gt;&lt;strong&gt;è¿­ä»£å™¨&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;ä»€ä¹ˆæ˜¯è¿­ä»£å™¨ï¼Ÿ å®ƒæ˜¯ä¸€ä¸ªå¹¿ä¹‰çš„æŒ‡é’ˆï¼Œå¯ä»¥å¯¹å…¶æ‰§è¡Œç±»ä¼¼æŒ‡é’ˆçš„æ“ä½œï¼Œå¦‚è§£é™¤å¼•ç”¨ *ã€é€’å¢ ++&lt;/p&gt;
&lt;p&gt;STL çš„æ¯ä¸ªå®¹å™¨ç±»éƒ½å®šä¹‰äº†ä¸€ä¸ªåˆé€‚çš„è¿­ä»£å™¨ï¼Œè¯¥è¿­ä»£å™¨çš„ç±»å‹æ˜¯ä¸€ä¸ªåä¸º iterator çš„ typedefï¼Œä½œç”¨åŸŸä¸ºæ•´ä¸ªç±»ã€‚å¦‚è¦ä¸º vector çš„ double ç±»å‹è§„èŒƒå£°æ˜ä¸€ä¸ªè¿­ä»£å™¨ï¼Œå¯ä»¥è¿™æ ·åšï¼š&lt;/p&gt;
&lt;p&gt;â€‹	 &lt;code&gt;vector&amp;lt;double&amp;gt;::iterator pd;//  pd an iterator&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å‡è®¾ scores æ˜¯ä¸€ä¸ª vector&amp;lt;double&amp;gt; å¯¹è±¡ï¼Œå¯ä»¥åˆ©ç”¨å¥½ auto å…³é”®å­—ç®€åŒ–ä¹¦å†™ï¼š&lt;/p&gt;
&lt;p&gt;&lt;code&gt;auto pd = scores.begin()&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;vector è¿˜æ”¯æŒ push_back () (å†…å­˜ä¸å¤Ÿä¼šè‡ªåŠ¨æ‰©å……å®¹å™¨), erase () insert () ç­‰æ–¹æ³•&lt;/p&gt;
&lt;h3 id=&#34;å…¶å®ƒæ“ä½œ&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#å…¶å®ƒæ“ä½œ&#34;&gt;#&lt;/a&gt; å…¶å®ƒæ“ä½œ&lt;/h3&gt;
&lt;p&gt;æœ‰ä¸¤ä¸ªå…·æœ‰ä»£è¡¨æ€§çš„ STL å‡½æ•°ï¼šfor_each () å’Œ sort () ã€‚&lt;/p&gt;
&lt;p&gt;for_each () å‡½æ•°å¯ç”¨äºå¾ˆå¤šå®¹å™¨ç±»ï¼Œå®ƒæ¥å— 3 ä¸ªå‚æ•°ã€‚å‰ä¸¤ä¸ªæ˜¯å®šä¹‰å®¹å™¨ä¸­çš„è¿­ä»£å™¨ï¼Œæœ€åä¸€ä¸ªæ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆã€‚for_each () å‡½æ•°å°†è¢«æŒ‡å‘çš„å‡½æ•°åº”ç”¨äºå®¹å™¨åŒºé—´ä¸­çš„å„ä¸ªå…ƒç´ ï¼Œå¯ä»¥ç”¨ for_each () å‡½æ•°æ¥ä»£æ›¿ for å¾ªç¯ã€‚&lt;/p&gt;
&lt;p&gt;eg:  &lt;code&gt;for_each(books.begin(), books.end(), ShowReview);&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;sort () å‡½æ•°ä¹Ÿè¦æ±‚å‡½æ•°æ”¯æŒéšæœºè®¿é—®ã€‚è¯¥å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå®šä¹‰åŒºé—´çš„è¿­ä»£å™¨å‚æ•°ã€‚å¦‚æœå®¹å™¨ä¸­çš„å…ƒç´ æœ‰å†…ç½®çš„ &amp;lt; è¿ç®—ç¬¦è¿›è¡Œå€¼æ¯”è¾ƒï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚å¦‚æœå®¹å™¨ä¸­çš„å…ƒç´ æ˜¯ç”¨æˆ·å®šä¹‰çš„ç±»å¯¹è±¡ï¼Œåˆ™ç”¨æˆ·éœ€è¦åˆ©ç”¨é‡è½½å®šä¹‰ &amp;lt; è¿ç®—ç¬¦ã€‚&lt;/p&gt;
&lt;p&gt;è¿˜æœ‰ç¬¬äºŒä¸ªç‰ˆæœ¬çš„ sort () å‡½æ•°ï¼Œå®ƒæ¥æ”¶ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆï¼Œä¸ä¸€å®šæ˜¯ç”¨äºæ¯”è¾ƒçš„ operator&amp;lt;()ï¼Œè€Œæ˜¯ä¸€ä¸ªè¿”å›å€¼å¯è½¬æ¢ä¸º bool ç±»å‹çš„å‡½æ•°ï¼Œå®ƒæ¥æ”¶ä¸¤ä¸ªå®¹å™¨ä¸­çš„å…ƒç´ ï¼Œè¿”å›ä¸º false è¡¨ç¤ºä¸¤ä¸ªå‚æ•°çš„é¡ºåºä¸æ­£ç¡®ã€‚&lt;/p&gt;
</content>
        <category term="STL C++" />
        <updated>2022-10-05T11:54:58.000Z</updated>
    </entry>
</feed>
