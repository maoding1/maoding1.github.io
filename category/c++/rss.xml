<?xml version="1.0"?>
<rss version="2.0">
    <channel>
        <title>MikeMao&#39;s blog â€¢ Posts by &#34;c++&#34; category</title>
        <link>http://example.com</link>
        <description>a student of NJU &amp;&amp; record learning experience</description>
        <language>zh-CN</language>
        <pubDate>Sat, 31 Aug 2024 20:44:57 +0800</pubDate>
        <lastBuildDate>Sat, 31 Aug 2024 20:44:57 +0800</lastBuildDate>
        <category>C++</category>
        <category>C++ è¯»ä¹¦ç¬”è®°</category>
        <category>git</category>
        <category>Maven</category>
        <category>Linux</category>
        <category>STL C++</category>
        <category>goè¯­è¨€</category>
        <category>python çˆ¬è™«</category>
        <category>python çˆ¬è™« è®¡ç®—æœºç½‘ç»œ</category>
        <category>docker</category>
        <category>æ•°ç†é€»è¾‘</category>
        <category>python</category>
        <category>çˆ¬è™«</category>
        <category>åˆ†å¸ƒå¼</category>
        <category>TVM æ·±åº¦å­¦ä¹  æœºå™¨å­¦ä¹  ç¼–è¯‘</category>
        <category>ç¼–è¯‘åŸç†</category>
        <item>
            <guid isPermalink="true">http://example.com/2024/08/31/Efective-Modern-C-%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/</guid>
            <title>Efective Modern C++è¯»ä¹¦ç¬”è®°</title>
            <link>http://example.com/2024/08/31/Efective-Modern-C-%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/</link>
            <category>C++ è¯»ä¹¦ç¬”è®°</category>
            <pubDate>Sat, 31 Aug 2024 20:44:57 +0800</pubDate>
            <description><![CDATA[ &lt;p&gt;æœ¬ä¹¦ä¸»è¦è®¾è®¡ C++11/14 çš„æ–°è¯­è¨€ç‰¹æ€§ï¼ŒModern C++ å¸¦æ¥çš„å„ç§æ”¹å˜æ˜¯äº¡ç¾Šè¡¥ç‰¢ï¼Œè¿˜æ˜¯è„±èƒæ¢éª¨ï¼Œé€šè¿‡é˜…è¯»æœ¬ä¹¦å¯èƒ½ä¼šå¾—åˆ°ç­”æ¡ˆã€‚&lt;/p&gt;
&lt;p&gt;çœ‹ä¹¦æ˜¯ä¸€ä»¶ä¹è¶£ï¼Œå†™è¯»ä¹¦ç¬”è®°å¯ä¸æ˜¯ğŸ˜¢ã€‚ä½†æ˜¯å°±é˜…è¯»ã€ŠEfective C++ã€‹çš„ç»å†è€Œè¨€ï¼Œå‡æ…¢é˜…è¯»é€Ÿåº¦è€Œç•™ä¸‹è®°å½•æ˜¯å¾ˆé‡è¦çš„ï¼Œä¸çŸ¥æœ¬ç¯‡ä½•æ—¶æ‰èƒ½å®Œæˆã€‚&lt;/p&gt;
&lt;p&gt;&lt;span id=&#34;more&#34;&gt;&lt;/span&gt;&lt;/p&gt;
&lt;h2 id=&#34;chapter-1-ç±»å‹æ¨å¯¼&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#chapter-1-ç±»å‹æ¨å¯¼&#34;&gt;#&lt;/a&gt; chapter 1 ç±»å‹æ¨å¯¼&lt;/h2&gt;
&lt;h3 id=&#34;item1-ç†è§£æ¨¡æ¿ç±»å‹æ¨å¯¼&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item1-ç†è§£æ¨¡æ¿ç±»å‹æ¨å¯¼&#34;&gt;#&lt;/a&gt; item1 ç†è§£æ¨¡æ¿ç±»å‹æ¨å¯¼&lt;/h3&gt;
&lt;p&gt;æ¨¡æ¿ç±»å‹æ¨å¯¼ï¼Œæ˜¯ C++ ä¸€ä¸ªå¹¿æ³›åº”ç”¨çš„ç‰¹æ€§ï¼Œå¹¶ä¸”å¯ä»¥è¢«ç§°ä¸ºä¸€ä¸ªè‰¯å¥½çš„è®¾è®¡ï¼Œå› ä¸ºå¾ˆå¤šç¨‹åºå‘˜éƒ½åœ¨å®Œå…¨ä¸äº†è§£å…¶åº•å±‚è¿è¡Œæœºåˆ¶çš„æƒ…å†µä¸‹ï¼Œè·å¾—äº†æ»¡æ„çš„ç»“æœã€‚C++ 11 å¸¦æ¥äº† &lt;code&gt;auto&lt;/code&gt; ï¼Œæ¨¡æ¿ç±»å‹æ¨å¯¼ä¹Ÿæ˜¯å…¶è¿è¡Œçš„åŸºç¡€ï¼Œä¸€ä¸ªåæ¶ˆæ¯æ˜¯æœ‰äº›æ—¶å€™å®ƒçš„åº”ç”¨å¹¶ä¸ç¬¦åˆç›´è§‰ï¼Œå› æ­¤äº†è§£æ¨¡æ¿ç±»å‹æ¨å¯¼çš„ä¸€äº›ç»†èŠ‚å°±æœ‰äº›é‡è¦äº†ã€‚&lt;/p&gt;
&lt;p&gt;è€ƒè™‘å¦‚ä¸‹ä¸€ä¸ªå‡½æ•°æ¨¡æ¿ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c++&#34;&gt;template&amp;lt;typename T&amp;gt;
void f(ParamType param)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™é‡Œçš„ ParamType æ˜¯ä¸ T æœ‰å…³çš„ä¸€ä¸ªç±»å‹ï¼Œæ¯”å¦‚ &lt;code&gt;const T&lt;/code&gt;  , &lt;code&gt;T &amp;amp;&lt;/code&gt;  ç­‰&lt;/p&gt;
&lt;p&gt;å¯¹äºæŸä¸€æ¬¡è°ƒç”¨ &lt;code&gt;f(expr)&lt;/code&gt;  , T çš„æ¨å¯¼ç»“æœä¼šæ˜¯ä»€ä¹ˆå‘¢ï¼Œç­”æ¡ˆæ˜¯ï¼Œ&lt;strong&gt;æ—¢ä¸ expr çš„ç±»å‹æœ‰å…³ä¹Ÿå’Œ ParamType æœ‰å…³&lt;/strong&gt;ï¼Œå…·ä½“è¦åˆ†ä¸ºä¸‰ç§æƒ…å†µè®¨è®ºã€‚&lt;/p&gt;
&lt;h4 id=&#34;æƒ…å†µ1-paramtypeæ˜¯ä¸€ä¸ªæŒ‡é’ˆæˆ–å¼•ç”¨ä½†ä¸æ˜¯ä¸€ä¸ªä¸‡èƒ½å¼•ç”¨&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#æƒ…å†µ1-paramtypeæ˜¯ä¸€ä¸ªæŒ‡é’ˆæˆ–å¼•ç”¨ä½†ä¸æ˜¯ä¸€ä¸ªä¸‡èƒ½å¼•ç”¨&#34;&gt;#&lt;/a&gt; æƒ…å†µ 1ï¼š ParamType æ˜¯ä¸€ä¸ªæŒ‡é’ˆæˆ–å¼•ç”¨ï¼Œä½†ä¸æ˜¯ä¸€ä¸ªä¸‡èƒ½å¼•ç”¨&lt;/h4&gt;
&lt;p&gt;è¿™ç§æƒ…å†µä¸‹ï¼Œç±»å‹æ¨å¯¼ä¼šè¿™æ ·è¿ä½œï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;è‹¥ expr å…·æœ‰å¼•ç”¨ç±»å‹ï¼Œå…ˆå°†å¼•ç”¨éƒ¨åˆ†å¿½ç•¥&lt;/li&gt;
&lt;li&gt;ç„¶åï¼Œå¯¹ &lt;code&gt;expr&lt;/code&gt;  çš„ç±»å‹å’Œ &lt;code&gt;ParamType&lt;/code&gt;  çš„ç±»å‹æ‰§è¡Œæ¨¡å¼åŒ¹é…ï¼Œæ¥å†³å®š T çš„ç±»å‹ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;for example:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c++&#34;&gt;// å¯¹ä¸å¦‚ä¸‹æ¨¡å¼
template&amp;lt;typename T&amp;gt;
void f(T&amp;amp; param) // param æ˜¯ä¸€ä¸ªå¼•ç”¨

int x = 27;
const int cx = x;
const int&amp;amp; rx = x;

f(x);                           //Tæ˜¯intï¼Œparamçš„ç±»å‹æ˜¯int&amp;amp;
f(cx);                          //Tæ˜¯const intï¼Œparamçš„ç±»å‹æ˜¯const int&amp;amp;
f(rx);                          //Tæ˜¯const intï¼Œparamçš„ç±»å‹æ˜¯const int&amp;amp;

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™äº›ä¾‹å­åªå±•ç¤ºäº†å·¦å€¼å¼•ç”¨ï¼Œä½†æ˜¯ç±»å‹æ¨å¯¼ä¼šå¦‚å·¦å€¼å¼•ç”¨ä¸€æ ·å¯¹å¾…å³å€¼å¼•ç”¨ã€‚&lt;/p&gt;
&lt;h4 id=&#34;æƒ…å†µ2-paramtype-æ˜¯ä¸€ä¸ªä¸‡èƒ½å¼•ç”¨&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#æƒ…å†µ2-paramtype-æ˜¯ä¸€ä¸ªä¸‡èƒ½å¼•ç”¨&#34;&gt;#&lt;/a&gt; æƒ…å†µ 2ï¼š ParamType æ˜¯ä¸€ä¸ªä¸‡èƒ½å¼•ç”¨&lt;/h4&gt;
&lt;p&gt;å¯¹äºä½¿ç”¨ä¸‡èƒ½å¼•ç”¨å½¢å‚çš„æ¨¡æ¿è€Œè¨€ï¼Œè§„åˆ™å°±æ²¡é‚£ä¹ˆæ˜¾æ˜äº†ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å¦‚æœ expr æ˜¯å·¦å€¼ï¼Œ &lt;code&gt;T&lt;/code&gt;  å’Œ ParamType éƒ½ä¼šè¢«æ¨å¯¼ä¸ºå·¦å€¼å¼•ç”¨ã€‚è¿™ä¸ªç»“æœåˆä¸¤ç‚¹æ¯”è¾ƒå¥‡æ€ªï¼šé¦–å…ˆï¼Œè¿™æ˜¯åœ¨æ¨¡æ¿ç±»å‹æ¨å¯¼ä¸­ï¼ŒT è¢«æ¨å¯¼ä¸ºå¼•ç”¨ç±»å‹çš„å”¯ä¸€æƒ…å½¢ã€‚å…¶æ¬¡ï¼Œå°½ç®¡åœ¨å£°æ˜æ—¶ä½¿ç”¨çš„æ˜¯å³å€¼å¼•ç”¨è¯­æ³•ï¼Œå®ƒçš„ç±»å‹æ¨å¯¼ç»“æœå´æ˜¯å·¦å€¼å¼•ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœ expr æ˜¯ä¸€ä¸ªå³å€¼ï¼Œåˆ™åº”ç”¨æƒ…å†µ 1 ä¸­çš„è§„åˆ™&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c++&#34;&gt;template&amp;lt;typename T&amp;gt;
void f(T&amp;amp;&amp;amp; param);              //paramç°åœ¨æ˜¯ä¸€ä¸ªé€šç”¨å¼•ç”¨ç±»å‹
        
int x=27;                       //å¦‚ä¹‹å‰ä¸€æ ·
const int cx=x;                 //å¦‚ä¹‹å‰ä¸€æ ·
const int &amp;amp; rx=cx;              //å¦‚ä¹‹å‰ä¸€æ ·

f(x);                           //xæ˜¯å·¦å€¼ï¼Œæ‰€ä»¥Tæ˜¯int&amp;amp;ï¼Œ
                                //paramç±»å‹ä¹Ÿæ˜¯int&amp;amp;

f(cx);                          //cxæ˜¯å·¦å€¼ï¼Œæ‰€ä»¥Tæ˜¯const int&amp;amp;ï¼Œ
                                //paramç±»å‹ä¹Ÿæ˜¯const int&amp;amp;

f(rx);                          //rxæ˜¯å·¦å€¼ï¼Œæ‰€ä»¥Tæ˜¯const int&amp;amp;ï¼Œ
                                //paramç±»å‹ä¹Ÿæ˜¯const int&amp;amp;

f(27);                          //27æ˜¯å³å€¼ï¼Œæ‰€ä»¥Tæ˜¯intï¼Œ
                                //paramç±»å‹å°±æ˜¯int&amp;amp;&amp;amp;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;item24 è¯¦ç»†è§£é‡Šäº†ä¸ºä»€ä¹ˆè¿™äº›ä¾‹å­æ˜¯åƒè¿™æ ·å‘ç”Ÿçš„ã€‚è¿™é‡Œå…³é”®åœ¨äºé€šç”¨å¼•ç”¨çš„ç±»å‹æ¨å¯¼è§„åˆ™æ˜¯ä¸åŒäºæ™®é€šçš„å·¦å€¼æˆ–è€…å³å€¼å¼•ç”¨çš„ã€‚å°¤å…¶æ˜¯ï¼Œå½“é€šç”¨å¼•ç”¨è¢«ä½¿ç”¨æ—¶ï¼Œç±»å‹æ¨å¯¼ä¼šåŒºåˆ†å·¦å€¼å®å‚å’Œå³å€¼å®å‚ï¼Œä½†æ˜¯å¯¹éé€šç”¨å¼•ç”¨æ—¶ä¸ä¼šåŒºåˆ†ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æƒ…å†µ3-paramtypeæ—¢éæŒ‡é’ˆä¹Ÿéå¼•ç”¨&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#æƒ…å†µ3-paramtypeæ—¢éæŒ‡é’ˆä¹Ÿéå¼•ç”¨&#34;&gt;#&lt;/a&gt; æƒ…å†µ 3ï¼š ParamType æ—¢éæŒ‡é’ˆï¼Œä¹Ÿéå¼•ç”¨&lt;/h3&gt;
&lt;p&gt;å½“ &lt;code&gt;ParamType&lt;/code&gt;  æ—¢éå¼•ç”¨ä¹ŸéæŒ‡é’ˆæ—¶ï¼Œæˆ‘ä»¬é¢å¯¹çš„å°±æ˜¯æ‰€è°“çš„æŒ‰å€¼ä¼ é€’äº†ï¼Œè¿™æ„å‘³ç€æ— è®ºä¼ å…¥çš„æ˜¯ä»€ä¹ˆï¼Œparam éƒ½ä¼šæ˜¯å®ƒçš„ä¸€ä¸ªå‰¯æœ¬ï¼Œå³ä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡ã€‚å…·ä½“æ¥è¯´ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å’Œä¹‹å‰ä¸€æ ·ï¼Œå¦‚æœ &lt;code&gt;expr&lt;/code&gt;  çš„ç±»å‹æ˜¯ä¸€ä¸ªå¼•ç”¨ï¼Œå¿½ç•¥è¿™ä¸ªå¼•ç”¨éƒ¨åˆ†&lt;/li&gt;
&lt;li&gt;å¦‚æœå¿½ç•¥ &lt;code&gt;expr&lt;/code&gt;  çš„å¼•ç”¨æ€§ä¹‹åï¼Œå¦‚æœ &lt;code&gt;expr&lt;/code&gt;  å…·æœ‰ &lt;code&gt;const&lt;/code&gt;  æˆ– &lt;code&gt;volatile&lt;/code&gt;  å±æ€§ï¼Œéƒ½ä¼šè¢«å¿½ç•¥ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c++&#34;&gt;int x=27;                       //å¦‚ä¹‹å‰ä¸€æ ·
const int cx=x;                 //å¦‚ä¹‹å‰ä¸€æ ·
const int &amp;amp; rx=cx;              //å¦‚ä¹‹å‰ä¸€æ ·

f(x);                           //Tå’Œparamçš„ç±»å‹éƒ½æ˜¯int
f(cx);                          //Tå’Œparamçš„ç±»å‹éƒ½æ˜¯int
f(rx);                          //Tå’Œparamçš„ç±»å‹éƒ½æ˜¯int

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™æ˜¯å› ä¸ºæ ¹æ®æŒ‰å€¼ä¼ é€’çš„æ€æƒ³ï¼Œ &lt;code&gt;expr&lt;/code&gt;  æ˜¯ const æˆ–è€… volatile ä¸æ„ä¸ºç€å®ƒçš„æ‹·è´ä¹Ÿä¸èƒ½è¢«ä¿®æ”¹ã€‚&lt;/p&gt;
&lt;p&gt;è®¤è¯†åˆ°åªæœ‰åœ¨ä¼ å€¼ç»™å½¢å‚æ—¶æ‰ä¼šå¿½ç•¥ &lt;code&gt;const&lt;/code&gt; ï¼ˆå’Œ &lt;code&gt;volatile&lt;/code&gt; ï¼‰è¿™ä¸€ç‚¹å¾ˆé‡è¦ï¼Œæ­£å¦‚æˆ‘ä»¬çœ‹åˆ°çš„ï¼Œå¯¹äº reference-to- &lt;code&gt;const&lt;/code&gt;  å’Œ pointer-to- &lt;code&gt;const&lt;/code&gt;  å½¢å‚æ¥è¯´ï¼Œ &lt;code&gt;expr&lt;/code&gt;  çš„å¸¸é‡æ€§åœ¨æ¨å¯¼æ—¶ä¼šè¢«ä¿ç•™ã€‚ä½†æ˜¯è€ƒè™‘è¿™æ ·çš„æƒ…å†µï¼Œ &lt;code&gt;expr&lt;/code&gt;  æ˜¯ä¸€ä¸ª &lt;code&gt;const&lt;/code&gt;  æŒ‡é’ˆï¼ŒæŒ‡å‘ &lt;code&gt;const&lt;/code&gt;  å¯¹è±¡ï¼Œ &lt;code&gt;expr&lt;/code&gt;  é€šè¿‡ä¼ å€¼ä¼ é€’ç»™ &lt;code&gt;param&lt;/code&gt; ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;T param&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;                &lt;span class=&#34;token comment&#34;&gt;// ä»ç„¶ä»¥ä¼ å€¼çš„æ–¹å¼å¤„ç† param&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; ptr &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;         &lt;span class=&#34;token comment&#34;&gt;//ptr æ˜¯ä¸€ä¸ªå¸¸é‡æŒ‡é’ˆï¼ŒæŒ‡å‘å¸¸é‡å¯¹è±¡ &lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token string&#34;&gt;&#34;Fun with pointers&#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;ptr&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;                         &lt;span class=&#34;token comment&#34;&gt;// ä¼ é€’ const char * const ç±»å‹çš„å®å‚&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;åœ¨è¿™é‡Œï¼Œè§£å¼•ç”¨ç¬¦å·ï¼ˆ*ï¼‰çš„å³è¾¹çš„ &lt;code&gt;const&lt;/code&gt;  è¡¨ç¤º &lt;code&gt;ptr&lt;/code&gt;  æœ¬èº«æ˜¯ä¸€ä¸ª &lt;code&gt;const&lt;/code&gt; ï¼š &lt;code&gt;ptr&lt;/code&gt;  ä¸èƒ½è¢«ä¿®æ”¹ä¸ºæŒ‡å‘å…¶å®ƒåœ°å€ï¼Œä¹Ÿä¸èƒ½è¢«è®¾ç½®ä¸º nullï¼ˆè§£å¼•ç”¨ç¬¦å·å·¦è¾¹çš„ &lt;code&gt;const&lt;/code&gt;  è¡¨ç¤º &lt;code&gt;ptr&lt;/code&gt;  æŒ‡å‘ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²æ˜¯ &lt;code&gt;const&lt;/code&gt; ï¼Œå› æ­¤å­—ç¬¦ä¸²ä¸èƒ½è¢«ä¿®æ”¹ï¼‰ã€‚å½“ &lt;code&gt;ptr&lt;/code&gt;  ä½œä¸ºå®å‚ä¼ ç»™ &lt;code&gt;f&lt;/code&gt; ï¼Œç»„æˆè¿™ä¸ªæŒ‡é’ˆçš„æ¯ä¸€æ¯”ç‰¹éƒ½è¢«æ‹·è´è¿› &lt;code&gt;param&lt;/code&gt; ã€‚åƒè¿™ç§æƒ…å†µï¼Œ &lt;code&gt;ptr&lt;/code&gt; &lt;strong&gt; è‡ªèº«çš„å€¼ä¼šè¢«ä¼ ç»™å½¢å‚&lt;/strong&gt;ï¼Œæ ¹æ®ç±»å‹æ¨å¯¼çš„ç¬¬ä¸‰æ¡è§„åˆ™ï¼Œ &lt;code&gt;ptr&lt;/code&gt;  è‡ªèº«çš„å¸¸é‡æ€§å°†ä¼šè¢«çœç•¥ï¼Œæ‰€ä»¥ &lt;code&gt;param&lt;/code&gt;  æ˜¯ &lt;code&gt;const char*&lt;/code&gt; ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªå¯å˜æŒ‡é’ˆæŒ‡å‘ &lt;code&gt;const&lt;/code&gt;  å­—ç¬¦ä¸²ã€‚åœ¨ç±»å‹æ¨å¯¼ä¸­ï¼Œè¿™ä¸ªæŒ‡é’ˆæŒ‡å‘çš„æ•°æ®çš„å¸¸é‡æ€§å°†ä¼šè¢«ä¿ç•™ï¼Œä½†æ˜¯å½“æ‹·è´ &lt;code&gt;ptr&lt;/code&gt;  æ¥åˆ›é€ ä¸€ä¸ªæ–°æŒ‡é’ˆ &lt;code&gt;param&lt;/code&gt;  æ—¶ï¼Œ &lt;code&gt;ptr&lt;/code&gt;  è‡ªèº«çš„å¸¸é‡æ€§å°†ä¼šè¢«å¿½ç•¥ã€‚&lt;/p&gt;
&lt;h4 id=&#34;æ•°ç»„å®å‚ä¸å‡½æ•°å®å‚&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#æ•°ç»„å®å‚ä¸å‡½æ•°å®å‚&#34;&gt;#&lt;/a&gt; æ•°ç»„å®å‚ä¸å‡½æ•°å®å‚&lt;/h4&gt;
&lt;p&gt;åœ¨æ¨¡æ¿ç±»å‹æ¨å¯¼è¿‡ç¨‹ä¸­ï¼Œæ•°ç»„æˆ–å‡½æ•°ç±»å‹çš„å®å‚ä¼šé€€åŒ–æˆå¯¹åº”çš„æŒ‡é’ˆï¼Œé™¤éå®ƒä»¬è¢«ç”¨æ¥åˆå§‹åŒ–å¼•ç”¨&lt;/p&gt;
&lt;h3 id=&#34;item2-ç†è§£autoç±»å‹æ¨å¯¼&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item2-ç†è§£autoç±»å‹æ¨å¯¼&#34;&gt;#&lt;/a&gt; item2 ç†è§£ auto ç±»å‹æ¨å¯¼&lt;/h3&gt;
&lt;p&gt;ç»§ç»­ä½¿ç”¨ä¸Šä¸€èŠ‚çš„è¿™ä¸ªä¾‹å­æ¥è§£é‡Š auto ç±»å‹æ¨å¯¼æ˜¯å¦‚ä½•å’Œæ¨¡æ¿ç±»å‹æ¨å¯¼è”ç³»åœ¨ä¸€èµ·çš„ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;ParmaType param&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;expr&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;                        &lt;span class=&#34;token comment&#34;&gt;// ä½¿ç”¨ä¸€äº›è¡¨è¾¾å¼è°ƒç”¨ f&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;å½“å˜é‡é‡‡ç”¨ auto æ¥å£°æ˜æ—¶ï¼Œauto æ‰®æ¼”äº†æ¨¡æ¿ä¸­ T çš„è§’è‰²ï¼Œå˜é‡çš„ç±»å‹é¥°è¯æ‰®æ¼”äº† ParamType çš„è§’è‰²ã€‚&lt;/p&gt;
&lt;p&gt;æ¯”å¦‚è¯´ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c++&#34;&gt;auto x = 27;	//ç±»å‹é¥°è¯æ˜¯auto
const auto cx = x;	//ç±»å‹é¥°è¯æ˜¯const auto
const auto&amp;amp; rx = x;	//ç±»å‹é¥°è¯æ˜¯const auto &amp;amp;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;åœ¨è¿™é‡Œä¾‹å­ä¸­è¦æ¨å¯¼ xï¼Œcx å’Œ rx çš„ç±»å‹ï¼Œç¼–è¯‘å™¨çš„è¡Œä¸ºçœ‹èµ·æ¥å°±åƒæ˜¯è®¤ä¸ºè¿™é‡Œæ¯ä¸ªå£°æ˜éƒ½æœ‰ä¸€ä¸ªæ¨¡æ¿ï¼Œç„¶åä½¿ç”¨åˆé€‚çš„åˆå§‹åŒ–è¡¨è¾¾å¼è¿›è¡Œè°ƒç”¨ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;            &lt;span class=&#34;token comment&#34;&gt;// æ¦‚å¿µåŒ–çš„æ¨¡æ¿ç”¨æ¥æ¨å¯¼ x çš„ç±»å‹&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;func_for_x&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;T param&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;func_for_x&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token number&#34;&gt;27&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;                 &lt;span class=&#34;token comment&#34;&gt;// æ¦‚å¿µåŒ–è°ƒç”¨ï¼š&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;                                &lt;span class=&#34;token comment&#34;&gt;//param çš„æ¨å¯¼ç±»å‹æ˜¯ x çš„ç±»å‹&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;            &lt;span class=&#34;token comment&#34;&gt;// æ¦‚å¿µåŒ–çš„æ¨¡æ¿ç”¨æ¥æ¨å¯¼ cx çš„ç±»å‹&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;func_for_cx&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; T param&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;func_for_cx&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;x&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;                 &lt;span class=&#34;token comment&#34;&gt;// æ¦‚å¿µåŒ–è°ƒç”¨ï¼š&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;                                &lt;span class=&#34;token comment&#34;&gt;//param çš„æ¨å¯¼ç±»å‹æ˜¯ cx çš„ç±»å‹&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;            &lt;span class=&#34;token comment&#34;&gt;// æ¦‚å¿µåŒ–çš„æ¨¡æ¿ç”¨æ¥æ¨å¯¼ rx çš„ç±»å‹&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;func_for_rx&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; T &lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; param&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;15&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;16&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;func_for_rx&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;x&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;                 &lt;span class=&#34;token comment&#34;&gt;// æ¦‚å¿µåŒ–è°ƒç”¨ï¼š&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;17&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;                                &lt;span class=&#34;token comment&#34;&gt;//param çš„æ¨å¯¼ç±»å‹æ˜¯ rx çš„ç±»å‹&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;é™¤äº†ä¸€ä¸ªä¾‹å¤–ï¼Œå°±æ˜¯ä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨æ—¶ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c++&#34;&gt;auto x = &amp;#123; 11, 23, 9 &amp;#125;;         //xçš„ç±»å‹æ˜¯std::initializer_list&amp;lt;int&amp;gt;

template&amp;lt;typename T&amp;gt;            //å¸¦æœ‰ä¸xçš„å£°æ˜ç­‰ä»·çš„
void f(T param);                //å½¢å‚å£°æ˜çš„æ¨¡æ¿

f(&amp;#123; 11, 23, 9 &amp;#125;);               //é”™è¯¯ï¼ä¸èƒ½æ¨å¯¼å‡ºT

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;C++\14 ä¸­å…è®¸ &lt;code&gt;auto&lt;/code&gt;  ç”¨æˆ·å‡½æ•°è¿”å›å€¼ï¼Œä¹Ÿå…è®¸ lambda å‡½æ•°çš„å½¢å‚å£°æ˜ä¸­ä½¿ç”¨ &lt;code&gt;auto&lt;/code&gt; , ä½†åœ¨è¿™äº›æƒ…å†µä¸‹ &lt;code&gt;auto&lt;/code&gt;  å®é™…ä¸Šä½¿ç”¨æ¨¡æ¿ç±»å‹æ¨å¯¼é‚£ä¸€å¥—è§„åˆ™åœ¨å·¥ä½œï¼Œå› æ­¤ä¸‹é¢çš„ä»£ç ä¸ä¼šé€šè¿‡ç¼–è¯‘ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c++&#34;&gt;auto createInitList()
&amp;#123;
    return &amp;#123; 1, 2, 3 &amp;#125;;         //é”™è¯¯ï¼ä¸èƒ½æ¨å¯¼&amp;#123; 1, 2, 3 &amp;#125;çš„ç±»å‹
&amp;#125;

std::vector&amp;lt;int&amp;gt; v;
â€¦
auto resetV = 
    [&amp;amp;v](const auto&amp;amp; newValue)&amp;#123; v = newValue; &amp;#125;;        //C++14
â€¦
resetV(&amp;#123; 1, 2, 3 &amp;#125;);            //é”™è¯¯ï¼ä¸èƒ½æ¨å¯¼&amp;#123; 1, 2, 3 &amp;#125;çš„ç±»å‹

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æ€»ç»“ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œauto ç±»å‹æ¨å¯¼å’Œæ¨¡æ¿ç±»å‹æ¨å¯¼æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼Œä½†æ˜¯ auto ç±»å‹æ¨å¯¼ä¼šå‡å®šç”¨å¤§æ‹¬å·æ‰©èµ·çš„åˆå§‹åŒ–è¡¨è¾¾å¼ä»£è¡¨ä¸€ä¸ª std::initializer_list, ä½†æ¨¡æ¿ç±»å‹æ¨å¯¼ä¸ä¼šã€‚&lt;/li&gt;
&lt;li&gt;åœ¨å‡½æ•°è¿”å›å€¼æˆ– lambda çš„å½¢å‚ä¸­ä½¿ç”¨ autoï¼Œæ„æ€æ˜¯ä½¿ç”¨æ¨¡æ¿ç±»å‹æ¨å¯¼è§„åˆ™è€Œä¸æ˜¯ auto ç±»å‹æ¨å¯¼è§„åˆ™ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;item3-ç†è§£decltype&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item3-ç†è§£decltype&#34;&gt;#&lt;/a&gt; item3 ç†è§£ decltype&lt;/h3&gt;
&lt;p&gt;æ‰“äº†ä¸€å¤§æ®µä½†æ˜¯å¿˜ä¿å­˜äº†:ğŸ˜¢, ä¸è¿‡ç›¸ä¿¡ä½œè€…çš„æ€»ç»“å·²ç»å¤Ÿç”¨äº†ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æ€»ç»“ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œdecltype ä¼šå¾—å‡ºå˜é‡æˆ–è¡¨è¾¾å¼çš„ç±»å‹è€Œä¸ä½œä»»ä½•ä¿®æ”¹ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹äºç±»å‹ä¸º T çš„å·¦å€¼è¡¨è¾¾å¼ï¼Œé™¤éæ”¹è¡¨è¾¾å¼ä»…æœ‰ä¸€ä¸ªåå­—ï¼Œdecltype æ€»æ˜¯å¾—å‡ºç±»å‹ T&amp;amp;&lt;/li&gt;
&lt;li&gt;C++14 æ”¯æŒ decltype (auto), å’Œ auto ä¸€æ ·ï¼Œå®ƒä¼šä»å…¶åˆå§‹åŒ–è¡¨è¾¾å¼å‡ºå‘æ¥æ¨å¯¼ç±»å‹ï¼Œä½†æ˜¯å®ƒçš„ç±»å‹æ¨å¯¼ä½¿ç”¨çš„æ˜¯ decltype çš„è§„åˆ™ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;item4-æŒæ¡æŸ¥çœ‹ç±»å‹æ¨å¯¼ç»“æœçš„æ–¹æ³•&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item4-æŒæ¡æŸ¥çœ‹ç±»å‹æ¨å¯¼ç»“æœçš„æ–¹æ³•&#34;&gt;#&lt;/a&gt; item4 æŒæ¡æŸ¥çœ‹ç±»å‹æ¨å¯¼ç»“æœçš„æ–¹æ³•&lt;/h3&gt;
&lt;p&gt;æ¯”è¾ƒæ¨èçš„æ–¹æ³•ï¼šä½¿ç”¨ IDE ç¼–è¾‘å™¨ç›´æ¥æŸ¥çœ‹ï¼Œæˆ–è€…ä½¿ç”¨ç¼–è¯‘å™¨è¯Šæ–­ä¿¡æ¯ï¼Œ è€Œä½œè€…æåˆ°çš„ç¬¬ä¸‰ç§æ–¹æ³•ï¼Œä½¿ç”¨è¿è¡Œæ—¶è¾“å‡ºæ–¹æ³•çš„æ­£ç¡®æ€§å’Œæ˜“è¯»æ€§æ–¹é¢éƒ½æœ‰ç¼ºé™·ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºä½¿ç”¨ç¼–è¯‘å™¨è¯Šæ–­ä¿¡æ¯è¿™ç§æ–¹æ³•ï¼Œä¸€ä¸ªå¾ˆå¥½çš„æ–¹æ³•æ˜¯ä½¿ç”¨ä¸€ä¸ªæ²¡æœ‰å®šä¹‰çš„ç±»æ¨¡æ¿ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt; &lt;span class=&#34;token comment&#34;&gt;// åªå£°æ˜ TD (Type Displayer) è€Œä¸å®šä¹‰&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;TD&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;åªè¦è¯•å›¾å…·ç°è¯¥æ¨¡æ¿ï¼Œå°±ä¼šè¯±å‘ä¸€ä¸ªé”™è¯¯ä¿¡æ¯ï¼ŒåŸå› æ˜¯æ‰¾ä¸åˆ°å…·ç°æ¨¡æ¿æ‰€éœ€è¦çš„å®šä¹‰ï¼Œå¦‚æœæƒ³æŸ¥çœ‹ x å’Œ y çš„ç±»å‹ï¼Œç”¨ x å’Œ y çš„ç±»å‹å»å…·ç° TD å³å¯ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;TD&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;decltype&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;x&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt; xType&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;TD&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;decltype&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;y&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt; yType&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;è¿™æ ·ï¼Œç¼–è¯‘å™¨å°±å¯èƒ½ä¼šç»™å‡ºè¿™æ ·çš„ä¿¡æ¯ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;error&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt; aggregate &lt;span class=&#34;token char&#34;&gt;&#39;TD&amp;lt;int&gt; xType&#39;&lt;/span&gt; has incomplete type &lt;span class=&#34;token operator&#34;&gt;and&lt;/span&gt; &lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        cannot be defined&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;error&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt; aggregate &lt;span class=&#34;token char&#34;&gt;&#39;TD&amp;lt;const int *&gt; yType&#39;&lt;/span&gt; has incomplete type &lt;span class=&#34;token operator&#34;&gt;and&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        cannot be defined&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;&lt;strong&gt;å½“ç„¶ï¼Œå³ä½¿æœ‰ä¸€äº›å·¥å…·ï¼Œç†è§£ C++ çš„ç±»å‹æ¨å¯¼è§„åˆ™ä¹Ÿæ˜¯å¾ˆå¿…è¦çš„ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&#34;chapter2-auto&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#chapter2-auto&#34;&gt;#&lt;/a&gt; chapter2 auto&lt;/h2&gt;
&lt;p&gt;ä»æ¦‚å¿µä¸Šæ¥è¯´ï¼Œ &lt;code&gt;auto&lt;/code&gt;  è¦å¤šç®€å•æœ‰å¤šç®€å•ï¼Œä½†æ˜¯ç»†ç©¶èµ·æ¥é‡Œé¢å´å¤§æœ‰æ–‡ç« ã€‚ä½¿ç”¨ &lt;code&gt;auto&lt;/code&gt;  å¯ä»¥å°‘æ‰“ä¸€äº›å­—ï¼Œæ²¡é”™ï¼Œä½†å¥½å¤„ä¸æ­¢è¿™äº›ï¼šå®ƒè¿˜èƒ½é˜»æ­¢é‚£äº›ç”±äºæ‰‹åŠ¨æŒ‡å®šç±»å‹å¸¦æ¥çš„æ½œåœ¨é”™è¯¯å’Œæ€§èƒ½é—®é¢˜ã€‚è¿˜æœ‰ï¼ŒæŸäº› &lt;code&gt;auto&lt;/code&gt;  ç±»å‹æ¨å¯¼ç»“æœå°½ç®¡æ˜¯æŒ‰éƒ¨å°±ç­åœ°ç¬¦åˆæ ‡å‡†è§„å®šçš„æ¨å¯¼ç®—æ³•ï¼Œç„¶è€Œä»ç¨‹åºå‘˜çš„è§†è§’æ¥çœ‹å´æ˜¯é”™è¯¯çš„ã€‚å¦‚æœæ˜¯è¿™æ ·çš„æƒ…å†µï¼Œé‚£å°±å¾ˆæœ‰å¿…è¦çŸ¥é“å¦‚ä½•å»å¼•å¯¼ &lt;code&gt;auto&lt;/code&gt;  å¾—å‡ºæ­£ç¡®ç»“æœï¼Œå› ä¸ºé€€å›æ‰‹å·¥æŒ‡å®šç±»å‹çš„å£°æ˜ï¼Œæ˜¯é€šå¸¸éœ€è¦é¿å…çš„é€”å¾„ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªå°å°çš„ç« èŠ‚è®¨è®ºäº†æœ‰å…³ &lt;code&gt;auto&lt;/code&gt;  çš„ä¸€åˆ‡ã€‚&lt;/p&gt;
&lt;h3 id=&#34;item5-ä¼˜å…ˆé€‰ç”¨autoè€Œéæ˜¾ç¤ºç±»å‹å£°æ˜&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item5-ä¼˜å…ˆé€‰ç”¨autoè€Œéæ˜¾ç¤ºç±»å‹å£°æ˜&#34;&gt;#&lt;/a&gt; item5 ä¼˜å…ˆé€‰ç”¨ &lt;code&gt;auto&lt;/code&gt; , è€Œéæ˜¾ç¤ºç±»å‹å£°æ˜&lt;/h3&gt;
&lt;p&gt;ä½¿ç”¨ &lt;code&gt;auto&lt;/code&gt;  çš„å¥½å¤„æœ‰æ— æ•°æ¡ï¼Œä½†æ˜¯å®ƒå‡ ä¹å”¯ä¸€çš„ä¸€ä¸ªç¼ºç‚¹å´éš¾ä»¥è¯´æœä¸€äº›äººä½¿ç”¨ &lt;code&gt;auto&lt;/code&gt; ï¼Œå³ &lt;code&gt;auto&lt;/code&gt;  ä¸ºä»£ç å¯ç»´æŠ¤æ€§å’Œå¯è¯»æ€§çš„åå½±å“ã€‚ä½†æ˜¯ï¼Œç›¸æ¯”äºå…¨ç¯‡ä½¿ç”¨æˆ–æ ¹æœ¬ä¸ç”¨ï¼Œäº†è§£ä½œè€…æåˆ°çš„ä¸€äº›ä¼˜ç‚¹ï¼Œé€‚å½“åœ°ä½¿ç”¨ &lt;code&gt;auto&lt;/code&gt; , æˆ‘è®¤ä¸ºæ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;auto&lt;/code&gt;  è¦æ±‚å˜é‡åœ¨å®šä¹‰çš„æ—¶å€™æä¾›åˆå§‹åŒ–ï¼Œè¿™èƒ½å‡å°‘é”™è¯¯å¹¶æå‡æ€§èƒ½ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åœ¨ä½¿ç”¨ &lt;code&gt;auto&lt;/code&gt;  å£°æ˜è¿­ä»£å™¨ç±»å‹æˆ–è€… lambda è¡¨è¾¾å¼è¿™ç§å¤æ‚ç±»å‹çš„æ—¶å€™ï¼Œèƒ½å‡è½»å¾ˆå¤šè´Ÿæ‹…&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½¿ç”¨ &lt;code&gt;auto&lt;/code&gt;  èƒ½å‡å°‘ä¸€äº›éšå¼ç±»å‹è½¬æ¢å¸¦æ¥çš„é—®é¢˜ï¼Œå› ä¸º programer æœ‰æ—¶æ˜¾å¼ä½¿ç”¨çš„ç±»å‹ä¸è¡¨è¾¾å¼å®é™…ç±»å‹å¹¶ä¸å®Œå…¨ç›¸ç­‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å‰ä¸¤ç‚¹æ˜“äºç†è§£ï¼Œå¯¹äºç¬¬ä¸‰ç‚¹ï¼Œè€ƒè™‘ä¸‹é¢è¿™æ®µä»£ç ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;unordered_map&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;string&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt; m&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;â€¦&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;pair&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;string&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; p &lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt; m&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    â€¦                                   &lt;span class=&#34;token comment&#34;&gt;// ç”¨ p åšä¸€äº›äº‹&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;çœ‹èµ·æ¥åˆæƒ…åˆç†ï¼Œä½†æ˜¯æš—è—éšæ‚£ã€‚å¯¹äº &lt;code&gt;std::unordered_map&lt;/code&gt;  æ¥è¯´ï¼Œå®ƒçš„é”®å€¼éƒ¨åˆ†æ˜¯ constï¼Œæ‰€ä»¥å“ˆå¸Œè¡¨ä¸­çš„ &lt;code&gt;std::pair&lt;/code&gt;  çš„ç±»å‹å¹¶ä¸æ˜¯ &lt;code&gt;std::pair&amp;lt;std::string,int&amp;gt;&lt;/code&gt; , è€Œæ˜¯ std::pair&amp;lt;const std::string,int&amp;gt;ã€‚å¯æ˜¯åœ¨ä¸Šé¢çš„å¾ªç¯ä¸­ï¼Œç”¨æ¥å£°æ˜ &lt;code&gt;p&lt;/code&gt;  çš„ç±»å‹å´ä¸æ˜¯è¿™ä¸ªã€‚å› æ­¤ç¼–è¯‘å™¨å°±ä¼šæƒ³è¦ä½¿ç”¨æŸç§æ–¹æ³•æŠŠ &lt;code&gt;std::pair&amp;lt;const std::string,int&amp;gt;&lt;/code&gt;  å¯¹è±¡è½¬æ¢æˆ &lt;code&gt;std::pair&amp;lt;std::string, int&amp;gt;&lt;/code&gt;  å¯¹è±¡ã€‚è¿™ä¸€æ­¥æ˜¯å¯ä»¥æˆåŠŸçš„ï¼Œæ–¹æ³•æ˜¯å¯¹ &lt;code&gt;m&lt;/code&gt;  ä¸­çš„æ¯ä¸ªå¯¹è±¡éƒ½åšä¸€æ¬¡å¤åˆ¶æ“ä½œï¼Œå½¢æˆä¸€ä¸ª &lt;code&gt;p&lt;/code&gt;  æƒ³è¦ç»‘å®šçš„ç±»å‹çš„ä¸´æ—¶å¯¹è±¡ï¼Œç„¶åæŠŠ &lt;code&gt;p&lt;/code&gt;  è¿™ä¸ªå¼•ç”¨ç»‘å®šåˆ°è¯¥ä¸´æ—¶å¯¹è±¡ã€‚å¹¶ä¸”åœ¨å¾ªç¯çš„æ¯æ¬¡è¿­ä»£ç»“æŸæ—¶ï¼Œè¯¥ä¸´æ—¶å¯¹è±¡éƒ½ä¼šè¢«ææ„ä¸€æ¬¡ï¼Œè¿™ä¹‹é—´å¸¦æ¥çš„å¼€é”€ä¸ä½¿ç”¨ &lt;code&gt;const auto&amp;amp;&lt;/code&gt;  ç›¸æ¯”æ¥è¯´å¯å¤ªå¤§äº†ã€‚&lt;/p&gt;
&lt;h3 id=&#34;item6-autoæ¨å¯¼ä¸ç¬¦åˆè¦æ±‚æ—¶ä½¿ç”¨æ˜¾å¼ç±»å‹åˆå§‹åŒ–æƒ¯ç”¨æ³•explicitly-typed-initializer-idiom&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item6-autoæ¨å¯¼ä¸ç¬¦åˆè¦æ±‚æ—¶ä½¿ç”¨æ˜¾å¼ç±»å‹åˆå§‹åŒ–æƒ¯ç”¨æ³•explicitly-typed-initializer-idiom&#34;&gt;#&lt;/a&gt; item6 auto æ¨å¯¼ä¸ç¬¦åˆè¦æ±‚æ—¶ï¼Œä½¿ç”¨æ˜¾å¼ç±»å‹åˆå§‹åŒ–æƒ¯ç”¨æ³• (explicitly typed initializer idiom)&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;auto&lt;/code&gt;  åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½å¾ˆå¥½ç”¨ï¼Œä½†åœ¨é‡åˆ°ä¸€äº› &amp;quot;ä»£ç†&amp;quot; ç±»å‹çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šå¸¦æ¥æ„æ–™ä¹‹å¤–çš„é”™è¯¯ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªå¸¸è§çš„ä¾‹å­æ˜¯é‡åˆ° &lt;code&gt;vector&amp;lt;bool&amp;gt;&lt;/code&gt;  çš„æ—¶å€™ï¼Œå¯¹å…¶å®ƒçš„ vector å®¹å™¨ï¼Œoperator [] é€šå¸¸ä¼šè¿”å›ä¸€ä¸ªå¼•ç”¨ç±»å‹ï¼Œå¯æ˜¯ &lt;code&gt;vector&amp;lt;bool&amp;gt;&lt;/code&gt;  ä¸ä¸€æ ·ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ª &lt;code&gt;std::vector&amp;lt;bool&amp;gt;::reference&lt;/code&gt;  ç±»å‹ï¼ŒåŸå› æ˜¯ç”±äº bool ç±»å‹å®é™…ä¸Šé€šè¿‡ 1bit å°±å¯ä»¥è¡¨ç¤ºï¼Œ &lt;code&gt;vector&amp;lt;bool&amp;gt;&lt;/code&gt;  ä¸ºäº†èŠ‚çœç©ºé—´ï¼Œä¼šå¯¹ bool ç±»å‹å‹ç¼©ä¸º 1bit æ¥è¡¨ç¤ºã€‚ä½†æ˜¯è¿™å’Œ &lt;code&gt;vector&amp;lt;bool&amp;gt;&lt;/code&gt;  ä¸è¿”å›ä¸€ä¸ª &lt;code&gt;bool&amp;amp;&lt;/code&gt;  æœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼ŒåŸå› æ˜¯ï¼ŒC++ ç¦æ­¢è¿”å›å¯¹ä¸€ä¸ªæ¯”ç‰¹çš„å¼•ç”¨ï¼Œå› æ­¤ &lt;code&gt;vector&amp;lt;bool&amp;gt;&lt;/code&gt;  çš„ &lt;code&gt;operator[]&lt;/code&gt;  ä¸å¾—ä¸è¿”å›ä¸€ä¸ª &lt;code&gt;std::vector&amp;lt;bool&amp;gt;::reference&lt;/code&gt;  å¯¹è±¡ï¼Œç„¶åä¸ºäº†è®©å®ƒåœ¨ä½¿ç”¨å…¶å®ƒæ‰€æœ‰ &lt;code&gt;bool&amp;amp;&lt;/code&gt;  çš„åœ°æ–¹ä¿è¯å®ƒèƒ½ç”¨ï¼Œè®©å…¶æ”¯æŒå‘ &lt;code&gt;bool&lt;/code&gt;  ç±»å‹éšå¼ç±»å‹è½¬æ¢ï¼ˆè™½ç„¶å®é™…æ›´å¤æ‚ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;å—¯ï¼Œä½†æ˜¯æ—¢ç„¶ &lt;code&gt;std::vector&amp;lt;bool&amp;gt;::reference&lt;/code&gt;  æ”¯æŒå‘ &lt;code&gt;bool&lt;/code&gt;  ç±»å‹çš„éšå¼è½¬æ¢äº†ï¼Œé‚£ä¹ˆ &lt;code&gt;auto&lt;/code&gt;  å°†ä¸€ä¸ªè¡¨è¾¾å¼æ¨å¯¼ä¸º &lt;code&gt;std::vector&amp;lt;bool&amp;gt;::reference&lt;/code&gt;  æˆ–è€… &lt;code&gt;bool&lt;/code&gt;  ç±»å‹åˆæœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿåœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œå¯èƒ½ä¼šå¼•å‘é—®é¢˜ï¼š&lt;/p&gt;
&lt;p&gt;å‡å¦‚æˆ‘æœ‰ä¸€ä¸ªå‡½æ•°ï¼Œå‚æ•°ä¸º &lt;code&gt;Widget&lt;/code&gt; ï¼Œè¿”å›ä¸€ä¸ª &lt;code&gt;std::vector&amp;lt;bool&amp;gt;&lt;/code&gt; ï¼Œè¿™é‡Œçš„ &lt;code&gt;bool&lt;/code&gt;  è¡¨ç¤º &lt;code&gt;Widget&lt;/code&gt;  æ˜¯å¦æä¾›ä¸€ä¸ªç‹¬æœ‰çš„ç‰¹æ€§ã€‚æ›´è¿›ä¸€æ­¥å‡è®¾ç¬¬ 5 ä¸ª&lt;em&gt; bit&lt;/em&gt; è¡¨ç¤º &lt;code&gt;Widget&lt;/code&gt;  æ˜¯å¦å…·æœ‰é«˜ä¼˜å…ˆçº§ï¼Œæˆ‘ä»¬å¯ä»¥å†™è¿™æ ·çš„ä»£ç ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;vector&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;bool&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;features&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; Widget&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; w&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;auto&lt;/span&gt; highPriority &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;features&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;w&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;token number&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;     &lt;span class=&#34;token comment&#34;&gt;//w é«˜ä¼˜å…ˆçº§å—ï¼Ÿ&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;processWidget&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;w&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt;highPriority&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;          &lt;span class=&#34;token comment&#34;&gt;// æœªå®šä¹‰è¡Œä¸ºï¼&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;é€šè¿‡ä¸Šé¢çš„è®²è¿°ï¼Œæˆ‘ä»¬çŸ¥é“è¿™é‡Œçš„ &lt;code&gt;auto&lt;/code&gt;  ä¼šå°† &lt;code&gt;highPriority&lt;/code&gt;  æ¨å¯¼ä¸º &lt;code&gt;std::vector&amp;lt;bool&amp;gt;::reference&lt;/code&gt;  ç±»å‹ï¼Œå¹¶ç”¨ä¸€ä¸ª&lt;strong&gt;ä¸´æ—¶çš„&lt;/strong&gt; &lt;code&gt;vector&amp;lt;bool&amp;gt;&lt;/code&gt;  ç±»å‹çš„ &lt;code&gt;opertor[]&lt;/code&gt;  è¿”å›çš„å¯¹è±¡æ¥åˆå§‹åŒ–å®ƒã€‚é—®é¢˜æ˜¯ï¼Œ &lt;code&gt;std::vector&amp;lt;bool&amp;gt;::reference&lt;/code&gt;  å¯¹è±¡ä¸­å¯èƒ½åŒ…å«ä¸€ä¸ªæŒ‡é’ˆï¼Œå¹¶æŒ‡å‘ä¸€ä¸ªæœºå™¨å­— (word), è¯¥æœºå™¨å­—ä¸­å«æœ‰å®é™…ä¸Šè¢«å‹ç¼©çš„é‚£ä¸ª 1bit çš„ &lt;code&gt;bool&lt;/code&gt; ã€‚ä½†æ˜¯éšç€ä¸´æ—¶ &lt;code&gt;vector&amp;lt;bool&amp;gt;&lt;/code&gt;  å¯¹è±¡çš„ææ„ï¼Œè¿™ä¸ªæŒ‡é’ˆæŒ‡å‘çš„åœ°æ–¹é©¬ä¸Šå°±ä¼šè¢«ææ„ï¼Œå› æ­¤ &lt;code&gt;highPriority&lt;/code&gt;  ä¸­ä¹Ÿä¼šåŒ…å«ä¸€ä¸ªé‡æŒ‡é’ˆï¼å¯¹å®ƒçš„ä½¿ç”¨è‡ªç„¶ä¹Ÿä¼šåŒ…å«æœªå®šä¹‰è¡Œä¸ºäº†ã€‚&lt;/p&gt;
&lt;p&gt;ç»¼ä¸Šï¼Œç¨‹åºå‘˜åº”è¯¥é¿å…å†™å‡ºè¿™æ ·çš„ä»£ç :&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;auto&lt;/span&gt; someVar &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; expression of &lt;span class=&#34;token string&#34;&gt;&#34;invisible&#34;&lt;/span&gt; proxy &lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;åœ¨è¿™é‡Œï¼Œ &lt;code&gt;auto&lt;/code&gt;  æœ¬èº«å¹¶ä¸æ˜¯ä¸€ä¸ªé—®é¢˜ï¼Œè€Œæ˜¯å…¶æ²¡æœ‰æ¨å¯¼å‡ºæƒ³è¦çš„ç±»å‹ï¼Œä¸€ä¸ªè§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨&lt;strong&gt;æ˜¾å¼ç±»å‹åˆå§‹åŒ–æƒ¯ç”¨æ³•&lt;/strong&gt;ï¼Œåœ¨ä¸Šé¢é‚£ä¸ªä¾‹å­ä¸­ï¼Œå¯ä»¥è¿™æ ·æ“ä½œï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;auto&lt;/span&gt; highPriority &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token generic-function&#34;&gt;&lt;span class=&#34;token function&#34;&gt;static_cast&lt;/span&gt;&lt;span class=&#34;token generic class-name&#34;&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;bool&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;features&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;w&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;token number&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;ä½†æ˜¯ï¼Œè¿™ä¸ä¸‹é¢è¿™æ ·çš„ä»£ç æœ‰ä½•ä¸åŒï¼Œå†µä¸”è¿˜æ›´ç®€å•ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;bool&lt;/span&gt; highPriority &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;features&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;w&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;token number&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;ä¼˜åŠ¿æ˜¯ï¼Œé€šè¿‡ä½¿ç”¨ static_cast&amp;lt;bool&amp;gt;ï¼Œ&lt;strong&gt;æ˜¾å¼çš„æŒ‡æ˜äº†è¿™é‡Œå‘ç”Ÿäº†ä¸€æ¬¡ç±»å‹è½¬æ¢&lt;/strong&gt;ï¼Œè€Œè®©äº‹æƒ…æ›´åŠ æ˜¾è€Œæ˜“è§äº†ã€‚&lt;/p&gt;
&lt;p&gt;æ€»ç»“ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸å¯è§çš„ä»£ç†ç±»å¯èƒ½ä¼šä½¿ &lt;code&gt;auto&lt;/code&gt;  ä»è¡¨è¾¾å¼ä¸­æ¨å¯¼å‡º â€œé”™è¯¯çš„â€ ç±»å‹&lt;/li&gt;
&lt;li&gt;æ˜¾å¼ç±»å‹åˆå§‹åŒ–æƒ¯ç”¨æ³•å¼ºåˆ¶ &lt;code&gt;auto&lt;/code&gt;  æ¨å¯¼å‡ºä½ æƒ³è¦çš„ç»“æœ&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;chapter3-è½¬å‘ç°ä»£c&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#chapter3-è½¬å‘ç°ä»£c&#34;&gt;#&lt;/a&gt; chapter3 è½¬å‘ç°ä»£ C++&lt;/h2&gt;
&lt;h3 id=&#34;item7-åœ¨åˆ›å»ºå¯¹è±¡æ—¶æ³¨æ„åŒºåˆ†å’Œ&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item7-åœ¨åˆ›å»ºå¯¹è±¡æ—¶æ³¨æ„åŒºåˆ†å’Œ&#34;&gt;#&lt;/a&gt; item7 åœ¨åˆ›å»ºå¯¹è±¡æ—¶æ³¨æ„åŒºåˆ† () å’Œ {}&lt;/h3&gt;
&lt;p&gt;æ€»ç»“ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¤§æ‹¬å·åˆå§‹åŒ–å¯ä»¥åº”ç”¨çš„è¯­å¢ƒæœ€ä¸ºå¹¿æ³›ï¼Œå¯ä»¥é˜»æ­¢å†…å»ºç±»å‹ä¹‹é—´è¿›è¡Œéšå¼çª„åŒ–ç±»å‹è½¬æ¢ (å¦‚ double è½¬ int)ï¼Œè¿˜å¯ä»¥å¯¹æœ€ä»¤äººçƒ¦æ¼çš„è§£æè¯­æ³•å…ç–« (ä½¿ç”¨å°æ‹¬å·åˆå§‹åŒ–çš„æ—¶å€™è¦æ³¨æ„ï¼ŒC++ ä¼šä¼˜å…ˆå°†è¡¨è¾¾å¼è§£é‡Šä¸ºå£°æ˜ï¼Œæ¯”å¦‚ &lt;code&gt;Widget w3();&lt;/code&gt;  æ˜¯ä¸€ä¸ªå‡½æ•°å£°æ˜)&lt;/li&gt;
&lt;li&gt;åœ¨æ„é€ å‡½æ•°é‡è½½åŒ¹é…æœŸé—´ï¼Œåªè¦æœ‰ä»»ä½•å¯èƒ½ï¼Œå¤§æ‹¬å·åˆå§‹åŒ–å°±ä¼šä¸å¸¦æœ‰ &lt;code&gt;std::initializer_list&lt;/code&gt;  ç±»å‹çš„å½¢å‚ç›¸åŒ¹é…ï¼Œå³ä½¿å…¶ä»–é‡è½½ç‰ˆæœ¬æœ‰è¿™æ›´åŠ åŒ¹é…çš„å½¢å‚è¡¨&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨å°æ‹¬å·è¿˜æ˜¯å¤§æ‹¬å·ï¼Œä¼šé€ æˆç»“æœå¤§ç›¸å¾„åº­çš„ä¸€ä¸ªä¾‹å­æ˜¯ï¼šä½¿ç”¨ä¸¤ä¸ªå®å‚æ¥åˆ›å»ºä¸€ä¸ª &lt;code&gt;std::vector&lt;/code&gt;  å¯¹è±¡ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨æ¨¡æ¿å†…å®¹è¿›è¡Œå¯¹è±¡åˆ›å»ºæ—¶ï¼Œåˆ°åº•åº”è¯¥ä½¿ç”¨å°æ‹¬å·è¿˜æ˜¯å¤§æ‹¬å·æ˜¯éœ€è¦ä»”ç»†è€ƒè™‘çš„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;item8-ä¼˜å…ˆä½¿ç”¨nullptrè€Œé0æˆ–null&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item8-ä¼˜å…ˆä½¿ç”¨nullptrè€Œé0æˆ–null&#34;&gt;#&lt;/a&gt; item8 ä¼˜å…ˆä½¿ç”¨ nullptr, è€Œé 0 æˆ– NULL&lt;/h3&gt;
&lt;p&gt;ä¼˜å…ˆä½¿ç”¨ nullptr çš„ä¸»è¦åŸå› æ˜¯ï¼Œ0 å’Œ NULL å®é™…ä¸Šæ˜¯ä¸€ä¸ªæ•´å‹ï¼Œå¹¶éæŒ‡é’ˆï¼Œè¿™åœ¨é‡è½½äº†æ”¯æŒæ•´å‹å’ŒæŒ‡é’ˆç±»å‹å‚æ•°çš„å‡½æ•°ä¸­æœ‰æ—¶ä¼šå¼•èµ·é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;å…¶æ¬¡æ˜¯åœ¨æ¨¡æ¿æ¨å¯¼çš„æ—¶å€™ï¼Œ0 å’Œ NULL ä¼šè¢«æ¨å¯¼ä¸º int ç±»å‹ã€‚&lt;/p&gt;
&lt;h3 id=&#34;item9-ä¼˜å…ˆé€‰ç”¨åˆ«åå£°æ˜è€Œétypedef&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item9-ä¼˜å…ˆé€‰ç”¨åˆ«åå£°æ˜è€Œétypedef&#34;&gt;#&lt;/a&gt; item9 ä¼˜å…ˆé€‰ç”¨åˆ«åå£°æ˜ï¼Œè€Œé typedef&lt;/h3&gt;
&lt;p&gt;ä¼˜å…ˆé€‰ç”¨åˆ«åå£°æ˜çš„ä¸»è¦ä¼˜åŠ¿åœ¨äºåˆ«åå£°æ˜å¯ä»¥æ¨¡æ¿åŒ–ï¼Œè€Œ &lt;code&gt;typedef&lt;/code&gt;  ä¸è¡Œã€‚ä¸ºäº†è¾¾åˆ°ç›¸åŒæ•ˆæœï¼ŒC++98 ç¨‹åºå‘˜ä¸å¾—ä¸ä½¿ç”¨åµŒå¥—åœ¨æ¨¡æ¿çš„ struct ä¸­çš„ typedefã€‚æ¯”å¦‚ä¸‹é¢ä¸¤ä¸ªåˆ†åˆ«ä½¿ç”¨åˆ«åå£°æ˜å’Œ &lt;code&gt;typedef&lt;/code&gt;  æ¥è¾¾åˆ°ç›¸åŒæ•ˆæœçš„ä¾‹å­ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;using&lt;/span&gt; MyAllocList &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;list&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;T&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt;MyAlloc&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;T&lt;span class=&#34;token operator&#34;&gt;&gt;&gt;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;MyAllocList&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;Widget&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt; lw&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;      &lt;span class=&#34;token comment&#34;&gt;// client &lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;MyAllocList&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;	&lt;span class=&#34;token keyword&#34;&gt;typedef&lt;/span&gt; std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;list&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;T&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; MyAlloc&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;T&lt;span class=&#34;token operator&#34;&gt;&gt;&gt;&lt;/span&gt; type&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;MyAllocList&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;Widget&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;type lw&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;token comment&#34;&gt;// client&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;å¦ä¸€ä¸ªä¼˜ç‚¹æ˜¯ä½¿ç”¨æ¨¡æ¿å¯ä»¥è®©äººå…å†™ &amp;quot;::type&amp;quot; åç¼€ï¼Œå¹¶ä¸”åœ¨æ¨¡æ¿å†…ï¼Œå¯¹äºå†…åµŒ &lt;code&gt;typedef&lt;/code&gt;  çš„ä½¿ç”¨ç»å¸¸è¦æ±‚åŠ ä¸Š &lt;code&gt;typename&lt;/code&gt;  å‰ç¼€ (è§ Effective C++ å¯¹äºä¾èµ–æ¨¡æ¿ç±»å‹çš„è¯´æ˜)ã€‚&lt;/p&gt;
&lt;h3 id=&#34;item10-ä¼˜å…ˆé€‰ç”¨é™å®šä½œç”¨åŸŸçš„æšä¸¾ç±»å‹è€Œéä¸é™ä½œç”¨åŸŸçš„æšä¸¾ç±»å‹&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item10-ä¼˜å…ˆé€‰ç”¨é™å®šä½œç”¨åŸŸçš„æšä¸¾ç±»å‹è€Œéä¸é™ä½œç”¨åŸŸçš„æšä¸¾ç±»å‹&#34;&gt;#&lt;/a&gt; item10 ä¼˜å…ˆé€‰ç”¨é™å®šä½œç”¨åŸŸçš„æšä¸¾ç±»å‹ï¼Œè€Œéä¸é™ä½œç”¨åŸŸçš„æšä¸¾ç±»å‹&lt;/h3&gt;
&lt;p&gt;æ€»ç»“ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;C++98 é£æ ¼çš„æšä¸¾ç±»å‹ï¼Œç°åœ¨ç§°ä¸ºä¸é™èŒƒå›´çš„æšä¸¾ç±»å‹ã€‚&lt;/li&gt;
&lt;li&gt;é™å®šä½œç”¨åŸŸçš„æšä¸¾ç±»å‹ä»…åœ¨æšä¸¾ç±»å‹å†…å¯è§ã€‚å®ƒä»¬åªèƒ½é€šè¿‡å¼ºåˆ¶ç±»å‹è½¬æ¢ä»¥è½¬æ¢è‡³å…¶ä»–ç±»å‹ã€‚&lt;/li&gt;
&lt;li&gt;é™å®šä½œç”¨åŸŸçš„æšä¸¾ç±»å‹å’Œä¸é™èŒƒå›´çš„æšä¸¾ç±»å‹éƒ½æ”¯æŒåº•å±‚ç±»å‹æŒ‡å®šã€‚é™å®šä½œç”¨åŸŸçš„æšä¸¾ç±»å‹çš„é»˜è®¤åº•å±‚ç±»å‹æ˜¯ &lt;code&gt;int&lt;/code&gt; , è€Œä¸é™èŒƒå›´çš„æšä¸¾ç±»å‹æ²¡æœ‰é»˜è®¤åº•å±‚ç±»å‹ã€‚&lt;/li&gt;
&lt;li&gt;é™å®šä½œç”¨åŸŸçš„æšä¸¾ç±»å‹æ€»æ˜¯å¯ä»¥è¿›è¡Œå‰ç½®å£°æ˜ï¼Œè€Œä¸é™èŒƒå›´çš„æšä¸¾ç±»å‹å´åªæœ‰åœ¨æŒ‡å®šäº†é»˜è®¤åº•å±‚ç±»å‹çš„å‰æä¸‹æ‰å¯ä»¥è¿›è¡Œå‰ç½®å£°æ˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;item11-ä¼˜å…ˆé€‰ç”¨åˆ é™¤å‡½æ•°è€Œéprivateæœªå®šä¹‰å‡½æ•°&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item11-ä¼˜å…ˆé€‰ç”¨åˆ é™¤å‡½æ•°è€Œéprivateæœªå®šä¹‰å‡½æ•°&#34;&gt;#&lt;/a&gt; item11 ä¼˜å…ˆé€‰ç”¨åˆ é™¤å‡½æ•°ï¼Œè€Œé &lt;code&gt;private&lt;/code&gt;  æœªå®šä¹‰å‡½æ•°&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ä¼˜å…ˆé€‰ç”¨åˆ é™¤å‡½æ•°ï¼Œè€Œé &lt;code&gt;private&lt;/code&gt;  æœªå®šä¹‰å‡½æ•°&lt;/li&gt;
&lt;li&gt;ä»»ä½•å‡½æ•°éƒ½å¯ä»¥åˆ é™¤ï¼ŒåŒ…æ‹¬éæˆå‘˜å‡½æ•°å’Œæ¨¡æ¿å…·ç°ã€‚&lt;/li&gt;
&lt;/ul&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">http://example.com/2024/07/28/Effective-C-%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/</guid>
            <title>Effective C++è¯»ä¹¦ç¬”è®°</title>
            <link>http://example.com/2024/07/28/Effective-C-%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/</link>
            <category>C++ è¯»ä¹¦ç¬”è®°</category>
            <pubDate>Sun, 28 Jul 2024 17:38:31 +0800</pubDate>
            <description><![CDATA[ &lt;p&gt;C++ æ˜¯æˆ‘æœ€å–œæ¬¢çš„ä¸€é—¨è¯­è¨€ï¼ŒC++ programer ä¸€ç›´ä¸ºå…¶æ‹¥æœ‰çš„éåŒå¯»å¸¸çš„èƒ½åŠ›èŒƒå›´å’Œè¡¨ç°åŠ›è€Œè‡ªè±ªï¼ˆå½“ç„¶å¦‚æœèƒ½æ­£ç¡®ä½¿ç”¨çš„è¯ï¼‰ã€‚æ­£å¦‚ Scott Meyers, æœ¬ä¹¦ä½œè€…æ‰€è¨€ï¼šå­¦ä¹ ä¸€ç§ç¼–ç¨‹è¯­è¨€çš„åŸºç¡€æ˜¯ä¸€å›äº‹ï¼›å­¦ä¹ å¦‚ä½•ç”¨é‚£ç§è¯­è¨€è®¾è®¡å’Œå®ç°é«˜æ•ˆç‡çš„ç¨‹åºå®Œå…¨æ˜¯å¦å¤–ä¸€å›äº‹ã€‚æ–­æ–­ç»­ç»­å­¦ä¹ äº†ä¸¤å¹´çš„ C++ programing language, æˆ‘çš„è¿½æ±‚ä»å­¦ä¼šè¯­è¨€åŸºç¡€ï¼Œé€æ¸å˜ä¸ºè¿½æ±‚æ›´åŠ é«˜æ•ˆï¼Œå¹¶åŒæ—¶å…·å¤‡é«˜å¯æ‰©å±•æ€§å’Œå¯ç»´æŠ¤æ€§çš„ç¼–ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;Effetive C++ æ˜¯ä¸€æœ¬ä¸»è¦é¢å‘ C++  03 æ ‡å‡†åŠä¹‹å‰çš„ C++ ç¼–ç¨‹è¿‡ç¨‹ä¸­çš„ä¸€äº›ç¼–ç¨‹ guidelines çš„ï¼Œè‡ª C++  11 ä»¥æ¥ï¼ŒC++ ä¸æ–­æ¨é™ˆå‡ºæ–°ï¼Œå…³äºä¸€äº›åœºæ™¯ä½œè€…æå‡ºçš„è§£å†³æ–¹æ¡ˆä¹Ÿè®¸æœ‰äº†æ›´å¥½çš„æ›¿ä»£æ–¹æ¡ˆã€‚ä½†ä½œä¸ºä¸€åˆ‡çš„åŸºç¡€ï¼Œä»¥åŠä¸€ç³»åˆ—ä¹¦ç›®çš„å¼€å±±ä¹‹ä½œï¼ˆmore Efective C++, Effective Modern C++)ï¼Œæ­¤ä¹¦ä»ç„¶è¢«è®¸å¤šäººè®¤ä¸ºæ˜¯ CPP programer è¿›é˜¶çš„å¿…çœ‹ä¹¦ç›®ã€‚æ­¤è¯»ä¹¦ç¬”è®°ä»…ä¾›æˆ‘è‡ªå·±æŸ¥é˜…ï¼Œæä¾›ç®€å•çš„æ€»ç»“ä¸æ„Ÿæƒ³ï¼Œä»¥ä»ä½œè€…å¼•äººå…¥èƒœä½†å¯¹äºå·²ç»è®¤çœŸä½“ä¼šçš„è¯»è€…è€Œè¨€æ— ç›Šçš„è¡Œæ–‡ä¸­èµ°å‡º (TLDR)ã€‚å¹¶å¯¹ä¹¦ä¸­çš„ä¸€äº›é—®é¢˜å°è¯•ä½¿ç”¨ C++ 11 åçš„æ–°ç‰¹æ€§è§£å†³ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä¸æƒ³æˆä¸ºä¸€ä¸ªè¯­è¨€å­¦å®¶ï¼Œé˜…è¯»ä¹‹åè¿˜éœ€è¦æ›´å¤šçš„ç¼–ç¨‹ç»ƒä¹ æ¥å·©å›ºæ‰€å­¦ä¹ çš„çŸ¥è¯†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;span id=&#34;more&#34;&gt;&lt;/span&gt;&lt;/p&gt;
&lt;h2 id=&#34;ä¸€äº›åŸºç¡€çš„æ‚é¡¹&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#ä¸€äº›åŸºç¡€çš„æ‚é¡¹&#34;&gt;#&lt;/a&gt; ä¸€äº›åŸºç¡€çš„æ‚é¡¹&lt;/h2&gt;
&lt;h3 id=&#34;item1-å°†cè§†ä¸º-federation-of-languagesè¯­è¨€è”åˆä½“&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item1-å°†cè§†ä¸º-federation-of-languagesè¯­è¨€è”åˆä½“&#34;&gt;#&lt;/a&gt; item1 å°† C++ è§†ä¸º federation of languages (è¯­è¨€è”åˆä½“)&lt;/h3&gt;
&lt;p&gt;å°† C++ ä»ä¸€é—¨ç¼–ç¨‹è¯­è¨€çœ‹ä½œå››é—¨äº’ç›¸è”ç³»ä½†æœ‰å„è‡ªä¸»ä½“æ€æƒ³çš„å­è¯­è¨€çš„ç»“åˆä½“ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;C: åŒ…æ‹¬ built-in æ•°æ®ç»“æ„ï¼Œæµç¨‹æ§åˆ¶è¯­å¥ç­‰ï¼Œæä¾›è¯­æ³•åŸºç¡€ã€‚&lt;/li&gt;
&lt;li&gt;Object-Oriented C++ï¼šC++ çš„é¢å‘å¯¹è±¡éƒ¨åˆ†ï¼Œä¸»è¦è®¾è®¡å°è£…ç»§æ‰¿å¤šæ€è¿™ä¸‰ä¸ªæ–¹é¢&lt;/li&gt;
&lt;li&gt;Template C++ï¼šæ³›å‹ç¼–ç¨‹éƒ¨åˆ†ï¼Œå¯¹å¤šæ•°ç¨‹åºå‘˜å°‘ç”¨ä½†åŠå…¶å¼ºå¤§çš„ C++ è¯­è¨€éƒ¨åˆ†ï¼Œæä¾›åŒ…æ‹¬ TMP (æ¨¡æ¿å…ƒç¼–ç¨‹) è¿™æ ·çš„é»‘é­”æ³•ã€‚&lt;/li&gt;
&lt;li&gt;STLï¼šcontainers,iterators,algorithms,functions objects... æ–¹ä¾¿åœ°ä½¿ç”¨å¤§ä½¬ä»¬æä¾›çš„ç¼–ç¨‹å·¥å…·ï¼Œä¼˜åŒ–ç¼–ç¨‹ä½“éªŒï¼Œä¸ç”¨åƒ C é‚£æ · array simulate everything äº†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ¯ä¸€ç§å­è¯­è¨€éƒ½æœ‰ä¸€å¥—è‡ªå·±å¸¸ç”¨çš„ç¼–ç¨‹ç†å¿µï¼Œåœ¨ä¸åŒçš„å­è¯­è¨€ä¸‹ç¼–ç¨‹æ—¶ï¼Œå¯èƒ½ä¼šè¦ä»ä¸åŒçš„è§„åˆ™ä¸­è¿›è¡Œè½¬æ¢ï¼ˆæ¯”å¦‚ä¼ å€¼çš„æ–¹å¼ï¼‰ã€‚&lt;/p&gt;
&lt;h3 id=&#34;item2-ç”¨consts-enumså’Œinlines-å–ä»£defines&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item2-ç”¨consts-enumså’Œinlines-å–ä»£defines&#34;&gt;#&lt;/a&gt; item2 ç”¨ consts, enums, å’Œ inlines å–ä»£ #defines&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;#defines æ— æ³•æä¾›åŒ…æ‹¬ä½œç”¨åŸŸæ§åˆ¶ï¼Œç±»å‹æ£€æŸ¥ç­‰åŠŸèƒ½ï¼Œå› æ­¤èƒ½é¿å…å°±é¿å…ã€‚ä¸€èˆ¬åªåœ¨æ§åˆ¶ç¼–è¯‘é€»è¾‘çš„æ—¶å€™é…åˆ #ifdef/#ifndef ä½¿ç”¨ï¼Œæ¯”å¦‚æ ¹æ®æŸäº›å®ä¿®æ”¹ä¸€äº› objects çš„å®šä¹‰ï¼Œè€Œä¸è¦ç”¨åœ¨ç¼–ç¨‹çš„é€»è¾‘ä¸­ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æƒ³ä½¿ç”¨ #defines å®šä¹‰å¸¸é‡æ—¶ æ¯”å¦‚ &lt;code&gt;#define PI 3.1415926&lt;/code&gt; ï¼Œä½¿ç”¨ const æ›¿ä»£ï¼Œä»¥è·å–æ›´å¥½çš„ç¼–è¯‘å™¨æŠ¥é”™ä½“éªŒä¸ç±»å‹æ£€æŸ¥&lt;/li&gt;
&lt;li&gt;æƒ³ä½¿ç”¨ #defines å®šä¹‰&lt;strong&gt;ç±»å±å¸¸é‡&lt;/strong&gt;æ—¶ï¼Œæ¯”å¦‚&lt;strong&gt;åœ¨ç±»ä¸­&lt;/strong&gt;å®šä¹‰ &lt;code&gt;static const int a = 5;&lt;/code&gt;  è¿™é‡Œæ¶‰åŠåˆ°äº†ç±»å±å¸¸é‡çš„åˆå§‹åŒ–é—®é¢˜ï¼Œç®€è¦æ¥è¯´ï¼Œä¸€äº›ç¼–è¯‘å™¨ç¦æ­¢ static integral class constantsï¼ˆé™æ€æ•´å‹æ—ç±»å±å¸¸é‡ï¼‰çš„ in-class specification è€Œä¸å¾—ä¸åœ¨ç±»å¤–ä½¿ç”¨ &lt;code&gt;const int MyClass::a = 5;&lt;/code&gt;  è¿™æ ·çš„åˆå§‹åŒ–æ–¹å¼ã€‚ï¼ˆpsï¼š éƒ½æ˜¯å¾ˆè€çš„ç¼–è¯‘å™¨äº†ï¼Œåœ¨ä½œè€…é‚£ä¸ªå¹´ä»£éƒ½ç®—è¿‡æ—¶çš„äº†ï¼Œgcc4.0.4 éƒ½å¯ä»¥åœ¨ç±»ä¸­å®šä¹‰æ•´å‹æ—å¸¸é‡ï¼‰ã€‚å¯¹äºé™æ€éæ•´å‹æ—ç±»å±å¸¸é‡ï¼Œæ¯”å¦‚ &lt;code&gt;static const string s = &amp;quot;hello&amp;quot;&lt;/code&gt; ï¼Œæˆ–è€… &lt;code&gt;static const string s = nullptr&lt;/code&gt;  è¿™æ ·çš„è¯­å¥æ˜¯ä¸å…è®¸å‡ºç°åœ¨ç±»çš„å®šä¹‰ä¸­çš„ã€‚ä½ å¿…é¡»è¦åœ¨ç±»å¤–åˆå§‹åŒ–ã€‚for example:&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;MyClass&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;int&lt;/span&gt; cst &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;token comment&#34;&gt;// allowed&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; string s&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;token comment&#34;&gt;// static const string s = &#34;hello&#34;? not allowed&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt; p &lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;token comment&#34;&gt;// static const int* p = nullter? not allowed&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; string MyClass&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;s &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;hello&#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt; MyClass&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;p &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;&lt;strong&gt;è¿™ä¸ªè¿‡ç¨‹ä½“ç°äº† C++ ä»¤äººéš¾ä»¥å¿å—çš„ç¼ºé™·ï¼Œå¯¹äºå¾ˆå¤šä¸œè¥¿ï¼Œå®ƒå…·æœ‰å¾ˆå¤šçš„ç‰¹ä¾‹ï¼Œå¹¶ä¸”ä½ å¾ˆéš¾ç†è§£ä¸ºä»€ä¹ˆï¼Œæ²¡æœ‰ä»€ä¹ˆè§„åˆ™æ˜¯é€šç”¨çš„&lt;/strong&gt;ã€‚ä¸€ä¸ªå¥½æ¶ˆæ¯æ˜¯ï¼ŒC++ 17 ååšå‡ºäº†è¡¥æ•‘ (åˆæœ‰æ–°ä¸œè¥¿è¦è®°äº†)ï¼š&lt;/p&gt;
&lt;p&gt;according to &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTU2Mzg5Ny9ob3ctY2FuLXlvdS1kZWZpbmUtYS1zdGF0aWMtZGF0YS1tZW1iZXItb2YtdHlwZS1jb25zdC1zdGRzdHJpbmc=&#34;&gt;c++ - How can you define a static data member of type const std::string? - Stack Overflow&lt;/span&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;MyClass&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;constexpr&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;int&lt;/span&gt; cst &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;constexpr&lt;/span&gt; std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;string_view STRING &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;some useful string constant&#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;constexpr&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt; p &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;ul&gt;
&lt;li&gt;æƒ³ä½¿ç”¨ #defines å®šä¹‰å‡½æ•°æ—¶ï¼Œä½¿ç”¨ inline çš„æ¨¡ç‰ˆå‡½æ•°æ›¿ä»£ï¼Œä»¥è·å–å‡½æ•°å‚æ•°å…·æœ‰çš„å‚æ•°ç±»å‹æ£€æŸ¥åŠŸèƒ½ï¼Œå¹¶ä¸”æ‹¥æœ‰ä¸è¾“äº defines çš„æ€§èƒ½ã€‚è¿˜æœ‰ï¼Œåœ¨ä½¿ç”¨ defines å®šä¹‰å‡½æ•°æ—¶ï¼Œä½ ä¸å¾—ä¸ç»™å‚æ•°åŠ æ‹¬å· ğŸ˜ƒ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¯¹äº† å¿˜äº†æ enums äº†ï¼Œè¿™é‡Œä½œè€…ä½¿ç”¨äº†ä¸€ä¸ªå«åš the enum hack çš„æŠ€æœ¯ï¼Œä¸»è¦æ¥æºäºä¸€ä¸ª enumerated typeï¼ˆæšä¸¾ç±»å‹ï¼‰çš„å€¼å¯ä»¥ç”¨åœ¨ä¸€ä¸ªéœ€è¦ ints çš„åœ°æ–¹ã€‚for example:&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;GamePlayer&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;private&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;enum&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt; NumTurns &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;5&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;             &lt;span class=&#34;token comment&#34;&gt;// &#34;the enum hack&#34; - makes&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;                                     &lt;span class=&#34;token comment&#34;&gt;// NumTurns a symbolic name for 5&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;int&lt;/span&gt; scores&lt;span class=&#34;token punctuation&#34;&gt;[&lt;/span&gt;NumTurns&lt;span class=&#34;token punctuation&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;              &lt;span class=&#34;token comment&#34;&gt;// fine&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;ä½¿ç”¨è¿™é¡¹æŠ€æœ¯ï¼Œä½ å¯ä»¥ç¦æ­¢å¯¹ NumTurns çš„å–åœ°å€è¡Œä¸ºï¼Œç¬¬äºŒä¸ªç†ç”±æ˜¯ï¼Œå¤§é‡çš„ä»£ç åœ¨ä½¿ç”¨å®ƒï¼ˆä½œä¸ºæ¨¡ç‰ˆå…ƒç¼–ç¨‹çš„åŸºæœ¬æŠ€æœ¯ä¹‹ä¸€ï¼‰ï¼Œæ‰€ä»¥æœ€å¥½è¿˜æ˜¯è®¤è¯†ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;by the way, å½“ä½ å£°æ˜ä¸€ä¸ªå¸¸é‡æŒ‡é’ˆçš„æ—¶å€™ï¼Œæœ€å¥½åˆ«å¿˜äº†æŠŠè¿™ä¸ªæŒ‡é’ˆä¹Ÿè®¾ä¸º constã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&#34;item3-åªè¦å¯èƒ½å°±ç”¨const&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item3-åªè¦å¯èƒ½å°±ç”¨const&#34;&gt;#&lt;/a&gt; item3 åªè¦å¯èƒ½å°±ç”¨ const&lt;/h3&gt;
&lt;p&gt;use &lt;em&gt;const&lt;/em&gt; as long as possible, ç»å¸¸çœ‹åˆ°çš„ä¸€å¥è¯äº†ï¼Œä½†æ˜¯çœ‹äº†è¿™èŠ‚ååˆ·æ–°äº†æˆ‘çš„è®¤çŸ¥ï¼Œè¿™èŠ‚å†…å®¹ä¸»è¦åˆ†ä¸ºä¸‰ç‚¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;const å…³é”®å­—æä¾›äº†è¯­ä¹‰ä¸Šçš„è¡¨è¾¾ï¼Œæœ‰åŠ©äºç¼–è¯‘å™¨å‘ç°é”™è¯¯ã€‚const ç”¨é€”å¹¿æ³›ï¼Œå¯ç”¨äºå¯¹è±¡ï¼Œå‡½æ•°å‚æ•°ï¼Œè¿”å›ç±»å‹ï¼Œæˆå‘˜å‡½æ•°ç­‰ã€‚ï¼ˆè¿™ç‚¹ä¸ºå¤§éƒ¨åˆ†ç¨‹åºå‘˜å¯¹æ­¤èŠ‚æ ‡é¢˜çš„å”¯ä¸€ç†è§£ï¼‰&lt;/li&gt;
&lt;li&gt;ç¼–è¯‘å™¨åšæŒçš„æ˜¯&lt;strong&gt; bitwise constness&lt;/strong&gt; (äºŒè¿›åˆ¶ä½å¸¸é‡æ€§), ä½†ç¨‹åºå‘˜åº”å½“ä½¿ç”¨&lt;strong&gt; conceptual constness&lt;/strong&gt; (æ¦‚å¿µä¸Šçš„å¸¸é‡æ€§) æ¥ç¼–ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;å½“ const å’Œ non-const æˆå‘˜å‡½æ•°æœ¬è´¨ä¸Šå…·æœ‰ç›¸åŒçš„å®ç°çš„æ—¶å€™ï¼Œä½¿ç”¨ non-const ç‰ˆæœ¬è°ƒç”¨ const ç‰ˆæœ¬å¯ä»¥é¿å…ä»£ç é‡å¤ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å…³äºç¬¬äºŒç‚¹çš„ç†è§£ï¼š&lt;/p&gt;
&lt;p&gt;äºŒè¿›åˆ¶ä½å¸¸é‡æ€§æ˜¯æŒ‡å½“ä½ å£°æ˜ä¸€ä¸ªå˜é‡ä¸º const çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨åªéœ€è¦æ£€æŸ¥å®ƒåœ¨å†…å­˜ä¸­å­˜å‚¨çš„äºŒè¿›åˆ¶ä½æœ‰æ²¡æœ‰è¢«æ›´æ”¹å°±è¡Œäº†ï¼Œå› ä¸ºè¿™æ ·å®ç°ååˆ†æ–¹ä¾¿ï¼Œæ¯”å¦‚å½“ä½ å£°æ˜ä¸€ä¸ªæŒ‡é’ˆä¸º const æ—¶å€™ï¼Œä½ ä¸èƒ½æ”¹å˜æŒ‡é’ˆçš„å€¼ï¼Œä½†æ˜¯ä½ å¯ä»¥æ”¹å˜æŒ‡é’ˆæŒ‡å‘çš„å¯¹è±¡çš„å€¼ã€‚ä½†æ˜¯å½“ä½ å£°æ˜ä¸€ä¸ªç±»ä¸º const çš„æ—¶å€™ï¼Œåªèƒ½è°ƒç”¨ const æˆå‘˜å‡½æ•°ï¼Œå¹¶ä¸”ä¸èƒ½æ”¹å˜å…¶ä»»ä½•æˆå‘˜å˜é‡ï¼Œè¿™å®åœ¨æ˜¯å¤ªè‹›åˆ»äº†ã€‚&lt;/p&gt;
&lt;p&gt;for example: ä¸€ä¸ªå¯ä»¥å­˜å‚¨æ–‡æœ¬å—é•¿åº¦çš„ç±»ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;CTextBlock&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;size_t &lt;span class=&#34;token function&#34;&gt;length&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;private&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt;pText&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;size_t textLength&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;             &lt;span class=&#34;token comment&#34;&gt;// last calculated length of textblock&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;bool&lt;/span&gt; lengthIsValid&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;                 &lt;span class=&#34;token comment&#34;&gt;// whether length is currently valid&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;size_t &lt;span class=&#34;token class-name&#34;&gt;CTextBlock&lt;/span&gt;&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;length&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;15&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;16&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;!&lt;/span&gt;lengthIsValid&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;17&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    textLength &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;strlen&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;pText&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;  &lt;span class=&#34;token comment&#34;&gt;// error! can&#39;t assign to textLength&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;18&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    lengthIsValid &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token boolean&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;             &lt;span class=&#34;token comment&#34;&gt;// and lengthIsValid in a const&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;19&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;                                   &lt;span class=&#34;token comment&#34;&gt;// member function&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;20&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;21&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;return&lt;/span&gt; textLength&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;22&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;å¯¹äº length () æˆå‘˜å‡½æ•°ï¼Œç”±äºè¯­ä¹‰çš„éœ€è¦å¿…é¡»å®šä¹‰ä¸º constã€‚ä½†ä¸æƒ³æ¯æ¬¡éƒ½è°ƒç”¨ strlen è®¡ç®—æ–‡æœ¬é•¿åº¦ï¼Œè¿™ä¼šå¸¦æ¥è®¸å¤šå¼€é”€ï¼Œäºæ˜¯ä¾¿ç”¨ä¸Šè¿°æ–¹æ³•å­˜å‚¨å­—ç¬¦ä¸²é•¿åº¦ã€‚ä½†æ˜¯è¿™è¿åäº†äºŒè¿›åˆ¶å¸¸é‡æ€§ï¼Œæ¯•ç«Ÿæ”¹å˜äº†æˆå‘˜å˜é‡ã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤å¼•å…¥äº†é€»è¾‘å¸¸é‡æ€§çš„æ¦‚å¿µï¼Œè¿™ä¸€ç†å¿µè®¤ä¸ºï¼Œ** ä¸€ä¸ª const æˆå‘˜å‡½æ•°å¯ä»¥æ”¹å˜å¯¹è±¡ä¸­çš„ä¸€äº› bits, ä½†æ˜¯åªèƒ½ç”¨å®¢æˆ·æ— æ³•å¯Ÿè§‰çš„æ–¹æ³•ã€‚** è¿™ç§ç†å¿µçš„å®ç°æ˜¯é€šè¿‡ mutable å…³é”®å­—å®ç°çš„ï¼Œæ¯”å¦‚å°†ä¸Šé¢çš„ textLength å’Œ lengthIsValid å˜é‡ç”¨ mutable ä¿®é¥°å³å¯ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºç¬¬ä¸‰ç‚¹çš„ç†è§£ï¼š&lt;/p&gt;
&lt;p&gt;ä¸€èˆ¬æ¥è¯´ï¼Œç±»ä¸­é‡è½½çš„ const æˆå‘˜å‡½æ•°å’Œé const æˆå‘˜å‡½æ•°çš„é€»è¾‘éƒ½æ˜¯å·®ä¸å¤šçš„ï¼Œè¿™å¸¦æ¥äº†é¢å¤–çš„ç¼–è¯‘æ—¶é—´ï¼Œç»´æŠ¤æˆæœ¬ä»¥åŠä»£ç è†¨èƒ€ï¼Œè¿™å¯¹äºä¸€äº›ç¨‹åºå‘˜æ¥è¯´æ˜¯ä¸å¯å¿å—çš„ã€‚å› æ­¤å¯ä»¥ä½¿ç”¨è¿™æ ·ä¸€ä¸ª trick: é€šè¿‡å¼ºåˆ¶è½¬å‹ï¼Œè®© non-const æˆå‘˜å‡½æ•°è°ƒç”¨ const ç‰ˆæœ¬ã€‚for example:&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;TextBlock&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;operator&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;size_t position&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt;     &lt;span class=&#34;token comment&#34;&gt;// same as before&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;return&lt;/span&gt; text&lt;span class=&#34;token punctuation&#34;&gt;[&lt;/span&gt;position&lt;span class=&#34;token punctuation&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;operator&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;size_t position&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;         &lt;span class=&#34;token comment&#34;&gt;// now just calls const op[]&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;return&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token generic-function&#34;&gt;&lt;span class=&#34;token function&#34;&gt;const_cast&lt;/span&gt;&lt;span class=&#34;token generic class-name&#34;&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;                         &lt;span class=&#34;token comment&#34;&gt;// cast away const on&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;                                                 &lt;span class=&#34;token comment&#34;&gt;// op[]&#39;s return type;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        &lt;span class=&#34;token generic-function&#34;&gt;&lt;span class=&#34;token function&#34;&gt;static_cast&lt;/span&gt;&lt;span class=&#34;token generic class-name&#34;&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; TextBlock&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;     &lt;span class=&#34;token comment&#34;&gt;// add const to *this&#39;s type;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;          &lt;span class=&#34;token punctuation&#34;&gt;[&lt;/span&gt;position&lt;span class=&#34;token punctuation&#34;&gt;]&lt;/span&gt;                             &lt;span class=&#34;token comment&#34;&gt;// call const version of op[]&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      &lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;15&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;16&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;è¿™æ ·çš„ä»£ç é€šè¿‡ä¸äº†é€‰ç¾æ¯”èµ› ğŸ˜„ ï¼Œä½†æ˜¯å®ƒæœ‰æ•ˆã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„ï¼Œåè¿‡æ¥è®© const ç‰ˆæœ¬è°ƒç”¨ non-const ç‰ˆæœ¬ä¸å¯å–ï¼Œå› ä¸ºè¿åäº† const çš„è¯­ä¹‰ï¼Œä½ å°†æ‰¿å—æ”¹å˜æˆå‘˜å˜é‡çš„é£é™©ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&#34;item-4-ç¡®ä¿å¯¹è±¡åœ¨ä½¿ç”¨å‰è¢«åˆå§‹åŒ–&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item-4-ç¡®ä¿å¯¹è±¡åœ¨ä½¿ç”¨å‰è¢«åˆå§‹åŒ–&#34;&gt;#&lt;/a&gt; item 4 ç¡®ä¿å¯¹è±¡åœ¨ä½¿ç”¨å‰è¢«åˆå§‹åŒ–&lt;/h3&gt;
&lt;p&gt;å¯¹äº C++ çš„å¯¹è±¡ï¼Œå½“ä½ ä¸åˆå§‹åŒ–å®ƒä»¬æ—¶ï¼Œæœ‰äº›æ—¶å€™å®ƒä»¬ä¼šè‡ªåŠ¨åˆå§‹åŒ–ï¼Œæœ‰æ—¶å€™ä¸ä¼šï¼Œå› æ­¤ä¸ºäº†é¿å… ubï¼Œå†å£°æ˜çš„åŒæ—¶æœ€å¥½ä¹Ÿåˆå§‹åŒ–å®ƒä»¬ã€‚&lt;/p&gt;
&lt;p&gt;è¦ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æ‰‹åŠ¨åˆå§‹åŒ– built-in type çš„ objectsï¼Œå› ä¸º C++ åªåœ¨æŸäº›æ—¶å€™æ‰ä¼šè‡ªå·±åˆå§‹åŒ–å®ƒä»¬&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åœ¨ constructor ä¸­ï¼Œç”¨ member initialization list ä»£æ›¿å‡½æ•°ä½“ä¸­çš„ assignmentã€‚initialization list ä¸­ data members çš„æ’åˆ—é¡ºåºè¦ä¸å®ƒä»¬åœ¨ classï¼ˆç±»ï¼‰ä¸­è¢«å£°æ˜çš„é¡ºåºç›¸åŒã€‚å› ä¸ºåœ¨æ„é€ å‡½æ•°èµ‹å€¼ä¹‹å‰ï¼Œæˆå‘˜å˜é‡å·²ç»è¢«é»˜è®¤åˆå§‹åŒ–å¥½äº†ï¼Œè¿™æ ·åšèƒ½æå‡æ€§èƒ½ã€‚é™¤æ­¤ä¹‹å¤–çš„æ˜¯ï¼Œæœ‰äº›æ—¶å€™ï¼Œåˆå§‹åŒ–åˆ—è¡¨å¼å¯é€‰é¡¹ï¼Œæœ‰æ—¶å€™æ˜¯å¿…é€‰é¡¹ï¼Œå› æ­¤ä¸ºäº†æ–¹ä¾¿è®°å¿†ï¼Œä¸€å¾‹ä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨å³å¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é€šè¿‡ç”¨ local static objectsï¼ˆå±€éƒ¨é™æ€å¯¹è±¡ï¼‰ä»£æ›¿ non-local static objectsï¼ˆéå±€éƒ¨é™æ€å¯¹è±¡ï¼‰æ¥é¿å…è·¨ translation unitsï¼ˆç¼–è¯‘å•å…ƒï¼‰çš„ åˆå§‹åŒ–é¡ºåºé—®é¢˜ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å³å°†åœ¨å…¨å±€ä¸­å®šä¹‰ä¸€ä¸ª &lt;code&gt;static FileSystem fs; &lt;/code&gt;  æ›¿æ¢ä¸ºæä¾›ä¸€ä¸ªå‡½æ•°ï¼Œæœ‰ç‚¹åƒå•ä¾‹æ¨¡å¼ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;FileSystem&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;tfs&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;                   &lt;span class=&#34;token comment&#34;&gt;// this replaces the tfs object; it could be&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;                                   &lt;span class=&#34;token comment&#34;&gt;// static in the FileSystem class&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;static&lt;/span&gt; FileSystem fs&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;             &lt;span class=&#34;token comment&#34;&gt;// define and initialize a local static object&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;return&lt;/span&gt; fs&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;                        &lt;span class=&#34;token comment&#34;&gt;// return a reference to it&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;h2 id=&#34;æ„é€ -ææ„ä¸èµ‹å€¼&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#æ„é€ -ææ„ä¸èµ‹å€¼&#34;&gt;#&lt;/a&gt; æ„é€ ã€ææ„ä¸èµ‹å€¼&lt;/h2&gt;
&lt;h3 id=&#34;item5-äº†è§£cä¸ºä½ é»˜è®¤ç¼–å†™å¹¶è°ƒç”¨äº†å“ªäº›å‡½æ•°&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item5-äº†è§£cä¸ºä½ é»˜è®¤ç¼–å†™å¹¶è°ƒç”¨äº†å“ªäº›å‡½æ•°&#34;&gt;#&lt;/a&gt; item5 äº†è§£ C++ ä¸ºä½ é»˜è®¤ç¼–å†™å¹¶è°ƒç”¨äº†å“ªäº›å‡½æ•°&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ç¼–è¯‘å™¨å¯ä»¥éšå¼ç”Ÿæˆä¸€ä¸ª classï¼ˆç±»ï¼‰çš„ default constructorï¼ˆç¼ºçœæ„é€ å‡½æ•°ï¼‰ï¼Œcopy constructorï¼ˆæ‹·è´æ„é€ å‡½æ•°ï¼‰ï¼Œcopy assignment operatorï¼ˆæ‹·è´èµ‹å€¼è¿ç®—ç¬¦ï¼‰å’Œ destructorï¼ˆææ„å‡½æ•°ï¼‰ã€‚C++11 åè¿˜å¢åŠ äº†ç§»åŠ¨æ„é€ å’Œç§»åŠ¨èµ‹å€¼ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;å¯¹äºä»¥ä¸‹åœºæ™¯ï¼šæ·±æ‹·è´ï¼Œç±»ä¸­æœ‰ const æˆ–å¼•ç”¨æˆå‘˜å˜é‡ï¼Œä»¥åŠææ„å‡½æ•°æœ‰ virtual éœ€æ±‚çš„æ—¶å€™ï¼Œé»˜è®¤ç”Ÿæˆçš„å‡½æ•°å¯èƒ½ä¸ä¼šç¬¦åˆè¦æ±‚&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h3 id=&#34;item6-è‹¥ä¸æƒ³ä½¿ç”¨ç¼–è¯‘å™¨ç”Ÿæˆå‡½æ•°å°±æ˜ç¡®æ‹’ç»&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item6-è‹¥ä¸æƒ³ä½¿ç”¨ç¼–è¯‘å™¨ç”Ÿæˆå‡½æ•°å°±æ˜ç¡®æ‹’ç»&#34;&gt;#&lt;/a&gt; item6 è‹¥ä¸æƒ³ä½¿ç”¨ç¼–è¯‘å™¨ç”Ÿæˆå‡½æ•°ï¼Œå°±æ˜ç¡®æ‹’ç»&lt;/h3&gt;
&lt;p&gt;åœ¨ C++ 11 ä¹‹å‰ï¼Œä½œè€…æ˜¯é€šè¿‡å°†ç›¸åº”çš„æˆå‘˜å‡½æ•°å£°æ˜ä¸º private å®ç°çš„ï¼Œæˆ–è€…ç»§æ‰¿è‡ªä¸€ä¸ªä½¿ç”¨è¿™ç§æ–¹æ³•å®ç°çš„ Uncopyable çš„åŸºç±»ã€‚&lt;/p&gt;
&lt;p&gt;C++ 11 ä¹‹åï¼Œä½¿ç”¨ &lt;code&gt;= delete&lt;/code&gt;  å³å¯&lt;/p&gt;
&lt;h3 id=&#34;item7-ä¸ºå¤šæ€åŸºç±»å£°æ˜è™šææ„å‡½æ•°&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item7-ä¸ºå¤šæ€åŸºç±»å£°æ˜è™šææ„å‡½æ•°&#34;&gt;#&lt;/a&gt; item7 ä¸ºå¤šæ€åŸºç±»å£°æ˜è™šææ„å‡½æ•°&lt;/h3&gt;
&lt;p&gt;ä¸ºäº†é˜²æ­¢å†…å­˜æ³„éœ²ï¼Œå¿…é¡»å°†å¤šæ€åŸºç±»çš„ææ„å‡½æ•°å£°æ˜ä¸ºè™šå‡½æ•°&lt;/p&gt;
&lt;p&gt;é™¤æ­¤ä¹‹å¤–è¿˜è¦æ³¨æ„ä¸¤ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ™®é€šçš„åŸºç±»æ— éœ€ä¹Ÿä¸åº”è¯¥æœ‰è™šææ„å‡½æ•°ï¼Œå› ä¸ºè™šå‡½æ•°æ— è®ºåœ¨æ—¶é—´è¿˜æ˜¯ç©ºé—´ä¸Šéƒ½ä¼šæœ‰ä»£ä»·&lt;/li&gt;
&lt;li&gt;å¦‚æœä¸€ä¸ªç±»å‹æ²¡æœ‰è¢«è®¾è®¡æˆå¤šæ€åŸºç±»ï¼Œåˆæœ‰è¢«è¯¯ç»§æ‰¿çš„é£é™©ï¼Œå¯ä»¥ä½¿ç”¨ C++ 11 ä¸­çš„ &lt;code&gt;final&lt;/code&gt;  å…³é”®å­—ï¼Œè¿™æ ·ç¦æ­¢æ´¾ç”Ÿå¯ä»¥é˜²æ­¢è¯¯ç»§æ‰¿é€ æˆä¸Šè¿°é—®é¢˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;item8-é˜²æ­¢å¼‚å¸¸é€ƒç¦»ææ„å‡½æ•°&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item8-é˜²æ­¢å¼‚å¸¸é€ƒç¦»ææ„å‡½æ•°&#34;&gt;#&lt;/a&gt; item8 é˜²æ­¢å¼‚å¸¸é€ƒç¦»ææ„å‡½æ•°&lt;/h3&gt;
&lt;p&gt;ä¸¤ä¸ªè¦ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;destructorï¼ˆææ„å‡½æ•°ï¼‰åº”è¯¥æ°¸ä¸å¼•å‘ exceptionsï¼ˆå¼‚å¸¸ï¼‰ã€‚å¦‚æœ destructorï¼ˆææ„å‡½æ•°ï¼‰è°ƒç”¨äº†å¯èƒ½æŠ›å‡ºå¼‚å¸¸çš„å‡½æ•°ï¼Œdestructorï¼ˆææ„å‡½æ•°ï¼‰åº”è¯¥æ•æ‰æ‰€æœ‰å¼‚å¸¸ï¼Œç„¶å&lt;strong&gt;æŠ‘åˆ¶å®ƒä»¬æˆ–è€…ç»ˆæ­¢ç¨‹åº&lt;/strong&gt;ã€‚è¿™é‡Œçš„æŠ‘åˆ¶æŒ‡çš„æ˜¯åœ¨ try catch è¯­å¥ä¸­æ•è·å¹¶å¤„ç†ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœ classï¼ˆç±»ï¼‰å®¢æˆ·éœ€è¦èƒ½å¯¹ä¸€ä¸ªæ“ä½œæŠ›å‡ºçš„ exceptionsï¼ˆå¼‚å¸¸ï¼‰åšå‡ºå›åº”ï¼Œåˆ™é‚£ä¸ª classï¼ˆç±»ï¼‰åº”è¯¥æä¾›ä¸€ä¸ªå¸¸è§„çš„å‡½æ•°ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œnon-destructorï¼ˆéææ„å‡½æ•°ï¼‰ï¼‰æ¥å®Œæˆè¿™ä¸ªæ“ä½œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¯¹äºç¬¬äºŒç‚¹ï¼Œä¸€ä¸ªå¸¸è§ä¾‹å­æ˜¯ä½¿ç”¨å„ç§ db çš„è¿æ¥æ± çš„åœºæ™¯ï¼Œé€šå¸¸ç”¨æˆ·éœ€è¦ä½¿ç”¨ db.close () æ˜¾å¼é‡Šæ”¾èµ„æºï¼Œå¯¹äºæ‹¥æœ‰ RAII æœºåˆ¶çš„ C++ æ¥è¯´ï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦è¿™æ ·åšå‘¢ã€‚å› ä¸ºé€šè¿‡ db.close () è¿™æ ·çš„æ™®é€šæˆå‘˜å‡½æ•°ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡ try catch è¯­å¥è‡ªè¡Œå¯¹è¿™ä¸ªå¼‚å¸¸åšå‡ºå›åº”ã€‚åœ¨ææ„å‡½æ•°ä¸­ï¼ŒåŒæ ·å¯ä»¥ç»§ç»­ä½¿ç”¨ RAII æœºåˆ¶ï¼Œè®°å½•ç”¨æˆ·æœ‰æ— æ‰‹åŠ¨é‡Šæ”¾ï¼Œæ²¡æœ‰åˆ™è‡ªè¡Œè°ƒç”¨ db.close ()&lt;/p&gt;
&lt;h3 id=&#34;item9-é¿å…åœ¨æ„é€ å‡½æ•°æˆ–è€…ææ„å‡½æ•°ä¸­è°ƒç”¨è™šå‡½æ•°&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item9-é¿å…åœ¨æ„é€ å‡½æ•°æˆ–è€…ææ„å‡½æ•°ä¸­è°ƒç”¨è™šå‡½æ•°&#34;&gt;#&lt;/a&gt; item9 é¿å…åœ¨æ„é€ å‡½æ•°æˆ–è€…ææ„å‡½æ•°ä¸­è°ƒç”¨è™šå‡½æ•°&lt;/h3&gt;
&lt;p&gt;ç®€å•æ¥è¯´ï¼Œåœ¨æ„é€ å’Œææ„çš„æ—¶å€™ï¼Œå¯¹è±¡çš„ç±»å‹æ˜¯ä¸ç¡®å®šçš„ï¼Œå› æ­¤æƒ³è¦è°ƒç”¨çš„è™šå‡½æ•°å¯èƒ½ä¸ä¼šå¦‚ä½ æ‰€æ„¿ã€‚å¯ä»¥è¿™æ ·ç†è§£ï¼Œå†ææ„å’Œæ„é€ å‡½æ•°ä¸­è™šå‡½æ•°è¡¨çš„æ„é€ å’Œææ„çš„æ—¶æœºæ˜¯ä¸ç¡®å®šçš„ï¼Œå› æ­¤è°ƒç”¨è™šå‡½æ•°ä¼šå­˜åœ¨é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç‚¹çœ‹ä¼¼ç®€å•ï¼Œå´ååˆ†å®¹æ˜“è¸©å‘ï¼Œè€ƒè™‘ä»¥ä¸‹åœºæ™¯ï¼Œä¸ºäº†é¿å…é‡å¤ä»£ç ï¼Œæˆ‘ä»¬å¯èƒ½å°†ä¸åŒçš„å˜é‡åˆå§‹åŒ–æ”¾åˆ°ä¸€ä¸ª init () å‡½æ•°ä¹‹ä¸­ï¼Œå³ä½¿è¿™ä¸ªå‡½æ•°ä¸æ˜¯è™šå‡½æ•°ï¼Œä½†å¦‚æœå…¶ä¸­è°ƒç”¨äº†è™šå‡½æ•°ï¼Œè¿˜æ˜¯è¿èƒŒäº†è¿™ä¸€åŸåˆ™ï¼Œå¹¶ä¸”ä»¥éš¾ä»¥å¯Ÿè§‰çš„æ–¹å¼ã€‚&lt;/p&gt;
&lt;h3 id=&#34;item10-åœ¨èµ‹å€¼è¿ç®—ç¬¦ä¸­è¿”å›ä¸€ä¸ªreference-to-this&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item10-åœ¨èµ‹å€¼è¿ç®—ç¬¦ä¸­è¿”å›ä¸€ä¸ªreference-to-this&#34;&gt;#&lt;/a&gt; item10 åœ¨èµ‹å€¼è¿ç®—ç¬¦ä¸­è¿”å›ä¸€ä¸ª reference to *this&lt;/h3&gt;
&lt;p&gt;ç®€å•æ¥è¯´ è¿™æ ·åšæ˜¯ä¸ºäº†æ”¯æŒé“¾å¼èµ‹å€¼å¹¶è®©è‡ªå·±çš„æ¥å£å’Œå†…ç½®ç±»å‹çš„æ¥å£å°½å¯èƒ½ç›¸ä¼¼ã€‚å› æ­¤ï¼Œè¯·å°†èµ‹å€¼æ“ä½œç¬¦çš„è¿”å›ç±»å‹è®¾ä¸º ObjectClass&amp;amp; å¹¶è¿”å› * thisã€‚&lt;/p&gt;
&lt;h3 id=&#34;item11-åœ¨èµ‹å€¼è¿ç®—ç¬¦ä¸­å¤„ç†è‡ªèµ‹å€¼&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item11-åœ¨èµ‹å€¼è¿ç®—ç¬¦ä¸­å¤„ç†è‡ªèµ‹å€¼&#34;&gt;#&lt;/a&gt; item11 åœ¨èµ‹å€¼è¿ç®—ç¬¦ä¸­å¤„ç†è‡ªèµ‹å€¼&lt;/h3&gt;
&lt;p&gt;å½“ç»™ä¸€ä¸ªå¯¹è±¡èµ‹å€¼æ—¶ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œè¿™ä¸ªå¯¹è±¡éœ€è¦é‡Šæ”¾ç°æœ‰èµ„æºï¼Œç„¶åé€šè¿‡èµ‹å€¼è·å–æ–°èµ„æºï¼Œè¿™ä¸ªé€»è¾‘åœ¨å¤„ç†è‡ªæˆ‘èµ‹å€¼çš„æ—¶å€™ä¼šå¤±æ•ˆï¼Œå› ä¸ºé‡Šæ”¾çš„èµ„æºå¯èƒ½æ°¸è¿œæ‰¾ä¸åˆ°äº†ã€‚&lt;/p&gt;
&lt;p&gt;è§£å†³è¿™ä¸ªé—®é¢˜çš„ä¸€ä¸ªæ–¹æ¡ˆæ˜¯ï¼Œé€šè¿‡ç‰¹åˆ¤å¤„ç†è‡ªèµ‹å€¼æƒ…å†µï¼Œå¾ˆç®€å•ä¹Ÿå¸¸è§çš„ä¸€ç§æ€è·¯å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;SomeClass&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; SomeClass&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;operator&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; SomeClass&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; rhs&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;this&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt;rhs&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;delete&lt;/span&gt; ptr&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;	&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  ptr &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;DataBlock&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt;rhs&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;ptr&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;	&lt;span class=&#34;token comment&#34;&gt;// å¦‚æœæ­¤å¤„æŠ›å‡ºå¼‚å¸¸ï¼Œptr å°†æŒ‡å‘ä¸€å—å·²ç»è¢«åˆ é™¤çš„å†…å­˜ã€‚&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;é¦–å…ˆè¿™ç§æ–¹æ¡ˆçš„ä¸€ä¸ªé—®é¢˜æ˜¯ï¼šå½“é‡Šæ”¾å·²æœ‰èµ„æºåï¼Œè·å–æ–°èµ„æºçš„è¿‡ç¨‹å¯èƒ½å‘ç”Ÿå¼‚å¸¸ï¼Œæ­¤æ—¶æŒ‡é’ˆä¼šæŒ‡å‘è¢«é‡Šæ”¾çš„èµ„æºï¼Œå¯¼è‡´åç»­ç¨‹åºå‡ºé”™ã€‚&lt;/p&gt;
&lt;p&gt;è§£å†³çš„æ€è·¯ä¹Ÿå¾ˆç®€å•ï¼Œå³å…ˆè·å–æ–°çš„èµ„æºï¼Œç„¶åå†é‡Šæ”¾åŸæœ‰çš„èµ„æºï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;SomeClass&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; SomeClass&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;operator&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; SomeClass&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; rhs&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  DataBlock&lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt; pOrg &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; ptr&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  ptr &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;DataBlock&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt;rhs&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;ptr&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;	&lt;span class=&#34;token comment&#34;&gt;// å¦‚æœæ­¤å¤„æŠ›å‡ºå¼‚å¸¸ï¼Œptr ä»ç„¶æŒ‡å‘ä¹‹å‰çš„å†…å­˜ã€‚&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;delete&lt;/span&gt; pOrg&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;åŒæ ·ï¼Œè¿™ç§æ–¹æ¡ˆä¹Ÿä¸ç”¨ç‰¹åˆ¤æ˜¯å¦æ˜¯è‡ªèµ‹å€¼è¯­å¥äº†ï¼Œè¿˜æœ‰ä¸€ç‚¹å¥½å¤„æ˜¯ï¼Œé€šè¿‡å‡å°‘ if è¯­å¥ï¼Œå¯èƒ½ä¼šå¯¹æŒ‡ä»¤æµæ°´çº¿çš„å·¥ä½œæœ‰ç›Šã€‚&lt;/p&gt;
&lt;p&gt;è¿˜æœ‰ä¸€ç§æ–¹æ¡ˆæ˜¯ä½¿ç”¨ copy-and-swap æ–¹æ³•ï¼Œä¸è¿‡æœ¬äººæ„Ÿè§‰æ€§èƒ½å¯èƒ½ä¼šç¨ä½ï¼Œå› æ­¤ä¸ä½œè®¨è®ºã€‚&lt;/p&gt;
&lt;h3 id=&#34;item12-æ‹·è´ä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰ç»„æˆæˆåˆ†&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item12-æ‹·è´ä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰ç»„æˆæˆåˆ†&#34;&gt;#&lt;/a&gt; item12 æ‹·è´ä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰ç»„æˆæˆåˆ†&lt;/h3&gt;
&lt;p&gt;å³æ—¶åˆ»æ³¨æ„ä»¥ä¸‹ä¸‰ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸ºç±»å¢åŠ æˆå‘˜æ—¶ï¼Œåˆ«å¿˜äº†æ›´æ”¹æ‹·è´ç›¸å…³çš„å‡½æ•°ä¸­çš„é€»è¾‘&lt;/li&gt;
&lt;li&gt;&lt;mark&gt;åœ¨ç»§æ‰¿çš„åœºæ™¯ä¸‹ï¼Œå­ç±»éœ€è¦å¹¶ä¸”å¿…é¡»é€šè¿‡è°ƒç”¨çˆ¶ç±»çš„æ‹·è´æ„é€ æˆ–æ‹·è´èµ‹å€¼æ¥è¿›è¡Œçˆ¶ç±»æˆå‘˜çš„æ‹·è´ã€‚&lt;/mark&gt;&lt;/li&gt;
&lt;li&gt;æ‹·è´æ„é€ å’Œæ‹·è´èµ‹å€¼ä¸èƒ½äº’ç›¸è°ƒç”¨ï¼Œå¦‚æœæƒ³å‡å°‘ä»£ç é‡å¤ï¼Œå°±å°†é€šç”¨åŠŸèƒ½æ”¾å…¥ä¸€ä¸ªç¬¬ä¸‰æ–¹çš„å‡½æ•°ä¸­ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;èµ„æºç®¡ç†&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#èµ„æºç®¡ç†&#34;&gt;#&lt;/a&gt; èµ„æºç®¡ç†&lt;/h2&gt;
&lt;h3 id=&#34;item13-ä½¿ç”¨å¯¹è±¡ç®¡ç†èµ„æº&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item13-ä½¿ç”¨å¯¹è±¡ç®¡ç†èµ„æº&#34;&gt;#&lt;/a&gt; item13 ä½¿ç”¨å¯¹è±¡ç®¡ç†èµ„æº&lt;/h3&gt;
&lt;p&gt;ç»å…¸çš„ RAII æ€æƒ³ï¼Œå³åˆ©ç”¨ææ„å‡½æ•°é€€å‡ºä½œç”¨åŸŸè‡ªåŠ¨è°ƒç”¨çš„ç‰¹ç‚¹å¤„ç†èµ„æºçš„é‡Šæ”¾ã€‚&lt;/p&gt;
&lt;p&gt;C++11 åæœ‰äº†æ™ºèƒ½æŒ‡é’ˆï¼Œå› æ­¤ RAII çš„å®è·µå·²ç»å¾ˆç®€å•äº†ã€‚æ²¡æƒ³åˆ°é‚£æ—¶å€™çš„æ™ºèƒ½æŒ‡é’ˆå·²ç»å­˜åœ¨äº tr1 åº“é‡Œäº†ğŸ˜„&lt;/p&gt;
&lt;h3 id=&#34;item14-è°¨æ…è€ƒè™‘èµ„æºç®¡ç†ç±»çš„æ‹·è´è¡Œä¸º&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item14-è°¨æ…è€ƒè™‘èµ„æºç®¡ç†ç±»çš„æ‹·è´è¡Œä¸º&#34;&gt;#&lt;/a&gt; item14 è°¨æ…è€ƒè™‘èµ„æºç®¡ç†ç±»çš„æ‹·è´è¡Œä¸º&lt;/h3&gt;
&lt;p&gt;å³éœ€è¦è€ƒè™‘åœ¨ä¸åŒæƒ…å†µä¸‹æ˜¯å¦è¦ç¦æ­¢æˆ–ä»¥å…¶ä»–æ–¹å¼æ§åˆ¶å¯¹èµ„æºçš„æ‹·è´ã€‚&lt;/p&gt;
&lt;p&gt;C++11 åæœ‰äº† shared_ptr å’Œ unique_ptr åï¼Œåº”è¯¥èƒ½åº”ä»˜å„ç§åœºæ™¯äº†ã€‚&lt;/p&gt;
&lt;h3 id=&#34;item15-åœ¨èµ„æºç®¡ç†ç±»ä¸­å‡†å¤‡è®¿é—®è£¸èµ„æºraw-resources&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item15-åœ¨èµ„æºç®¡ç†ç±»ä¸­å‡†å¤‡è®¿é—®è£¸èµ„æºraw-resources&#34;&gt;#&lt;/a&gt; item15 åœ¨èµ„æºç®¡ç†ç±»ä¸­å‡†å¤‡è®¿é—®è£¸èµ„æºï¼ˆraw resourcesï¼‰&lt;/h3&gt;
&lt;p&gt;åœ¨æ™ºèƒ½æŒ‡é’ˆä¸­ï¼Œå¯ä»¥å‘ç°ï¼Œå®ƒä»¬æä¾›äº† get () æ–¹æ³•è·å–ä¿ç®¡çš„èµ„æºã€‚ä¸ºä»€ä¹ˆï¼Ÿ&lt;/p&gt;
&lt;p&gt;å› ä¸ºå¾ˆå¤š API çš„å‚æ•°ä¸­ï¼Œæ˜¯å’Œèµ„æºæœ¬èº«æ‰“äº¤é“çš„ï¼Œå› æ­¤ä¸€ä¸ª RAII èµ„æºç®¡ç†ç±»éœ€è¦æä¾›è®¿é—®è£¸èµ„æºçš„æ¥å£ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªç–‘é—®æ˜¯ï¼Œè¿™æ ·æ˜¯å¦è¿åäº†å°è£…æ€§ï¼Ÿç­”æ¡ˆæ˜¯ä¸ä¼šï¼Œå› ä¸º RAII åªæ˜¯ä¸ºäº†ä¿è¯èµ„æºé‡Šæ”¾è¿™ä¸ªè¡Œä¸ºçš„å‘ç”Ÿï¼Œå°è£…ä¸æ˜¯å…¶å­˜åœ¨çš„ç›®çš„ã€‚åŒæ—¶ï¼Œå¦‚æœä½ æä¾›éšå¼è½¬æ¢ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä¸€äº›é¢„æœŸä¹‹å¤–çš„é”™è¯¯ï¼Œå› æ­¤èµ„æºç®¡ç†ç±»ä»…æä¾›æ˜¾ç¤ºè½¬æ¢æ˜¯æœ€åˆç†çš„ã€‚&lt;/p&gt;
&lt;h3 id=&#34;item16-ä½¿ç”¨ç›¸åŒå½¢å¼çš„newå’Œdelete&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item16-ä½¿ç”¨ç›¸åŒå½¢å¼çš„newå’Œdelete&#34;&gt;#&lt;/a&gt; item16 ä½¿ç”¨ç›¸åŒå½¢å¼çš„ new å’Œ delete&lt;/h3&gt;
&lt;p&gt;å³ new å’Œ deleteï¼Œnew [] å’Œ delete [] æ­é…ä½¿ç”¨&lt;/p&gt;
&lt;h3 id=&#34;item17-åœ¨ä¸€ä¸ªç‹¬ç«‹çš„è¯­å¥ä¸­å°†newå‡ºæ¥çš„å¯¹è±¡å­˜å…¥æ™ºèƒ½æŒ‡é’ˆ&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item17-åœ¨ä¸€ä¸ªç‹¬ç«‹çš„è¯­å¥ä¸­å°†newå‡ºæ¥çš„å¯¹è±¡å­˜å…¥æ™ºèƒ½æŒ‡é’ˆ&#34;&gt;#&lt;/a&gt; item17 åœ¨ä¸€ä¸ªç‹¬ç«‹çš„è¯­å¥ä¸­å°† new å‡ºæ¥çš„å¯¹è±¡å­˜å…¥æ™ºèƒ½æŒ‡é’ˆ&lt;/h3&gt;
&lt;p&gt;æ­¤æ¡æ˜¯ä¸ºäº†é˜²æ­¢éå¸¸å¾®å¦™çš„å†…å­˜æ³„æ¼ï¼Œè¿™ç§ bug å‘ç”Ÿæ¦‚ç‡å¾ˆå°ï¼Œä½†ä¸€æ—¦å‡ºç°å¾ˆéš¾è¢«è§£å†³ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºè¿™æ ·çš„ä¸¤ä¸ªå‡½æ•°ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;priority&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;processWidget&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;share_ptr&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;Widget&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt; sp&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;int&lt;/span&gt; priority&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;ä¸€ä¸ªç®€æ´çš„è°ƒç”¨æ–¹æ³•æ˜¯ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;processWidget&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token generic-function&#34;&gt;&lt;span class=&#34;token function&#34;&gt;share_ptr&lt;/span&gt;&lt;span class=&#34;token generic class-name&#34;&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;widget&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;Widget&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;priority&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;ä½†è¿™ä¸ªè¯­å¥çš„ä¸€å¤§ç‰¹ç‚¹æ˜¯ï¼Œå¯èƒ½å˜ä¸ºè¿™æ ·çš„æ‰§è¡Œé¡ºåºï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;æ‰§è¡Œ &amp;quot;new Widget&amp;quot;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è°ƒç”¨ priorityã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è°ƒç”¨ shared_ptr çš„æ„é€ å‡½æ•°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å½“åœ¨ç¬¬äºŒç‚¹ä¸­å‘ç”Ÿäº†å¼‚å¸¸ï¼Œç¬¬ä¸€ç‚¹çš„ new Widget () æ„é€ çš„ç±»å¯èƒ½å°±ä¼šå‘ç”Ÿå†…å­˜æ³„æ¼ã€‚&lt;/p&gt;
&lt;p&gt;é¿å…ç±»ä¼¼é—®é¢˜çš„æ–¹æ³•å¾ˆç®€å•ï¼šç”¨ä¸€ä¸ªå•ç‹¬çš„è¯­å¥åˆ›å»º Widget å¹¶å°†å®ƒå­˜å…¥ä¸€ä¸ªæ™ºèƒ½æŒ‡é’ˆï¼Œç„¶åå°†è¿™ä¸ªæ™ºèƒ½æŒ‡é’ˆä¼ é€’ç»™ processWidget&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;shared_ptr&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;Widget&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;pw&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;Widget&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;  &lt;span class=&#34;token comment&#34;&gt;// store newed object&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;                                      &lt;span class=&#34;token comment&#34;&gt;// in a smart pointer in a&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;									  &lt;span class=&#34;token comment&#34;&gt;// standalone statement&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;processWidget&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;pw&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;priority&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;        &lt;span class=&#34;token comment&#34;&gt;// this call won&#39;t leak&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;è¿™æ ·åšæ˜¯å› ä¸ºç¼–è¯‘å™¨åœ¨ä¸åŒçš„è¯­å¥ä¹‹é—´é‡æ–°å®‰æ’æ“ä½œé¡ºåºçš„æ´»åŠ¨ä½™åœ°æ¯”åœ¨ä¸€ä¸ªè¯­å¥ä¹‹å†…è¦å°å¾—å¤š&lt;/p&gt;
&lt;h2 id=&#34;è®¾è®¡ä¸å£°æ˜&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#è®¾è®¡ä¸å£°æ˜&#34;&gt;#&lt;/a&gt; è®¾è®¡ä¸å£°æ˜&lt;/h2&gt;
&lt;h3 id=&#34;item18-è®©æ¥å£å®¹æ˜“è¢«æ­£ç¡®ä½¿ç”¨&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item18-è®©æ¥å£å®¹æ˜“è¢«æ­£ç¡®ä½¿ç”¨&#34;&gt;#&lt;/a&gt; item18 è®©æ¥å£å®¹æ˜“è¢«æ­£ç¡®ä½¿ç”¨&lt;/h3&gt;
&lt;p&gt;æœ¬æ¡æ¬¾è®¨è®ºå¦‚ä½•&lt;strong&gt;å¸®åŠ©ä½ çš„å®¢æˆ·åœ¨ä½¿ç”¨ä½ çš„æ¥å£æ—¶é¿å…ä»–ä»¬çŠ¯é”™è¯¯&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è®¾è®¡æ¥å£æ—¶ï¼Œæˆ‘ä»¬å¸¸å¸¸ä¼šé”™è¯¯åœ°å‡è®¾ï¼Œæ¥å£çš„è°ƒç”¨è€…&lt;strong&gt;æ‹¥æœ‰æŸäº›å¿…è¦çš„çŸ¥è¯†æ¥è§„é¿ä¸€äº›å¸¸è¯†æ€§çš„é”™è¯¯&lt;/strong&gt;ã€‚ä½†äº‹å®ä¸Šï¼Œæ¥å£çš„è°ƒç”¨è€…å¹¶ä¸æ€»æ˜¯åƒæ­£åœ¨è®¾è®¡æ¥å£çš„æˆ‘ä»¬ä¸€æ · â€œèªæ˜â€ æˆ–è€…çŸ¥é“æ¥å£å®ç°çš„â€ å†…å¹•ä¿¡æ¯ â€œï¼Œç»“æœå°±æ˜¯ï¼Œæˆ‘ä»¬é”™è¯¯çš„å‡è®¾ä½¿æ¥å£è¡¨ç°å¾—ä¸ç¨³å®šã€‚è¿™äº›ä¸ç¨³å®šå› ç´ å¯èƒ½æ˜¯ç”±äºè°ƒç”¨è€…ç¼ºä¹æŸäº›å…ˆéªŒçŸ¥è¯†ï¼Œä¹Ÿæœ‰å¯èƒ½ä»…ä»…æ˜¯ä»£ç ä¸Šçš„ç²—å¿ƒé”™è¯¯ã€‚æ¥å£çš„è°ƒç”¨è€…å¯èƒ½æ˜¯åˆ«äººï¼Œä¹Ÿå¯èƒ½æ˜¯æœªæ¥çš„ä½ ã€‚æ‰€ä»¥ä¸€ä¸ªåˆç†çš„æ¥å£ï¼Œåº”è¯¥å°½å¯èƒ½çš„ä»&lt;strong&gt;è¯­æ³•å±‚é¢&lt;/strong&gt;å¹¶åœ¨&lt;strong&gt;ç¼–è¯‘ä¹‹æ—¶è¿è¡Œä¹‹å‰&lt;/strong&gt;ï¼Œå¸®åŠ©æ¥å£çš„è°ƒç”¨è€…è§„é¿å¯èƒ½çš„é£é™©ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨&lt;strong&gt;å¤–è¦†ç±»å‹ï¼ˆwrapperï¼‰&lt;strong&gt;æé†’è°ƒç”¨è€…ä¼ å‚é”™è¯¯æ£€æŸ¥ï¼Œå°†å‚æ•°çš„é™„åŠ æ¡ä»¶é™åˆ¶åœ¨&lt;/strong&gt;ç±»å‹æœ¬èº«&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å½“è°ƒç”¨è€…è¯•å›¾ä¼ å…¥æ•°å­— â€œ13â€ æ¥è¡¨è¾¾ä¸€ä¸ª â€œæœˆä»½â€ çš„æ—¶å€™ï¼Œä½ å¯ä»¥åœ¨å‡½æ•°å†…éƒ¨åšè¿è¡ŒæœŸçš„æ£€æŸ¥ï¼Œç„¶åæå‡ºæŠ¥è­¦æˆ–ä¸€ä¸ªå¼‚å¸¸ï¼Œä½†è¿™æ ·çš„åšæ³•æ›´åƒæ˜¯ä¸€ç§è´£ä»»è½¬å« â€”â€” è°ƒç”¨è€…åªæœ‰åœ¨å°è¯•è¿‡åæ‰å‘ç°è‡ªå·±æ‰‹æ®‹æŠŠ â€œ12â€ å†™æˆäº† â€œ13â€ã€‚å¦‚æœåœ¨è®¾è®¡å‚æ•°ç±»å‹æ—¶å°±æŠŠ â€œæœˆä»½â€ è¿™ä¸€ç±»å‹æŠ½è±¡å‡ºæ¥ï¼Œæ¯”å¦‚ä½¿ç”¨ enum classï¼ˆå¼ºæšä¸¾ç±»å‹ï¼‰ï¼Œå°±èƒ½å¸®åŠ©å®¢æˆ·åœ¨ç¼–è¯‘æ—¶æœŸå°±å‘ç°é—®é¢˜ï¼ŒæŠŠå‚æ•°çš„é™„åŠ æ¡ä»¶é™åˆ¶åœ¨ç±»å‹æœ¬èº«ï¼Œå¯ä»¥è®©æ¥å£æ›´æ˜“ç”¨ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä»&lt;strong&gt;è¯­æ³•å±‚é¢&lt;/strong&gt;é™åˆ¶è°ƒç”¨è€…&lt;strong&gt;ä¸èƒ½åšçš„äº‹&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ¥å£çš„è°ƒç”¨è€…å¾€å¾€æ— æ„ç”šè‡³æ²¡æœ‰æ„è¯†åˆ°è‡ªå·±çŠ¯äº†ä¸ªé”™è¯¯ï¼Œæ‰€ä»¥æ¥å£çš„è®¾è®¡è€…å¿…é¡»åœ¨è¯­æ³•å±‚é¢åšå‡ºé™åˆ¶ã€‚ä¸€ä¸ªæ¯”è¾ƒå¸¸è§çš„é™åˆ¶æ˜¯åŠ ä¸Š &lt;code&gt;const&lt;/code&gt; ï¼Œæ¯”å¦‚åœ¨ &lt;code&gt;operate*&lt;/code&gt;  çš„è¿”å›ç±»å‹ä¸ŠåŠ ä¸Š &lt;code&gt;const&lt;/code&gt;  ä¿®é¥°ï¼Œå¯ä»¥é˜²æ­¢æ— æ„é”™è¯¯çš„èµ‹å€¼ &lt;code&gt;if (a * b = c)&lt;/code&gt; ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ¥å£åº”è¡¨ç°å‡ºä¸å†…ç½®ç±»å‹çš„ä¸€è‡´æ€§&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è®©è‡ªå·±çš„ç±»å‹å’Œå†…ç½®ç±»å‹çš„ä¸€è‡´æ€§ï¼Œæ¯”å¦‚è‡ªå®šä¹‰å®¹å™¨çš„æ¥å£åœ¨å‘½åä¸Šå’Œ STL åº”å…·å¤‡ä¸€è‡´æ€§ï¼Œå¯ä»¥æœ‰æ•ˆé˜²æ­¢è°ƒç”¨è€…çŠ¯é”™è¯¯ã€‚æˆ–è€…ä½ æœ‰ä¸¤ä¸ªå¯¹è±¡ç›¸ä¹˜çš„éœ€æ±‚ï¼Œé‚£ä¹ˆä½ æœ€å¥½é‡è½½ &lt;code&gt;operator*&lt;/code&gt;  è€Œå¹¶éè®¾è®¡åä¸ºâ€multiplyâ€ çš„æˆå‘˜å‡½æ•°ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä»è¯­æ³•å±‚é¢é™åˆ¶è°ƒç”¨è€…&lt;strong&gt;å¿…é¡»åšçš„äº‹&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;åˆ«è®©æ¥å£çš„è°ƒç”¨è€…æ€»æ˜¯è®°å¾—åšæŸäº›äº‹æƒ…&lt;/strong&gt;ï¼Œæ¥å£çš„è®¾è®¡è€…åº”åœ¨å‡å®šä»–ä»¬&lt;strong&gt;æ€»æ˜¯å¿˜è®°&lt;/strong&gt;è¿™äº›æ¡æ¡æ¡†æ¡†çš„å‰æä¸‹è®¾è®¡æ¥å£ã€‚æ¯”å¦‚ç”¨æ™ºèƒ½æŒ‡é’ˆä»£æ›¿åŸç”ŸæŒ‡é’ˆå°±æ˜¯ä¸ºè°ƒç”¨è€…ç€æƒ³çš„å¥½ä¾‹å­ã€‚å¦‚æœä¸€ä¸ªæ ¸å¿ƒæ–¹æ³•éœ€è¦åœ¨ä½¿ç”¨å‰åè®¾ç½®å’Œæ¢å¤ç¯å¢ƒï¼ˆæ¯”å¦‚è·å–é”å’Œå½’è¿˜é”ï¼‰ï¼Œæ›´å¥½çš„åšæ³•æ˜¯å°†è®¾ç½®å’Œæ¢å¤ç¯å¢ƒè®¾ç½®æˆçº¯è™šå‡½æ•°å¹¶è¦æ±‚è°ƒç”¨è€…ç»§æ‰¿è¯¥æŠ½è±¡ç±»ï¼Œå¼ºåˆ¶ä»–ä»¬å»å®ç°ã€‚åœ¨æ ¸å¿ƒæ–¹æ³•å‰åå¯¹è®¾ç½®å’Œæ¢å¤ç¯å¢ƒçš„è°ƒç”¨ï¼Œåˆ™åº”ç”±æ¥å£è®¾è®¡è€…æ“å¿ƒã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å½“æ–¹æ³•çš„è°ƒç”¨è€…ï¼ˆæˆ‘ä»¬çš„å®¢æˆ·ï¼‰è´£ä»»è¶Šå°‘ï¼Œä»–ä»¬å¯èƒ½çŠ¯çš„é”™è¯¯ä¹Ÿå°±è¶Šå°‘ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&#34;item19-å°†classçš„è®¾è®¡å½“æˆè®¾è®¡ä¸€ä¸ªtype&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item19-å°†classçš„è®¾è®¡å½“æˆè®¾è®¡ä¸€ä¸ªtype&#34;&gt;#&lt;/a&gt; item19 å°† class çš„è®¾è®¡å½“æˆè®¾è®¡ä¸€ä¸ª type&lt;/h3&gt;
&lt;p&gt;æœ¬æ¡æ¬¾æé†’æˆ‘ä»¬è®¾è®¡ class éœ€è¦è€ƒè™‘çš„é—®é¢˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¯¹è±¡è¯¥å¦‚ä½•åˆ›å»ºé”€æ¯ï¼šåŒ…æ‹¬æ„é€ å‡½æ•°ã€ææ„å‡½æ•°ä»¥åŠ new å’Œ delete æ“ä½œç¬¦çš„é‡æ„éœ€æ±‚ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹è±¡çš„åˆå§‹åŒ–ä¸èµ‹å€¼è¡Œä¸ºåº”æœ‰ä½•åŒºåˆ«ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹è±¡è¢«æ‹·è´æ—¶åº”è€ƒè™‘çš„è¡Œä¸ºï¼šæ‹·è´æ„é€ å‡½æ•°ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹è±¡çš„åˆæ³•å€¼æ˜¯ä»€ä¹ˆï¼Ÿåœ¨æˆå‘˜å‡½æ•°å†…éƒ¨å¯¹å‚æ•°åšåˆæ³•æ€§æ£€æŸ¥ã€‚&lt;/li&gt;
&lt;li&gt;æ–°çš„ç±»å‹æ˜¯å¦åº”è¯¥å¤åˆæŸä¸ªç»§æ‰¿ä½“ç³»ï¼Œè¿™å°±åŒ…å«è™šå‡½æ•°çš„è¦†ç›–é—®é¢˜ã€‚&lt;/li&gt;
&lt;li&gt;æ–°ç±»å‹å’Œå·²æœ‰ç±»å‹ä¹‹é—´çš„éšå¼è½¬æ¢é—®é¢˜ï¼Œè¿™æ„å‘³ç€ç±»å‹è½¬æ¢å‡½æ•°å’Œé explicit å‡½æ•°ä¹‹é—´çš„å–èˆã€‚&lt;/li&gt;
&lt;li&gt;æ–°ç±»å‹æ˜¯å¦éœ€è¦é‡è½½æ“ä½œç¬¦ã€‚&lt;/li&gt;
&lt;li&gt;ä»€ä¹ˆæ ·çš„æ¥å£åº”å½“æš´éœ²åœ¨å¤–ï¼Œè€Œä»€ä¹ˆæ ·çš„æ¥å£åº”å½“å°è£…åœ¨å†…ï¼ˆpublic å’Œ privateï¼‰&lt;/li&gt;
&lt;li&gt;æ–°ç±»å‹çš„æ•ˆç‡ã€èµ„æºè·å–å½’è¿˜ã€çº¿ç¨‹å®‰å…¨æ€§å’Œå¼‚å¸¸å®‰å…¨æ€§å¦‚ä½•ä¿è¯ã€‚&lt;/li&gt;
&lt;li&gt;è¿™ä¸ªç±»æ˜¯å¦å…·å¤‡ template çš„æ½œè´¨ï¼Œå¦‚æœæœ‰çš„è¯ï¼Œå°±åº”æ”¹ä¸ºæ¨¡æ¿ç±»ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;item20-å°½é‡ä½¿ç”¨pass-by-reference-to-constæ›¿æ¢pass-by-value&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item20-å°½é‡ä½¿ç”¨pass-by-reference-to-constæ›¿æ¢pass-by-value&#34;&gt;#&lt;/a&gt; item20 å°½é‡ä½¿ç”¨ pass-by-reference-to-const æ›¿æ¢ pass-by-value&lt;/h3&gt;
&lt;p&gt;å€¼ä¼ å‚çš„é—®é¢˜æœ‰ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æŒ‰å€¼ä¼ å‚æ¶‰åŠå¤§é‡å‚æ•°çš„å¤åˆ¶ï¼Œè¿™äº›å‰¯æœ¬å¤§å¤šæ˜¯æ²¡æœ‰å¿…è¦çš„ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœæ‹·è´æ„é€ å‡½æ•°è®¾è®¡çš„æ˜¯æ·±æ‹·è´è€Œéæµ…æ‹·è´ï¼Œé‚£ä¹ˆæ‹·è´çš„æˆæœ¬å°†è¿œè¿œå¤§äºæ‹·è´æŸå‡ ä¸ªæŒ‡é’ˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯¹äºå¤šæ€è€Œè¨€ï¼Œå°†çˆ¶ç±»è®¾è®¡æˆæŒ‰å€¼ä¼ å‚ï¼Œå¦‚æœä¼ å…¥çš„æ˜¯å­ç±»å¯¹è±¡ï¼Œä»…ä¼šå¯¹å­ç±»å¯¹è±¡çš„çˆ¶ç±»éƒ¨åˆ†è¿›è¡Œæ‹·è´ï¼Œå³éƒ¨åˆ†æ‹·è´ï¼Œè€Œæ‰€æœ‰å±äºå­ç±»çš„ç‰¹æ€§å°†è¢«ä¸¢å¼ƒï¼Œé€ æˆä¸å¯é¢„çŸ¥çš„é”™è¯¯ï¼ŒåŒæ—¶è™šå‡½æ•°ä¹Ÿä¸ä¼šè¢«è°ƒç”¨ã€‚&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;å°çš„ç±»å‹å¹¶ä¸æ„å‘³ç€æŒ‰å€¼ä¼ å‚çš„æˆæœ¬å°±ä¼šå°ã€‚é¦–å…ˆï¼Œç±»å‹çš„å¤§å°ä¸ç¼–è¯‘å™¨çš„ç±»å‹å’Œç‰ˆæœ¬æœ‰å¾ˆå¤§å…³ç³»ï¼ŒæŸäº›ç±»å‹åœ¨ç‰¹å®šç¼–è¯‘å™¨ä¸Šç¼–è¯‘ç»“æœä¼šæ¯”å…¶ä»–ç¼–è¯‘å™¨å¤§å¾—å¤šã€‚å°çš„ç±»å‹ä¹Ÿæ— æ³•ä¿è¯åœ¨æ—¥åä»£ç å¤ç”¨å’Œé‡æ„ä¹‹åï¼Œå…¶ç±»å‹å§‹ç»ˆå¾ˆå°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å°½ç®¡å¦‚æ­¤ï¼Œé¢å¯¹å†…ç½®ç±»å‹å’Œ STL çš„è¿­ä»£å™¨ä¸å‡½æ•°å¯¹è±¡ï¼Œæˆ‘ä»¬é€šå¸¸è¿˜æ˜¯ä¼šé€‰æ‹©æŒ‰å€¼ä¼ å‚çš„æ–¹å¼è®¾è®¡æ¥å£ã€‚å› ä¸ºï¼Œå¯¹äºå†…ç½®ç±»å‹å’Œè¿­ä»£å™¨ï¼Œå®ƒä»¬å¾€å¾€å¾ˆå°ï¼Œå€¼ä¼ é€’å¼€é”€ä½ï¼Œæœ‰æ—¶ç”šè‡³èƒœè¿‡å¼•ç”¨ã€‚è‡³äºå‡½æ•°å¯¹è±¡ï¼Œå€¼ä¼ é€’ä¸»è¦è§£å†³å¤šçº¿ç¨‹ä¸­çš„åŒæ­¥é—®é¢˜ã€‚&lt;/p&gt;
&lt;h3 id=&#34;item21-å¿…é¡»è¿”å›å¯¹è±¡æ—¶åˆ‡å¿Œè¿”å›reference&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item21-å¿…é¡»è¿”å›å¯¹è±¡æ—¶åˆ‡å¿Œè¿”å›reference&#34;&gt;#&lt;/a&gt; item21 å¿…é¡»è¿”å›å¯¹è±¡æ—¶ï¼Œåˆ‡å¿Œè¿”å› reference&lt;/h3&gt;
&lt;p&gt;ä¸»è¦æ˜¯ä¸€äº›ç¨‹åºå‘˜å¦„æƒ³å‡å°‘æ‹·è´çš„å¼€é”€ï¼Œè€Œè¯•å›¾å°†å‡½æ•°çš„è¿”å›å€¼è®¾ä¸ºå¼•ç”¨ï¼Œè€Œå¯¼è‡´å¯¹è±¡ææ„åè¿˜è¯•å›¾è°ƒç”¨å¼•å‘é”™è¯¯ã€‚&lt;/p&gt;
&lt;p&gt;C++ 11 ä¹‹åï¼Œé€šè¿‡ std::move () å’Œç§»åŠ¨æ„é€ å‡½æ•°å³å¯è§£å†³è¿™ä¸ªé—®é¢˜ã€‚&lt;/p&gt;
&lt;h3 id=&#34;item22-å°†æˆå‘˜å˜é‡å£°æ˜ä¸ºprivate&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item22-å°†æˆå‘˜å˜é‡å£°æ˜ä¸ºprivate&#34;&gt;#&lt;/a&gt; item22 å°†æˆå‘˜å˜é‡å£°æ˜ä¸º private&lt;/h3&gt;
&lt;p&gt;ç»“è®ºï¼š** è¯·å¯¹ class å†…æ‰€æœ‰æˆå‘˜å˜é‡å£°æ˜ä¸º &lt;code&gt;private&lt;/code&gt; ï¼Œ &lt;code&gt;private&lt;/code&gt;  æ„å‘³ç€å¯¹å˜é‡çš„å°è£…ã€‚** ä½œè€…æä¾›äº†æ›´æœ‰ä»·å€¼çš„ä¿¡æ¯åœ¨äºä¸åŒçš„å±æ€§æ§åˆ¶ â€”â€” &lt;code&gt;public&lt;/code&gt; , &lt;code&gt; private&lt;/code&gt;  å’Œ &lt;code&gt;protected&lt;/code&gt; â€”â€”&lt;strong&gt; ä»£è¡¨çš„è®¾è®¡æ€æƒ³&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ç®€å•çš„æ¥è¯´ï¼ŒæŠŠæ‰€æœ‰æˆå‘˜å˜é‡å£°æ˜ä¸º private çš„å¥½å¤„æœ‰ä¸¤ç‚¹ã€‚é¦–å…ˆï¼Œæ‰€æœ‰çš„å˜é‡éƒ½æ˜¯ private äº†ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„ public å’Œ protected æˆå‘˜éƒ½æ˜¯å‡½æ•°äº†ï¼Œç”¨æˆ·åœ¨ä½¿ç”¨çš„æ—¶å€™ä¹Ÿå°±æ— éœ€åŒºåˆ†ï¼Œè¿™å°±æ˜¯&lt;strong&gt;è¯­æ³•ä¸€è‡´æ€§&lt;/strong&gt;ï¼›å…¶æ¬¡ï¼Œå¯¹å˜é‡çš„å°è£…æ„å‘³ç€ï¼Œ&lt;strong&gt;å¯ä»¥å°½é‡å‡å°å› ç±»å‹å†…éƒ¨æ”¹å˜é€ æˆçš„ç±»å¤–å¤–ä»£ç çš„å¿…è¦æ”¹åŠ¨ã€‚å¢åŠ å¯ç»´æŠ¤æ€§&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä½œè€…è¿˜æå‡ºäº†ä¸€ä¸ªè§‚ç‚¹ï¼Œå¯¹ &lt;code&gt;private&lt;/code&gt;  æ¥è¯´ ** &lt;code&gt;public&lt;/code&gt;  å’Œ &lt;code&gt;protected&lt;/code&gt;  å±æ€§åœ¨ä¸€å®šç¨‹åº¦ä¸Šæ˜¯ç­‰ä»·çš„ **ã€‚ä¸€ä¸ªè‡ªå®šä¹‰ç±»å‹è¢«è®¾è®¡å‡ºæ¥å°±æ˜¯ä¾›å®¢æˆ·ä½¿ç”¨çš„ï¼Œé‚£ä¹ˆå®¢æˆ·çš„ä½¿ç”¨æ–¹æ³•æ— éæ˜¯ä¸¤ç§ â€”â€”&lt;strong&gt; ç”¨è¿™ä¸ªç±»åˆ›å»ºå¯¹è±¡&lt;/strong&gt;æˆ–è€…&lt;strong&gt;ç»§æ‰¿è¿™ä¸ªç±»ä»¥è®¾è®¡æ–°çš„ç±»&lt;/strong&gt; â€”â€” ä»¥ä¸‹ç®€ç§°ä¸ºç¬¬ä¸€ç±»å®¢æˆ·å’Œç¬¬äºŒç±»å®¢æˆ·ã€‚é‚£ä¹ˆä»å°è£…çš„è§’åº¦æ¥è¯´ï¼Œä¸€ä¸ª &lt;code&gt;public&lt;/code&gt;  çš„æˆå‘˜è¯´æ˜äº†&lt;strong&gt;ç±»çš„ä½œè€…å†³å®šå¯¹ç±»çš„ç¬¬ä¸€ç§å®¢æˆ·ä¸å°è£…æ­¤æˆå‘˜&lt;/strong&gt;ï¼Œè€Œä¸€ä¸ª &lt;code&gt;protected&lt;/code&gt;  çš„æˆå‘˜è¯´æ˜äº†&lt;strong&gt;ç±»çš„ä½œè€…å¯¹ç±»çš„ç¬¬äºŒç§å®¢æˆ·ä¸å°è£…æ­¤æˆå‘˜&lt;/strong&gt;ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“æˆ‘ä»¬æŠŠç±»çš„ä¸¤ç§å®¢æˆ·ä¸€è§†åŒä»äº†ä»¥åï¼Œ &lt;code&gt;public&lt;/code&gt; ã€ &lt;code&gt;protected&lt;/code&gt;  å’Œ &lt;code&gt;private&lt;/code&gt;  ä¸‰è€…ååº”çš„å³ç±»è®¾è®¡è€…å¯¹ç±»æˆå‘˜å°è£…ç‰¹æ€§çš„ä¸åŒæ€è·¯ â€”â€” å¯¹æˆå‘˜å°è£…è¿˜æ˜¯ä¸å°è£…ï¼Œå¦‚æœä¸å°è£…æ˜¯å¯¹ç¬¬ä¸€ç±»å®¢æˆ·ä¸å°è£…è¿˜æ˜¯å¯¹ç¬¬äºŒç±»å®¢æˆ·ä¸å°è£…ã€‚&lt;/p&gt;
&lt;p&gt;æœ‰æ„æ€çš„æ˜¯ Java å°±åˆ é™¤äº† protected ç»§æ‰¿ï¼Œå› ä¸ºè¿™ä¸ªåŠŸèƒ½å¤ªé¸¡è‚‹äº†å§ï¼Œè‡³å°‘åœ¨ C++ ä¸­æˆ‘è¿˜æ²¡æœ‰è§åˆ°è¿‡ä½¿ç”¨ protected çš„ä¾‹å­ã€‚&lt;/p&gt;
&lt;h3 id=&#34;item23-ç”¨éæˆå‘˜éå‹å…ƒå‡½æ•°å–ä»£æˆå‘˜å‡½æ•°&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item23-ç”¨éæˆå‘˜éå‹å…ƒå‡½æ•°å–ä»£æˆå‘˜å‡½æ•°&#34;&gt;#&lt;/a&gt; item23 ç”¨éæˆå‘˜éå‹å…ƒå‡½æ•°å–ä»£æˆå‘˜å‡½æ•°&lt;/h3&gt;
&lt;p&gt;ç”¨éæˆå‘˜éå‹å…ƒå‡½æ•°å–ä»£æˆå‘˜å‡½æ•°ï¼Œ&lt;strong&gt;å¯ä»¥æé«˜å°è£…æ€§ä¸å¯æ‰©å±•æ€§&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ¯”å¦‚å¯¹ä¸€ä¸ªæµè§ˆå™¨æ¸…é™¤ cookieï¼Œcache å’Œ history çš„å‡½æ•°ï¼Œåˆ°åº•æ˜¯åº”è¯¥é€‰æ‹© choice1:  &lt;code&gt;WebBrowzer.clearEverything()&lt;/code&gt;  è¿™æ ·ä¸€ä¸ªæ¥å£ï¼Œè¿˜æ˜¯åº”è¯¥é€‰æ‹© choice2:  &lt;code&gt;clearBrowser(WebBrowser &amp;amp;wb)&lt;/code&gt;  å‘¢ï¼Œæ³¨æ„ WebBrowzer ç±»å·²ç»æä¾›äº†åŸºæœ¬çš„æ¸…é™¤ cookie,cache å’Œ history çš„æ¥å£ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;WebBrowser&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;clearCache&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;clearHistory&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;removeCookies&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;ä¸ºäº†æ–¹ä¾¿ç”¨æˆ·ï¼Œæä¾›ä¸¤ç§æ¸…é™¤æ•°æ®æ¥å£çš„é€‰æ‹©å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;WebBrowser&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;						&lt;span class=&#34;token comment&#34;&gt;//choice 1: æˆå‘˜å‡½æ•°&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;clearEverything&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;               &lt;span class=&#34;token comment&#34;&gt;// calls clearCache, clearHistory,&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;                                        &lt;span class=&#34;token comment&#34;&gt;// and removeCookies&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;clearBrowser&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;WebBrowser&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; wb&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;		&lt;span class=&#34;token comment&#34;&gt;//choice 2: éæˆå‘˜éå‹å…ƒå‡½æ•°&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  wb&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;clearCache&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  wb&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;clearHistory&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  wb&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;removeCookies&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;&lt;ins class=&#34;primary&#34;&gt;å¦‚ä½•æé«˜å°è£…æ€§:&lt;/ins&gt;&lt;/p&gt;
&lt;p&gt;å¯ä»¥ä½¿ç”¨è¿™æ ·ä¸€ä¸ªæ ‡å‡†æ¥è¡¡é‡ç±»çš„å°è£…æ€§ï¼Œå³å¯ä»¥&lt;mark&gt;ç›´æ¥è®¿é—®&lt;/mark&gt;ç±»çš„ private éƒ¨åˆ†çš„å‡½æ•°çš„æ•°é‡ï¼Œè¿™ä¸ªæ•°é‡è¶Šå¤šï¼Œç±»çš„å°è£…æ€§å°±è¶Šå·®ã€‚ä»è¿™ç‚¹æ¥çœ‹ï¼Œåº”è¯¥é€‰æ‹©ä½¿ç”¨ choice2ã€‚&lt;/p&gt;
&lt;p&gt;&lt;ins class=&#34;primary&#34;&gt;å¦‚ä½•æé«˜å¯æ‰©å±•æ€§:&lt;/ins&gt;&lt;/p&gt;
&lt;p&gt;ä¸ªäººè®¤ä¸ºï¼Œè¿™ä¸€ç‚¹æ›´å…·æœ‰è¯´æœåŠ›ã€‚å‡è®¾å°†ç±»çš„æˆå‘˜å‡½æ•°åˆ†ä¸ºä¸¤ç±»ï¼šç›´æ¥è®¿é—® private éƒ¨åˆ†çš„æˆå‘˜å‡½æ•°ï¼Œå¦‚ &lt;code&gt;clearCache() clearHistory()&lt;/code&gt;  ç­‰ä¸é—´æ¥è®¿é—® private éƒ¨åˆ†çš„æˆå‘˜å‡½æ•°ï¼Œå¦‚è¿™é‡Œçš„ &lt;code&gt;clearEverything()&lt;/code&gt; ã€‚å¾ˆæ˜æ˜¾ï¼Œç¬¬äºŒç§æˆå‘˜å‡½æ•°çš„&lt;mark&gt;è®¾è®¡ç›®æ ‡æ˜¯ä¸ºäº†æ–¹ä¾¿ç¨‹åºå‘˜çš„æ“ä½œ&lt;/mark&gt;ï¼Œå› ä¸ºå³ä½¿æ²¡æœ‰ç¬¬äºŒç§å‡½æ•°ï¼Œç¨‹åºå‘˜ä¹Ÿå¯ä»¥é€šè¿‡è°ƒç”¨ç¬¬ä¸€ç§å‡½æ•°æ¥è¾¾åˆ°ç›®çš„ã€‚&lt;/p&gt;
&lt;p&gt;æ—¢ç„¶å¦‚æ­¤ï¼Œä¸ºä½•ä¸æ›´æ–¹ä¾¿ä¸€ç‚¹å‘¢ï¼Œè¦å®ç°è¿™ä¸€ç‚¹ï¼Œéœ€è¦é…åˆ C++ çš„ namespace åŠŸèƒ½æ¥å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;å‡è®¾æˆ‘ä»¬é‡‡ç”¨ choice1, å³ä½¿ç”¨æ›´å¤šçš„æˆå‘˜å‡½æ•°ï¼Œç±»çš„å®šä¹‰ä¼šå˜å¾—å†—é•¿ï¼Œå¹¶ä¸”å½“æˆ‘ä»¬æ›´æ”¹æŸäº› â€œæ–¹ä¾¿â€ æˆå‘˜å‡½æ•°çš„æ—¶å€™ï¼Œä½¿ç”¨è¿™ä¸ªç±»å®šä¹‰çš„æ‰€æœ‰ç¼–è¯‘å•å…ƒéƒ½å¿…é¡»é‡æ–°ç¼–è¯‘ã€‚è§£å†³è¿™ä¸ªé—®é¢˜çš„ä¸€ä¸ªä¾‹å­æ˜¯ C++ çš„ std å‘½åç©ºé—´ï¼Œæ¯”å¦‚ vector,string ç­‰ std å‘½åç©ºé—´æä¾›çš„åŠŸèƒ½ï¼Œåˆ†æ•£åœ¨ä¸åŒçš„æºæ–‡ä»¶å’Œå¤´æ–‡ä»¶ä¸­ï¼Œå½“ä½ éœ€è¦ä½¿ç”¨ vector æ—¶ï¼Œä½ æ— éœ€ include string ç›¸å…³çš„å¤´æ–‡ä»¶ã€‚å¯ä»¥è¯´ï¼Œstring ç›¸å…³ä»£ç å¯¹ä½ å½“å‰çš„ä»£ç æ²¡æœ‰å½±å“ã€‚&lt;/p&gt;
&lt;p&gt;å‡è®¾ webBrowser ç±»å¾—åˆ°äº†æ‰©å±•ï¼Œéœ€è¦æä¾›ä¹¦ç­¾ï¼Œæ‰“å°ï¼Œæ¸…é™¤æ•°æ®è¿™ä¸‰ä¸ªåŠŸèƒ½ï¼Œå®Œå…¨å¯ä»¥ä½¿ç”¨ä¸€ä¸ª &lt;code&gt;namespace WebBrowserStuff&lt;/code&gt;  å¹¶åœ¨ä¸åŒçš„ä¸‰ä¸ªå¤´æ–‡ä»¶å’Œæºæ–‡ä»¶ä¸­åˆ†åˆ«å®šä¹‰è¿™ä¸‰ä¸ªåŠŸèƒ½ç›¸å…³çš„ &amp;quot;æ–¹ä¾¿&amp;quot; å‡½æ•°ã€‚å‡è®¾æŸä¸ªæºæ–‡ä»¶åªéœ€è¦ç±»çš„æ‰“å°åŠŸèƒ½ï¼Œå®ƒä¸éœ€è¦ include å…¶å®ƒçš„å¤´æ–‡ä»¶ï¼Œé™¤äº†æ‰“å°ç›¸å…³çš„å…¶å®ƒå¤´æ–‡ä»¶ä¸æºæ–‡ä»¶çš„æ›´æ”¹ä¹Ÿä¸ä¼šå½±å“è¿™ä¸ªæºæ–‡ä»¶çš„ç¼–è¯‘ã€‚&lt;/p&gt;
&lt;p&gt;&lt;ins class=&#34;dot&#34;&gt;ç®€å•æ¥è¯´ï¼š æˆ‘ä»¬é€šè¿‡å°†ä¸€ä¸ªç±»çš„ç›¸å…³åŠŸèƒ½å‡½æ•°æ‹†çš„å››åˆ†äº”è£‚ï¼Œè¾¾åˆ°äº†æ›´é«˜çš„çµæ´»æ€§ä¸å¯æ‰©å±•æ€§ã€‚&lt;/ins&gt;&lt;/p&gt;
&lt;h3 id=&#34;item24-å½“ç±»å‹è½¬æ¢åº”è¯¥ç”¨äºæ‰€æœ‰å‚æ•°æ—¶å£°æ˜ä¸ºéæˆå‘˜å‡½æ•°&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item24-å½“ç±»å‹è½¬æ¢åº”è¯¥ç”¨äºæ‰€æœ‰å‚æ•°æ—¶å£°æ˜ä¸ºéæˆå‘˜å‡½æ•°&#34;&gt;#&lt;/a&gt; item24 å½“ç±»å‹è½¬æ¢åº”è¯¥ç”¨äºæ‰€æœ‰å‚æ•°æ—¶ï¼Œå£°æ˜ä¸ºéæˆå‘˜å‡½æ•°&lt;/h3&gt;
&lt;p&gt;ä¸€ä¸ªç®€å•çš„ä¾‹å­å³å¯è¯´æ˜ï¼š&lt;/p&gt;
&lt;p&gt;è€ƒè™‘ä¸€ä¸ªå¯ä»¥æ¥å—å•ä¸ª int ç±»å‹æ„é€ çš„ Rational ç±»ï¼Œå¦‚æœåœ¨ç±»ä¸­é‡è½½ operator* ï¼Œå¯ä»¥ä¸å¦ä¸€ä¸ª Rational ç±»ä½¿ç”¨ * è¿ç®—ç¬¦åšä¹˜æ³•ã€‚è¿™æ ·çš„åšæ³•å…è®¸ä½¿ç”¨ &lt;code&gt;rational * 2&lt;/code&gt;  è€Œä¸å…è®¸ä½¿ç”¨ &lt;code&gt;2 * rational&lt;/code&gt;  è¿™æ ·çš„è¯­å¥ï¼Œè¿™å¾€å¾€ä¸æ˜¯ç¨‹åºå‘˜æ‰€æœŸæœ›çš„ã€‚å³&lt;mark&gt;å¦‚æœä¸€ä¸ªæ“ä½œç¬¦æ˜¯æˆå‘˜å‡½æ•°ï¼Œé‚£ä¹ˆå®ƒçš„ç¬¬ä¸€ä¸ªæ“ä½œæ•° (è°ƒç”¨å¯¹è±¡) ä¸ä¼šå‘ç”Ÿéšå¼ç±»å‹è½¬æ¢ã€‚&lt;/mark&gt;&lt;/p&gt;
&lt;p&gt;å› æ­¤å¦‚æœæƒ³å…è®¸åƒä» 2 åˆ° rational å¯¹è±¡è¿™æ ·çš„éšå¼ç±»å‹è½¬æ¢ï¼Œåº”è¯¥å°† operator * çš„é‡è½½æ”¾åœ¨ç±»å¤–ã€‚&lt;/p&gt;
&lt;p&gt;by the way, å¦‚æœæƒ³è¦ç¦æ­¢å¯¹æŸäº›ç±»å‹çš„éšå¼ç±»å‹è½¬æ¢ï¼Œå¯ä»¥ä½¿ç”¨ C++ 11 ä¹‹åçš„  &lt;code&gt;explicit&lt;/code&gt;  å…³é”®å­—&lt;/p&gt;
&lt;h3 id=&#34;item25-è€ƒè™‘æ”¯æŒä¸æŠ›å¼‚å¸¸çš„-swap&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item25-è€ƒè™‘æ”¯æŒä¸æŠ›å¼‚å¸¸çš„-swap&#34;&gt;#&lt;/a&gt; item25 : è€ƒè™‘æ”¯æŒä¸æŠ›å¼‚å¸¸çš„ swap&lt;/h3&gt;
&lt;p&gt;æ­¤èŠ‚å†…å®¹éå¸¸ç²¾å½©ï¼Œæ·±æ·±ä½“ç°äº† C++ è¯­è¨€çš„é­…åŠ›ï¼Œæˆ–è€…åœ¨å C++ ç¨‹åºå‘˜çœ¼ä¸­æ— æ³•å¿å—çš„ç‰¹ç‚¹ï¼š&lt;strong&gt;ä¸ºäº†æè‡´çš„æ€§èƒ½æå‡è€Œå¤§å¤§å¢åŠ çš„ç¨‹åºå¤æ‚æ€§ä¸ç»™ç¨‹åºå‘˜å¸¦æ¥çš„æ€æƒ³è´Ÿæ‹…ï¼Œå³ä½¿è¿™ä¸ªæ€§èƒ½æå‡æœ‰æ—¶å¹¶ä¸æ˜æ˜¾&lt;/strong&gt;ã€‚ä¸€ä¸ªç®€å•çš„ swap å‡½æ•°ï¼Œç«Ÿç„¶æ¶‰åŠäº†è¿™ä¹ˆå¤šçš„çŸ¥è¯†ï¼šæ¨¡æ¿ç±»ã€å®Œå…¨ç‰¹åŒ–ä¸éå®Œå…¨ç‰¹åŒ–ã€std å‘½åç©ºé—´çš„æ‰©å……é™åˆ¶ã€å‘½åç©ºé—´ä¸ç›®æ ‡å‡½æ•°æœç´¢è§„åˆ™ã€æ³¨é‡å¼‚å¸¸å®‰å…¨çš„ç¼–ç¨‹èŒƒå¼...&lt;/p&gt;
&lt;p&gt;swap æ˜¯ä¸€ä¸ªé‡è¦çš„å‡½æ•°ï¼Œåœ¨æœ¬ä¹¦ä¸­ï¼Œå®ƒå°±ä½œä¸ºå¼‚å¸¸å®‰å…¨ç¼–ç¨‹ (exception-safe) çš„åŸºç¡€ (item 29) å’Œä¸€ç§å®ç°è‡ªèµ‹å€¼çš„é€šç”¨æœºåˆ¶ (item 11) è¢«æåŠã€‚&lt;/p&gt;
&lt;p&gt;ä½œä¸ºä¸€åˆ‡çš„åŸºç¡€ï¼Œå…ˆçœ‹çœ‹ std::swap æ˜¯å¦‚ä½•å®ç°çš„ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;namespace&lt;/span&gt; std &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;          &lt;span class=&#34;token comment&#34;&gt;// ä¸å¸¸è§çš„å®ç°ç›¸åŒ&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;swap&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;T&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; a&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; T&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; b&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;         &lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    T &lt;span class=&#34;token function&#34;&gt;temp&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;a&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    a &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; b&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    b &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; temp&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;å¯ä»¥çœ‹åˆ°ä¸€ç‚¹ï¼šåªè¦æˆ‘ä»¬çš„ç±»å‹æ”¯æŒæ‹·è´ï¼Œstd::swap å°±èƒ½å®Œæˆå®ƒçš„å·¥ä½œã€‚&lt;/p&gt;
&lt;p&gt;ç¼ºç‚¹æ˜¯ï¼šå®ƒå¤ªæ…¢äº†ï¼Œç‰¹åˆ«æ˜¯å¯¹äºæˆå‘˜å˜é‡å«æœ‰æŒ‡é’ˆçš„å‡½æ•°ï¼Œå®ƒå¸¦æ¥äº†ä¸‰æ¬¡æ‹·è´ï¼Œå¹¶ä¸”æ˜¯ä¸å¿…è¦çš„ã€‚&lt;/p&gt;
&lt;p&gt;è€ƒè™‘è¿™æ ·ä¸€ä¸ªç±» Widgetï¼ˆä½“ç°äº† pointer to implemention è®¾è®¡æ€æƒ³çš„ä¸€ç»„ç±»ï¼‰ï¼Œå³å®ƒçš„ä¸»è¦æˆå‘˜æ˜¯ä¸€ä¸ª WidgetImpl, å®ƒé•¿è¿™æ ·ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;WidgetImpl&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;                          &lt;span class=&#34;token comment&#34;&gt;// class for Widget data;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;                                     &lt;span class=&#34;token comment&#34;&gt;// details are unimportant&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;private&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;int&lt;/span&gt; a&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; b&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; c&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;                              &lt;span class=&#34;token comment&#34;&gt;// possibly lots of data â€”&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;vector&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;double&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt; v&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;                    &lt;span class=&#34;token comment&#34;&gt;// expensive to copy!&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;Widget&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;                              &lt;span class=&#34;token comment&#34;&gt;// class using the pimpl idiom&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token function&#34;&gt;Widget&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; Widget&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; rhs&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;15&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  Widget&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;operator&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; Widget&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; rhs&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;      &lt;span class=&#34;token comment&#34;&gt;// to copy a Widget, copy its&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;16&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;                                         &lt;span class=&#34;token comment&#34;&gt;// WidgetImpl object. For&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;17&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;   &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;                                      &lt;span class=&#34;token comment&#34;&gt;// details on implementing&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;18&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;   &lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt;pImpl &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;rhs&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;pImpl&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;                   &lt;span class=&#34;token comment&#34;&gt;// operator= in general,&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;19&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;   &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;                                      &lt;span class=&#34;token comment&#34;&gt;// see Items 10, 11, and 12.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;20&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;21&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;22&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;23&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;private&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;24&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  WidgetImpl &lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt;pImpl&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;                         &lt;span class=&#34;token comment&#34;&gt;// ptr to object with this&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;25&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;è€ƒè™‘ä½¿ç”¨ std::swap çš„å¼€é”€ï¼š&lt;strong&gt;å®ƒä¸ä»…è¦æ‹·è´ä¸‰ä¸ª Widgetsï¼Œè€Œä¸”è¿˜æœ‰ä¸‰ä¸ª WidgetImpl å¯¹è±¡ï¼Œè€Œå®é™…ä¸Šåªéœ€è¦äº¤æ¢å®ƒä»¬çš„æŒ‡é’ˆå°±å¯ä»¥äº†&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªè‡ªç„¶çš„æƒ³æ³•æ˜¯ï¼Œæˆ‘ä»¬æä¾› std::swap çš„ä¸€ä¸ªç‰¹åŒ–ç‰ˆæœ¬ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;namespace&lt;/span&gt; std &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;                            &lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token generic-function&#34;&gt;&lt;span class=&#34;token function&#34;&gt;swap&lt;/span&gt;&lt;span class=&#34;token generic class-name&#34;&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;Widget&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;Widget&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; a&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt;         &lt;span class=&#34;token comment&#34;&gt;// å¯¹ std::swap ç‰¹åŒ– è™½ç„¶è¿˜ä¸èƒ½ç¼–è¯‘&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;                    Widget&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; b&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;         &lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token function&#34;&gt;swap&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;a&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;pImpl&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; b&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;pImpl&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;             &lt;span class=&#34;token comment&#34;&gt;// åªç”¨äº¤æ¢æŒ‡é’ˆå°±è¡Œ&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;                                     &lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;ä¸èƒ½é€šè¿‡ç¼–è¯‘çš„åŸå› æ˜¯ï¼Œè®¿é—®äº† Widget ç±»ä¸­ private éƒ¨åˆ†çš„æŒ‡é’ˆã€‚è§£å†³è¿™ä¸€é—®é¢˜ä¹Ÿå¾ˆç®€å•ï¼šè¦ä¹ˆå£°æ˜è¿™ä¸ªç‰¹åŒ–ä¸º Widget ç±»çš„å‹å…ƒï¼Œè¦ä¹ˆè®© Widget æä¾›ä¸€ä¸ªæˆå‘˜å‡½æ•° swap ä½œä¸ºæ¥å£ï¼Œå¹¶è®©è¿™ä¸ªç‰¹åŒ–å»è°ƒç”¨å®ƒã€‚æ ¹æ® STL ä¸­å®¹å™¨çš„é€‰æ‹©ï¼šè¿™é‡Œè®© Widget å£°æ˜ä¸€ä¸ªåä¸º swap çš„ public æˆå‘˜å‡½æ•°å»åšå®é™…çš„äº¤æ¢ï¼Œç„¶åç‰¹åŒ– std::swap å»è°ƒç”¨é‚£ä¸ªæˆå‘˜å‡½æ•°ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;Widget&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;                    &lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;                           &lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;swap&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;Widget&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; other&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;using&lt;/span&gt; std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;swap&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;                                    &lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token function&#34;&gt;swap&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;pImpl&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; other&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;pImpl&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;      &lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;                                &lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;namespace&lt;/span&gt; std &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;                       &lt;span class=&#34;token comment&#34;&gt;// revised specialization of&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;15&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token generic-function&#34;&gt;&lt;span class=&#34;token function&#34;&gt;swap&lt;/span&gt;&lt;span class=&#34;token generic class-name&#34;&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;Widget&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;Widget&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; a&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt;     &lt;span class=&#34;token comment&#34;&gt;// std::swap&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;16&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;                    Widget&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; b&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;17&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;18&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    a&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;swap&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;b&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;                     &lt;span class=&#34;token comment&#34;&gt;// to swap Widgets, call their&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;19&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;                                &lt;span class=&#34;token comment&#34;&gt;// swap member function&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;20&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;åˆ°æ­¤é—®é¢˜å‘Šä¸€æ®µè½ï¼Œé™¤éæˆ‘ä»¬è®©é—®é¢˜å˜å¾—æ›´å¤æ‚ä¸€äº›ï¼šå‡è®¾ Widget å’Œ WidgetImpl æ˜¯ç±»æ¨¡æ¿ï¼Œè€Œä¸æ˜¯ç±»å‘¢ï¼Œæ¯”å¦‚è¯´æˆ‘ä»¬å‚æ•°åŒ–å­˜å‚¨åœ¨ WidgetImpl ä¸­çš„æ•°æ®ç±»å‹ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;WidgetImpl&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;Widget&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;å¯ä»¥å¾ˆè‡ªç„¶çš„åœ¨åˆšæ‰çš„åŸºç¡€ä¸Šå†™å‡ºè¿™æ ·ä¸€æ®µä»£ç ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;namespace&lt;/span&gt; std &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token generic-function&#34;&gt;&lt;span class=&#34;token function&#34;&gt;swap&lt;/span&gt;&lt;span class=&#34;token generic class-name&#34;&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;Widget&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;T&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;Widget&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;T&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; a&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt;      &lt;span class=&#34;token comment&#34;&gt;// error! illegal code!&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;                        Widget&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;T&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; b&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt; a&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;swap&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;b&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;ä½†æ˜¯ï¼Œå®ƒé€šè¿‡ä¸äº†ç¼–è¯‘ã€‚ç†ç”±æ˜¯ï¼šè¿™æ˜¯ä¸€ä¸ªè¯•å›¾å¯¹å‡½æ•°è¿›è¡Œéƒ¨åˆ†ç‰¹åŒ– (partial specialization) çš„ä»£ç ï¼Œ&lt;strong&gt;è€Œä¸å…è®¸å¯¹ç±»è¿›è¡Œéƒ¨åˆ†ç‰¹åŒ–ç›¸åçš„æ˜¯ï¼ŒC++ ä¸å…è®¸å¯¹å‡½æ•°è¿›è¡Œéƒ¨åˆ†ç‰¹åŒ–&lt;/strong&gt;ã€‚è¿™æ˜¯ç”±äºå‡½æ•°é‡è½½å®Œå…¨å¯ä»¥è¾¾åˆ°å‡½æ•°éƒ¨åˆ†ç‰¹åŒ–çš„ç›®çš„ï¼Œæ‰€ä»¥ C++ ç´¢æ€§ç¦æ­¢äº†å‡½æ•°éƒ¨åˆ†ç‰¹åŒ–ã€‚æ­£ç¡®ä½¿ç”¨é‡è½½æ¥è¾¾åˆ°ç›®çš„çš„ä»£ç æ˜¯ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;namespace&lt;/span&gt; std &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;             &lt;span class=&#34;token comment&#34;&gt;// an overloading of std::swap&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;swap&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;Widget&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;T&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; a&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt;          &lt;span class=&#34;token comment&#34;&gt;// (note the lack of &#34;&amp;lt;...&gt;&#34; after&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;            Widget&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;T&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; b&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;          &lt;span class=&#34;token comment&#34;&gt;// &#34;swap&#34;), but see below for&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt; a&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;swap&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;b&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;                   &lt;span class=&#34;token comment&#34;&gt;// why this isn&#39;t valid code&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;åœ¨é€šå¸¸æƒ…å†µä¸‹ï¼Œä¸Šé¢çš„ä»£ç å·²ç»è¶³å¤Ÿè¾¾æˆç›®çš„äº†ï¼Œä½†æ˜¯å¾ˆé—æ†¾ï¼Œè¿™åˆè§¦å‘äº† C++ çš„å¦ä¸€æ¡çº¢çº¿ï¼Œå› ä¸ºæˆ‘ä»¬è¯•å›¾ä¸º C++ çš„ std å‘½åç©ºé—´æ·»åŠ æ–°æˆå‘˜ï¼Œè€Œè¿™ä¸€åšæ³•æ˜¯ ub çš„ã€‚&lt;mark&gt;æ ¹æ®&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9lbi5jcHByZWZlcmVuY2UuY29tL3cvY3BwL2xhbmd1YWdlL2V4dGVuZGluZ19zdGQ=&#34;&gt; Extending the namespace std - cppreference.com&lt;/span&gt;C++ ç¦æ­¢å¯¹ std å‘½åç©ºé—´è¿›è¡Œæ‰©å……ï¼Œé™¤éä½ è¯•å›¾ä¸ºä¸€ä¸ªç”¨æˆ·å®šä¹‰ç±»å‹è€Œå¯¹ std ç©ºé—´é‡Œçš„åŸæœ‰æˆå‘˜æ·»åŠ ä¸€ä¸ªå®Œå…¨ç‰¹åŒ–ã€‚ä¸€ä¸ªè§£é‡Šæ˜¯ï¼šç”¨æˆ·åœ¨æ‰©å…… std å‘½åç©ºé—´åï¼Œå¦‚æœä¸‹ä¸€ä¸ªç‰ˆæœ¬çš„ C++ æ·»åŠ äº†ä¸€ä¸ªä¸ç”¨æˆ·å‘½åç›¸åŒçš„æ–°æˆå‘˜ï¼Œå°±ä¼šå‘ç”Ÿå‘½åå†²çªï¼Œä»è€Œå¯¼è‡´ç”¨æˆ·ä¹‹å‰çš„ä»£ç ä¸å†å¯ç”¨ã€‚&lt;/mark&gt;&lt;/p&gt;
&lt;p&gt;ä½œè€…ä½¿ç”¨çš„æ–¹æ³•æ˜¯ï¼Œå°†ä¸Šé¢çš„ä»£ç åŸå°ä¸åŠ¨åœ°ä» std ä¸­æŒªåˆ° Widget ç±»æ‰€åœ¨çš„å‘½åç©ºé—´ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;namespace&lt;/span&gt; WidgetStuff &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;                                     &lt;span class=&#34;token comment&#34;&gt;// templatized WidgetImpl, etc.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;                    &lt;span class=&#34;token comment&#34;&gt;// as before, including the swap&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;Widget&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;                   &lt;span class=&#34;token comment&#34;&gt;// member function&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;                    &lt;span class=&#34;token comment&#34;&gt;// non-member swap function;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;swap&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;Widget&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;T&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; a&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt;                 &lt;span class=&#34;token comment&#34;&gt;// not part of the std namespace&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;            Widget&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;T&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; b&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;                                         &lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    a&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;swap&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;b&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;15&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;ç°åœ¨ï¼Œä» client è§†è§’æ¥çœ‹æˆ‘ä»¬çš„ç¨‹åºï¼Œ&lt;/p&gt;
&lt;p&gt;å‡è®¾ä½ å†™äº†ä¸€ä¸ªå‡½æ•°æ¨¡æ¿æ¥äº¤æ¢ä¸¤ä¸ªå¯¹è±¡çš„å€¼ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;doSomething&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;T&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; obj1&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; T&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; obj2&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token function&#34;&gt;swap&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;obj1&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; obj2&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;å“ªä¸€ä¸ª swap åº”è¯¥è¢«è°ƒç”¨å‘¢ï¼Ÿstd ä¸­çš„é€šç”¨ç‰ˆæœ¬ï¼Œä½ çŸ¥é“å®ƒå¿…å®šå­˜åœ¨ï¼›std ä¸­çš„é€šç”¨ç‰ˆæœ¬çš„ç‰¹åŒ–ï¼Œå¯èƒ½å­˜åœ¨ï¼Œä¹Ÿå¯èƒ½ä¸å­˜åœ¨ï¼›T ä¸“ç”¨ç‰ˆæœ¬ï¼Œå¯èƒ½å­˜åœ¨ï¼Œä¹Ÿå¯èƒ½ä¸å­˜åœ¨ï¼Œå¯èƒ½åœ¨ä¸€ä¸ª namespace ä¸­ï¼Œä¹Ÿå¯èƒ½ä¸åœ¨ä¸€ä¸ª namespace ä¸­ï¼ˆä½†æ˜¯è‚¯å®šä¸åœ¨ std ä¸­ï¼‰ã€‚ç©¶ç«Ÿè¯¥è°ƒç”¨å“ªä¸€ä¸ªå‘¢ï¼Ÿå¦‚æœ T ä¸“ç”¨ç‰ˆæœ¬å­˜åœ¨ï¼Œä½ å¸Œæœ›è°ƒç”¨å®ƒï¼Œå¦‚æœå®ƒä¸å­˜åœ¨ï¼Œå°±å›è¿‡å¤´æ¥è°ƒç”¨ std ä¸­çš„é€šç”¨ç‰ˆæœ¬ã€‚å¦‚ä¸‹è¿™æ ·å°±å¯ä»¥ç¬¦åˆä½ çš„å¸Œæœ›ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;doSomething&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;T&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; obj1&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; T&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; obj2&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;using&lt;/span&gt; std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;swap&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;           &lt;span class=&#34;token comment&#34;&gt;// make std::swap available in this function&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token function&#34;&gt;swap&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;obj1&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; obj2&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;          &lt;span class=&#34;token comment&#34;&gt;// call the best swap for objects of type T&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;å½“ç¼–è¯‘å™¨çœ‹åˆ°è¿™ä¸ª swap è°ƒç”¨ï¼Œä»–ä¼šå¯»æ‰¾æ­£ç¡®çš„ swap ç‰ˆæœ¬æ¥è°ƒç”¨ã€‚&lt;mark&gt;C++ çš„åå­—æŸ¥æ‰¾è§„åˆ™ (å‚è§&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9lbi5jcHByZWZlcmVuY2UuY29tL3cvY3BwL2xhbmd1YWdlL2FkbA==&#34;&gt; Argument-dependent lookup - cppreference.com&lt;/span&gt;) ç¡®ä¿èƒ½æ‰¾åˆ°åœ¨å…¨å±€ namespace æˆ–è€…ä¸ T åŒä¸€ä¸ª namespace ä¸­çš„ T ä¸“ç”¨çš„ swapã€‚ï¼ˆä¾‹å¦‚ï¼Œå¦‚æœ T æ˜¯ namespace WidgetStuff ä¸­çš„ Widgetï¼Œç¼–è¯‘å™¨ä¼šåˆ©ç”¨å‚æ•°ä¾èµ–æŸ¥æ‰¾ï¼ˆargument-dependent lookupï¼‰æ‰¾åˆ° WidgetStuff ä¸­çš„ swapã€‚ï¼‰å¦‚æœ T ä¸“ç”¨ swap ä¸å­˜åœ¨ï¼Œç¼–è¯‘å™¨å°†ä½¿ç”¨ std ä¸­çš„ swapï¼Œè¿™å½’åŠŸäºæ­¤å‡½æ•°ä¸­çš„ using declaration ä½¿ std::swap åœ¨æ­¤å¯è§ã€‚å°½ç®¡å¦‚æ­¤ï¼Œç›¸å¯¹äºé€šç”¨æ¨¡æ¿ï¼Œç¼–è¯‘å™¨è¿˜æ˜¯æ›´å–œæ¬¢ T ä¸“ç”¨çš„ std::swap çš„ç‰¹åŒ–ï¼Œæ‰€ä»¥å¦‚æœ std::swap å¯¹ T è¿›è¡Œäº†ç‰¹åŒ–ï¼Œåˆ™ç‰¹åŒ–çš„ç‰ˆæœ¬ä¼šè¢«ä½¿ç”¨ã€‚&lt;/mark&gt;&lt;/p&gt;
&lt;p&gt;æœ¬èŠ‚æ€»ç»“ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚æœ std::swap å¯¹äºä½ çš„ç±»å‹æ¥è¯´æ˜¯ä½æ•ˆçš„ï¼Œè¯·æä¾›ä¸€ä¸ª swap æˆå‘˜å‡½æ•°ã€‚å¹¶ç¡®ä¿ä½ çš„ swap ä¸ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœä½ æä¾›ä¸€ä¸ªæˆå‘˜ swapï¼Œè¯·åŒæ—¶æä¾›ä¸€ä¸ªè°ƒç”¨æˆå‘˜ swap çš„éæˆå‘˜ swapã€‚å¯¹äºç±»ï¼ˆéæ¨¡æ¿ï¼‰ï¼Œè¿˜è¦ç‰¹åŒ– std::swapã€‚&lt;/li&gt;
&lt;li&gt;è°ƒç”¨ swap æ—¶ï¼Œè¯·ä¸º std::swap ä½¿ç”¨ä¸€ä¸ª using declarationï¼Œç„¶ååœ¨è°ƒç”¨ swap æ—¶ä¸ä½¿ç”¨ä»»ä½• namespace é™å®šæ¡ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;ä¸ºç”¨æˆ·å®šä¹‰ç±»å‹å®Œå…¨åœ°ç‰¹åŒ– std æ¨¡æ¿æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯ç»ä¸è¦è¯•å›¾å¾€ std ä¸­åŠ å…¥ä»»ä½•å…¨æ–°çš„ä¸œè¥¿ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¹Ÿè®¸è¿˜é—ç•™äº†ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœ¬èŠ‚æ ‡é¢˜æ‰€è¨€ï¼šç»ä¸è¦è®© swap çš„æˆå‘˜ç‰ˆæœ¬æŠ›å‡ºå¼‚å¸¸ï¼Œè¿™æ˜¯å› ä¸º swap çš„éå¸¸é‡è¦çš„åº”ç”¨ä¹‹ä¸€æ˜¯ä¸ºç±»ï¼ˆä»¥åŠç±»æ¨¡æ¿ï¼‰æä¾›å¼ºå¤§çš„å¼‚å¸¸å®‰å…¨ï¼ˆexception-safetyï¼‰ä¿è¯ (å‚è§ item 29)ã€‚swap çš„ç¼ºçœç‰ˆæœ¬åŸºäºæ‹·è´æ„é€ å’Œæ‹·è´èµ‹å€¼ï¼Œå¦‚æœè¿™ä¸¤ä¸ªå‡½æ•°ä»…æ¶‰åŠå†…å»ºç±»å‹ï¼Œé‚£ä¹ˆä¸€åˆ‡ okï¼Œå› ä¸ºå¯ä»¥é»˜è®¤å¯¹å†…å»ºç±»å‹çš„æ“ä½œç»ä¸ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚å¦åˆ™çš„è¯ï¼Œå¯èƒ½æ¶‰åŠç”¨æˆ·ç±»å‹çš„æ‹·è´ï¼Œè€Œæˆ‘ä»¬ä¸ºäº†é«˜æ•ˆçš„äº¤æ¢ï¼Œæ­¤æ—¶åº”å½“æä¾›ä¸€ä¸ªæ›´é«˜æ•ˆçš„ swap ç‰ˆæœ¬ï¼Œä½¿ç”¨æŒ‡é’ˆç±»å‹çš„äº¤æ¢æ¥é¿å…ç¼ºçœæ‹·è´å‡½æ•°çš„è¿™ä¸€ç¼ºç‚¹ï¼Œè¿™æ—¶åˆæ­£å¥½è§£å†³äº†å¯èƒ½æŠ›å‡ºå¼‚å¸¸çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç¼–ç¨‹å®è·µ&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#ç¼–ç¨‹å®è·µ&#34;&gt;#&lt;/a&gt; ç¼–ç¨‹å®è·µ&lt;/h2&gt;
&lt;h3 id=&#34;item26-åªè¦æœ‰å¯èƒ½å°±æ¨è¿Ÿå˜é‡å®šä¹‰&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item26-åªè¦æœ‰å¯èƒ½å°±æ¨è¿Ÿå˜é‡å®šä¹‰&#34;&gt;#&lt;/a&gt; item26 åªè¦æœ‰å¯èƒ½å°±æ¨è¿Ÿå˜é‡å®šä¹‰&lt;/h3&gt;
&lt;p&gt;ä¼˜ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¢åŠ ç¨‹åºå¯è¯»æ€§&lt;/li&gt;
&lt;li&gt;é¿å…å˜é‡çš„å®šä¹‰å’ŒçœŸæ­£ä½¿ç”¨ç¦»å¾—å¤ªè¿œï¼Œä½¿å¾—ä¸­é—´å‡ºç° return æˆ–æŠ›å‡ºå¼‚å¸¸ç­‰æƒ…å†µè€Œå¯¼è‡´å˜é‡ç™½ç™½æ„é€ å’Œææ„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;item27-å°†å¼ºåˆ¶è½¬å‹è½¬åˆ°æœ€å°‘&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item27-å°†å¼ºåˆ¶è½¬å‹è½¬åˆ°æœ€å°‘&#34;&gt;#&lt;/a&gt; item27 å°†å¼ºåˆ¶è½¬å‹è½¬åˆ°æœ€å°‘&lt;/h3&gt;
&lt;p&gt;å¦‚æœå¼ºåˆ¶è½¬å‹ä½¿ç”¨å¤ªå¤šï¼Œå¾ˆå¯èƒ½ä»£ç çš„è®¾è®¡å°±æœ‰é—®é¢˜ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é¿å…å¼ºåˆ¶è½¬å‹çš„æ»¥ç”¨ï¼Œç‰¹åˆ«æ˜¯åœ¨æ€§èƒ½æ•æ„Ÿçš„ä»£ç ä¸­åº”ç”¨ dynamic_castsï¼Œå¦‚æœä¸€ä¸ªè®¾è®¡éœ€è¦å¼ºåˆ¶è½¬å‹ï¼Œè®¾æ³•å¼€å‘ä¸€ä¸ªæ²¡æœ‰å¼ºåˆ¶è½¬å‹çš„ä¾¯é€‰æ–¹æ¡ˆã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœå¿…é¡»è¦å¼ºåˆ¶è½¬å‹ï¼Œè®¾æ³•å°†å®ƒéšè—åœ¨ä¸€ä¸ªå‡½æ•°ä¸­ã€‚å®¢æˆ·å¯ä»¥ç”¨è°ƒç”¨é‚£ä¸ªå‡½æ•°æ¥ä»£æ›¿åœ¨ä»–ä»¬è‡ªå·±çš„ä»£ç ä¸­åŠ å…¥å¼ºåˆ¶è½¬å‹ã€‚&lt;/li&gt;
&lt;li&gt;å°½é‡ç”¨ C++ é£æ ¼çš„å¼ºåˆ¶è½¬å‹ (å››ç§ cast) æ›¿æ¢ C é£æ ¼çš„å¼ºåˆ¶è½¬å‹ã€‚å®ƒä»¬æ›´å®¹æ˜“è¢«æ³¨æ„åˆ°ï¼Œè€Œä¸”ä»–ä»¬åšçš„äº‹æƒ…ä¹Ÿæ›´åŠ æ˜ç¡®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;item28-é¿å…è¿”å›å¯¹è±¡å†…éƒ¨æ„ä»¶çš„å¥æŸ„å¼•ç”¨æŒ‡é’ˆæˆ–è¿­ä»£å™¨&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item28-é¿å…è¿”å›å¯¹è±¡å†…éƒ¨æ„ä»¶çš„å¥æŸ„å¼•ç”¨æŒ‡é’ˆæˆ–è¿­ä»£å™¨&#34;&gt;#&lt;/a&gt; item28 é¿å…è¿”å›å¯¹è±¡å†…éƒ¨æ„ä»¶çš„å¥æŸ„ï¼ˆå¼•ç”¨ï¼ŒæŒ‡é’ˆï¼Œæˆ–è¿­ä»£å™¨ï¼‰&lt;/h3&gt;
&lt;p&gt;ç”±äºç¼–è¯‘å™¨çš„äºŒè¿›åˆ¶å¸¸é‡æ€§ (item3)ï¼Œå°†æˆå‘˜å‡½æ•°å£°æ˜ä¸º const æœ‰æ—¶ä»ç„¶ä¼šç ´åå°è£…æ€§ï¼Œæ¯”å¦‚è¿”å›å†…éƒ¨ç§æœ‰æˆå‘˜çš„æŒ‡é’ˆæˆ–å¼•ç”¨ç­‰ï¼Œå¦‚æœä¸å¾—ä¸è¿™æ ·åšï¼Œåº”è¯¥åŒæ—¶å°†æˆå‘˜å‡½æ•°çš„è¿”å›å€¼è®¾ä¸º constã€‚&lt;/p&gt;
&lt;h3 id=&#34;item29-äº‰å–å¼‚å¸¸å®‰å…¨exception-safeçš„ä»£ç &#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item29-äº‰å–å¼‚å¸¸å®‰å…¨exception-safeçš„ä»£ç &#34;&gt;#&lt;/a&gt; item29  äº‰å–å¼‚å¸¸å®‰å…¨ï¼ˆexception-safeï¼‰çš„ä»£ç &lt;/h3&gt;
&lt;p&gt;æ ¹æ®ä½œè€…çš„å®šä¹‰ï¼Œä¸€ä¸ªå¼‚å¸¸å®‰å…¨å‡½æ•°æŠ›å‡ºå¼‚å¸¸æ—¶ï¼Œåº”å½“ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ²¡æœ‰èµ„æºæ³„éœ²&lt;/li&gt;
&lt;li&gt;ä¸å…è®¸æ•°æ®ç»“æ„æ¶åŒ–ï¼Œå³å¯¹ç›¸å…³çš„å˜é‡ä½¿ç”¨ä¸åº”è¯¥å‘ç”Ÿæœªå®šä¹‰æˆ–é”™è¯¯çš„è¡Œä¸ºã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;for example:&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;PrettyMenu&lt;/span&gt;&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;changeBackground&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;istream&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; imgSrc&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token function&#34;&gt;lock&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt;mutex&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;                      &lt;span class=&#34;token comment&#34;&gt;// acquire mutex (as in Item 14)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;delete&lt;/span&gt; bgImage&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;                    &lt;span class=&#34;token comment&#34;&gt;// get rid of old background&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token operator&#34;&gt;++&lt;/span&gt;imageChanges&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;                    &lt;span class=&#34;token comment&#34;&gt;// update image change count&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  bgImage &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;token type-opencl-host-cpp keyword&#34;&gt;Image&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;imgSrc&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;       &lt;span class=&#34;token comment&#34;&gt;// install new background&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token function&#34;&gt;unlock&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt;mutex&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;                    &lt;span class=&#34;token comment&#34;&gt;// release mutex&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªå¯¹ä¸€ä¸ªèœå•å¯¹è±¡èƒŒæ™¯å›¾ç‰‡æ›´æ¢çš„å‡½æ•°ï¼Œå½“ new æ“ä½œç¬¦æŠ›å‡ºå¼‚å¸¸æ—¶ï¼Œmutex å¯¹è±¡å¹¶æ²¡æœ‰è¢«é‡Šæ”¾ï¼Œå¹¶ä¸” bgImage æŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªè¢«åˆ é™¤çš„å¯¹è±¡ï¼Œåˆ†åˆ«è¿åäº†ç¬¬ä¸€æ¡å’Œç¬¬äºŒæ¡åŸåˆ™ï¼Œå› æ­¤è¿™ä¸ªå‡½æ•°ä¸æ˜¯å¼‚å¸¸å®‰å…¨çš„ã€‚&lt;/p&gt;
&lt;p&gt;è¾¾åˆ°ç¬¬ä¸€æ¡åŸåˆ™æœ‰ä¸€ä¸ªååˆ†ç®€å•ä¸”é€šç”¨çš„æ–¹æ³•ï¼Œå°±æ˜¯åˆ©ç”¨ C++ çš„ RAII æœºåˆ¶ (item 13)ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;PrettyMenu&lt;/span&gt;&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;changeBackground&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;istream&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; imgSrc&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  Lock &lt;span class=&#34;token function&#34;&gt;ml&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt;mutex&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;                 	&lt;span class=&#34;token comment&#34;&gt;// å¼‚å¸¸æŠ›å‡ºæ—¶ä¼šè§¦å‘ Lock ç±»çš„ææ„&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;delete&lt;/span&gt; bgImage&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token operator&#34;&gt;++&lt;/span&gt;imageChanges&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  bgImage &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;token type-opencl-host-cpp keyword&#34;&gt;Image&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;imgSrc&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;æ¥ç€å¤„ç†æ•°æ®ç»“æ„æ¶åŒ–é—®é¢˜ï¼Œä½œè€…è®¤ä¸ºï¼Œå¼‚å¸¸å®‰å…¨å¯¹è¿™ä¸€é—®é¢˜éœ€è¦æä¾›ä»¥ä¸‹ä¸‰ç§ä¸åŒçº§åˆ«çš„ä¿è¯ä¹‹ä¸€ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å‡½æ•°æä¾›åŸºæœ¬ä¿è¯ï¼ˆthe basic guaranteeï¼‰ï¼Œå…è¯ºå¦‚æœä¸€ä¸ªå¼‚å¸¸è¢«æŠ›å‡ºï¼Œç¨‹åºä¸­å‰©ä¸‹çš„æ¯ä¸€ä»¶ä¸œè¥¿éƒ½å¤„äºåˆæ³•çŠ¶æ€ã€‚æ²¡æœ‰å¯¹è±¡æˆ–æ•°æ®ç»“æ„è¢«ç ´åï¼Œè€Œä¸”æ‰€æœ‰çš„å¯¹è±¡éƒ½å¤„äºå†…éƒ¨è°ƒå’ŒçŠ¶æ€ï¼ˆæ‰€æœ‰çš„ç±»ä¸å˜é‡éƒ½è¢«æ»¡è¶³ï¼‰ã€‚å³ï¼š&lt;strong&gt;æŠ›å‡ºå¼‚å¸¸åï¼Œç¨‹åºçš„ä¸€éƒ¨åˆ†çŠ¶æ€å¯èƒ½è¢«æ”¹å˜ï¼Œä½†ä»å¤„äºåˆæ³•çŠ¶æ€ï¼Œä¸è‡³äºå½±å“ç¨‹åºç»§ç»­è¿è¡Œï¼Œæˆ–è€…ç¨‹åºå‘˜æœ‰åŠæ³•æ•æ‰è¿™äº›æ”¹å˜å¹¶åšå‡ºåº”å¯¹ã€‚&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;å‡½æ•°æä¾›å¼ºåŠ›ä¿è¯ï¼ˆthe strong guaranteeï¼‰ï¼Œå³å¦‚æœä¸€ä¸ªå¼‚å¸¸è¢«æŠ›å‡ºï¼Œç¨‹åºçš„çŠ¶æ€å°±åƒå®ƒä»¬ä»æ²¡æœ‰è¢«è°ƒç”¨è¿‡ä¸€æ ·ã€‚&lt;/li&gt;
&lt;li&gt;å‡½æ•°æä¾›ä¸æŠ›å‡ºä¿è¯ï¼ˆthe nothrow guaranteeï¼‰ï¼Œå…è¯ºå†³ä¸æŠ›å‡ºå¼‚å¸¸ï¼Œå¯¹å†…å»ºç±»å‹çš„æ“ä½œä¸€èˆ¬éƒ½æ˜¯ nothrow çš„ï¼Œè¿™æ˜¯å¼‚å¸¸å®‰å…¨ä»£ç ä¸­å¿…ä¸å¯å°‘çš„åŸºç¡€æ„ä»¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;** å¯¹äº programmer æ¥è¯´ï¼Œä»–ä»¬æä¾›çš„å‡½æ•°åº”å½“å°½é‡è¾¾åˆ°æœ€é«˜çº§åˆ«çš„ä¿è¯ã€‚** ä¸€èˆ¬æ¥è¯´ï¼Œç¨‹åºå‘˜æä¾›çš„å‡½æ•°åªè¦ä¸åŒ…å«å†…å»ºç±»å‹ï¼ŒåŸºæœ¬å°±åªèƒ½æä¾›å¼ºåŠ›ä¿è¯äº†ã€‚&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥æ˜¯ä¸€ä¸ªæä¾›å¼ºåŠ›ä¿è¯çš„é€šç”¨ç­–ç•¥ï¼šcopy-and-swapï¼Œè¿™å¸¸å¸¸é…åˆ pimpl åŸåˆ™ (pointer to implementation) ä½¿ç”¨ï¼Œå®ƒçš„æ­¥éª¤ä¸€èˆ¬æ˜¯è¿™æ ·çš„ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å°†æ¯ä¸€ä¸ªå¯¹è±¡ä¸­çš„å…¨éƒ¨æ•°æ®ä» â€œçœŸæ­£çš„â€ å¯¹è±¡ä¸­æ”¾å…¥åˆ°ä¸€ä¸ªå•ç‹¬çš„å®ç°å¯¹è±¡ä¸­ï¼Œç„¶åå°†ä¸€ä¸ªæŒ‡å‘å®ç°å¯¹è±¡çš„æŒ‡é’ˆäº¤ç»™çœŸæ­£å¯¹è±¡ã€‚(pimpl)&lt;/li&gt;
&lt;li&gt;åšå‡ºä¸€ä¸ªä½ è¦æ”¹å˜çš„å¯¹è±¡çš„æ‹·è´ï¼Œç„¶ååœ¨è¿™ä¸ªæ‹·è´ä¸Šåšå‡ºå…¨éƒ¨æ‰€éœ€çš„æ”¹å˜ã€‚å¦‚æœæ”¹å˜è¿‡ç¨‹ä¸­çš„æŸäº›æ“ä½œæŠ›å‡ºäº†å¼‚å¸¸ï¼Œæœ€åˆçš„å¯¹è±¡ä¿æŒä¸å˜ã€‚åœ¨æ‰€æœ‰çš„æ”¹å˜å®Œå…¨æˆåŠŸä¹‹åï¼Œå°†è¢«æ”¹å˜çš„å¯¹è±¡å’Œæœ€åˆçš„å¯¹è±¡åœ¨ä¸€ä¸ª&lt;strong&gt;ä¸ä¼šæŠ›å‡ºå¼‚å¸¸&lt;/strong&gt;çš„æ“ä½œä¸­è¿›è¡Œäº¤æ¢ã€‚(copy-and-swap)&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¯¹äº PrettyMenu çš„ changeBackground å‡½æ•°æ¥è¯´ï¼Œå¯ä»¥è¿™æ ·å†™ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;PrettyMenu&lt;/span&gt;&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;changeBackground&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;istream&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; imgSrc&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;using&lt;/span&gt; std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;swap&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;                            &lt;span class=&#34;token comment&#34;&gt;// see Item 25&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  Lock &lt;span class=&#34;token function&#34;&gt;ml&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt;mutex&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;                            &lt;span class=&#34;token comment&#34;&gt;// acquire the mutex&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;tr1&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;shared_ptr&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;PMImpl&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;                &lt;span class=&#34;token comment&#34;&gt;//copy obj. dataï¼ŒPMImpl æ˜¯ä¸€ä¸ªåŒ…å«æ‰€æœ‰æ•°æ®çš„å·¥å…·ç±»ã€‚&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token function&#34;&gt;pNew&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;PMImpl&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt;pImpl&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  pNew&lt;span class=&#34;token operator&#34;&gt;-&gt;&lt;/span&gt;bgImage&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;reset&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;token type-opencl-host-cpp keyword&#34;&gt;Image&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;imgSrc&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;     &lt;span class=&#34;token comment&#34;&gt;// modify the copy&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token operator&#34;&gt;++&lt;/span&gt;pNew&lt;span class=&#34;token operator&#34;&gt;-&gt;&lt;/span&gt;imageChanges&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token function&#34;&gt;swap&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;pImpl&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; pNew&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;                          &lt;span class=&#34;token comment&#34;&gt;// swap the new&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;                                              &lt;span class=&#34;token comment&#34;&gt;// data into place&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;15&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;16&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;h3 id=&#34;item30-ç†è§£-inline-åŒ–çš„ä»‹å…¥å’Œæ’é™¤&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item30-ç†è§£-inline-åŒ–çš„ä»‹å…¥å’Œæ’é™¤&#34;&gt;#&lt;/a&gt; item30 ç†è§£ inline åŒ–çš„ä»‹å…¥å’Œæ’é™¤&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;æ­£ç¡®ç†è§£ inlineï¼š inline åªæ˜¯å¯¹äºç¼–è¯‘å™¨çš„è¯·æ±‚ï¼Œæœ€ç»ˆå‡½æ•°æ˜¯å¦ inline å–å†³äºç¼–è¯‘å™¨ã€‚&lt;/li&gt;
&lt;li&gt;æ­£ç¡®ä½¿ç”¨ inlineï¼š
&lt;ul&gt;
&lt;li&gt;æ­£ç¡®è¯„ä¼° inline çš„æ•ˆæœï¼šinline ä¸€èˆ¬åªé€‚ç”¨äºå°çš„ï¼Œé¢‘ç¹è°ƒç”¨çš„å‡½æ•°ä¸Šï¼Œè¿™ç§å‡½æ•°ç¼–è¯‘åçš„æœºå™¨æŒ‡ä»¤æœ€å¥½å°äºä¸€ä¸ªå‡½æ•°è°ƒç”¨äº§ç”Ÿçš„æœºå™¨æŒ‡ä»¤ã€‚ä¸€ä¸ªè¾ƒå¤§çš„å‡½æ•° inline åŒ–ä¼šå¸¦æ¥ä»£ç è†¨èƒ€ï¼Œå¯¼è‡´é™„åŠ çš„åˆ†é¡µè°ƒåº¦ï¼Œå‡å°‘æŒ‡ä»¤ç¼“å­˜å‘½ä¸­ç‡ï¼Œä»¥åŠéšä¹‹è€Œæ¥çš„æ€§èƒ½æŸå¤±ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹äºå¤´æ–‡ä»¶ä¸­å‡½æ•°çš„ inline æ…é‡ï¼Œå› ä¸º inline å‡½æ•°å±•å¼€çš„ç‰¹æ€§ï¼Œä¸å¤´æ–‡ä»¶ä¸å®ç°ç›¸åˆ†ç¦»çš„æ¨¡å¼ç›¸æ¯”ï¼Œä½¿ç”¨ inline å‡½æ•°çš„ clients å¿…é¡»åœ¨ inline å‡½æ•°æ›´æ”¹åè¿›è¡Œé‡æ–°ç¼–è¯‘ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;item-31-æœ€å°åŒ–æ–‡ä»¶ä¹‹é—´çš„ç¼–è¯‘ä¾èµ–&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item-31-æœ€å°åŒ–æ–‡ä»¶ä¹‹é—´çš„ç¼–è¯‘ä¾èµ–&#34;&gt;#&lt;/a&gt; item 31 æœ€å°åŒ–æ–‡ä»¶ä¹‹é—´çš„ç¼–è¯‘ä¾èµ–&lt;/h3&gt;
&lt;p&gt;ä¸ºäº†å°½é‡å‡å°æ›´æ”¹ä¸€ä¸ªå®ç°æ‰€å¼•èµ·çš„é“¾å¼ååº”ï¼Œéœ€è¦æŒæ¡æœ€å°åŒ–ç¼–è¯‘ä¾èµ–çš„ç²¾é«“ï¼šåªè¦èƒ½å®ç°ï¼Œå°±è®©ä½ çš„å¤´æ–‡ä»¶ç‹¬ç«‹è‡ªä¸»ï¼Œå¦‚æœä¸èƒ½ï¼Œå°±ä¾èµ–å…¶å®ƒæ–‡ä»¶ä¸­çš„å£°æ˜ï¼Œè€Œä¸æ˜¯å®šä¹‰ã€‚å…¶å®ƒæ¯ä¸€ä»¶äº‹éƒ½ä»è¿™ä¸ªç®€å•çš„è®¾è®¡ç­–ç•¥äº§ç”Ÿã€‚æ‰€ä»¥ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;å½“å¯¹è±¡çš„å¼•ç”¨å’ŒæŒ‡é’ˆå¯ä»¥åšåˆ°æ—¶å°±é¿å…ä½¿ç”¨å¯¹è±¡ã€‚ä»…éœ€ä¸€ä¸ªç±»å‹çš„å£°æ˜ï¼Œä½ å°±å¯ä»¥å®šä¹‰åˆ°è¿™ä¸ªç±»å‹çš„å¼•ç”¨æˆ–æŒ‡é’ˆã€‚è€Œå®šä¹‰ä¸€ä¸ªç±»å‹çš„å¯¹è±¡å¿…é¡»è¦å­˜åœ¨è¿™ä¸ªç±»å‹çš„å®šä¹‰ã€‚å› ä¸ºæŒ‡é’ˆå’Œå¼•ç”¨çš„å¤§å°æ˜¯å›ºå®šçš„ï¼Œè€Œå¯¹è±¡çš„å¤§å°ä¸å›ºå®šï¼Œåœ¨ç¼–è¯‘æ—¶éœ€è¦çŸ¥é“å¯¹è±¡å…·ä½“å¤§å°çš„åœºæ™¯æ—¶ä¸é€‚ç”¨ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç”¨å¯¹ç±»å£°æ˜çš„ä¾èµ–æ›¿ä»£å¯¹ç±»å®šä¹‰çš„ä¾èµ–ã€‚å£°æ˜ä¸€ä¸ªä½¿ç”¨ä¸€ä¸ªç±»çš„å‡½æ•°æ—¶ç»å¯¹ä¸éœ€è¦æœ‰è¿™ä¸ªç±»çš„å®šä¹‰ï¼Œå³ä½¿è¿™ä¸ªå‡½æ•°é€šè¿‡ä¼ å€¼æ–¹å¼ä¼ é€’æˆ–è¿”å›è¿™ä¸ªç±»&lt;/p&gt;
&lt;p&gt;æ¯”å¦‚&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;Date&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;                        &lt;span class=&#34;token comment&#34;&gt;// class declaration&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;Date &lt;span class=&#34;token function&#34;&gt;today&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;                      &lt;span class=&#34;token comment&#34;&gt;// fine â€” no definition&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;clearAppointments&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;Date d&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;    &lt;span class=&#34;token comment&#34;&gt;// of Date is needed&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¸ºå£°æ˜å’Œå®šä¹‰åˆ†åˆ«æä¾›å¤´æ–‡ä»¶ã€‚ä¸ºäº†ä¾¿äºåšæŒä¸Šé¢çš„æŒ‡å¯¼æ–¹é’ˆï¼Œå¤´æ–‡ä»¶éœ€è¦æˆå¯¹å‡ºç°ï¼šä¸€ä¸ªç”¨äºå£°æ˜ï¼Œå¦ä¸€ä¸ªç”¨äºå®šä¹‰ã€‚å½“ç„¶ï¼Œè¿™äº›æ–‡ä»¶å¿…é¡»ä¿æŒä¸€è‡´ã€‚å¦‚æœä¸€ä¸ªå£°æ˜åœ¨ä¸€ä¸ªåœ°æ–¹è¢«æ”¹å˜äº†ï¼Œå®ƒå¿…é¡»åœ¨ä¸¤å¤„éƒ½è¢«æ”¹å˜ã€‚å¾—å‡ºçš„ç»“æœæ˜¯ï¼šåº“çš„å®¢æˆ·åº”è¯¥æ€»æ˜¯ #include ä¸€ä¸ªå£°æ˜æ–‡ä»¶ï¼Œè€Œä¸æ˜¯è‡ªå·±å‰å‘å£°æ˜æŸäº›ä¸œè¥¿ï¼Œè€Œåº“çš„ä½œè€…åº”è¯¥æä¾›ä¸¤ä¸ªå¤´æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œæƒ³è¦å£°æ˜ today å’Œ clearAppointments çš„ Date çš„å®¢æˆ·ä¸åº”è¯¥åƒå‰é¢å±•ç¤ºçš„é‚£æ ·æ‰‹åŠ¨å‰å‘å£°æ˜ Dateã€‚æ›´åˆé€‚çš„æ˜¯ï¼Œå®ƒåº”è¯¥ #include é€‚å½“çš„ç”¨äºå£°æ˜çš„å¤´æ–‡ä»¶ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token macro property&#34;&gt;&lt;span class=&#34;token directive-hash&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;token directive keyword&#34;&gt;include&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#34;datefwd.h&#34;&lt;/span&gt;            &lt;span class=&#34;token comment&#34;&gt;// header file declaring (but not&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;                               &lt;span class=&#34;token comment&#34;&gt;// defining) class Date&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;Date &lt;span class=&#34;token function&#34;&gt;today&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;                   &lt;span class=&#34;token comment&#34;&gt;// as before&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;clearAppointments&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;Date d&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;åŸºäºä»¥ä¸Šæƒ³æ³•çš„ä¸¤ä¸ªæ–¹æ³•æ˜¯ Handle ç±»å’Œ Interface ç±»ï¼ŒHandle ç±»å’Œ Interface ç±»ä»å®ç°ä¸­åˆ†ç¦»å‡ºæ¥å£ã€‚&lt;/p&gt;
&lt;p&gt;Handle ç±»é‡‡ç”¨ pimpl æ€æƒ³ï¼Œå°†æ‰€æœ‰çš„æ“ä½œéƒ½äº¤ç»™å†…éƒ¨æŒ‡é’ˆæŒ‡å‘çš„å¯¹è±¡æ¥åšï¼Œç¼ºç‚¹æ˜¯å¯èƒ½éœ€è¦æä¾›æ›´å¤šçš„æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;Interface ç±»åˆ©ç”¨çº¯è™šå‡½æ•°çš„æ€æƒ³ï¼Œç±»ä¼¼ Java Interface çš„ä½¿ç”¨ï¼Œéœ€è¦æä¾›æ–¹æ³•æ¥åˆ¶ä½œå…·ä½“çš„å®ä½“ç±»ã€‚&lt;/p&gt;
&lt;h2 id=&#34;é¢å‘å¯¹è±¡è®¾è®¡&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#é¢å‘å¯¹è±¡è®¾è®¡&#34;&gt;#&lt;/a&gt; é¢å‘å¯¹è±¡è®¾è®¡&lt;/h2&gt;
&lt;h3 id=&#34;item-32-ç¡®ä¿-public-inheritance-æ¨¡æ‹Ÿ-is-a&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item-32-ç¡®ä¿-public-inheritance-æ¨¡æ‹Ÿ-is-a&#34;&gt;#&lt;/a&gt; item 32 ç¡®ä¿ public inheritance æ¨¡æ‹Ÿ &amp;quot;is-a&amp;quot;&lt;/h3&gt;
&lt;p&gt;ä¸åŒäº private ç»§æ‰¿çš„ä¸€ç‚¹æ˜¯ï¼Œpublic ç»§æ‰¿ä½“ç³»ä¸­ï¼Œå­ç±»å°†æ‹¥æœ‰çˆ¶ç±»æä¾›çš„æ‰€æœ‰ public æ¥å£ã€‚å³ public inheritance æ„å‘³ç€ &amp;quot;is-a&amp;quot;ã€‚é€‚ç”¨äº base classes çš„æ¯ä¸€ä»¶äº‹ä¹Ÿé€‚ç”¨äº derived classesï¼Œå› ä¸ºæ¯ä¸€ä¸ª derived class object éƒ½æ˜¯ä¸€ä¸ª base class objectã€‚&lt;/p&gt;
&lt;p&gt;å…¶å®è¿™æ˜¯è®¾è®¡æ¨¡å¼å…­å¤§åŸåˆ™ä¸­ â€œé‡Œæ°æ›¿æ¢åŸåˆ™â€ çš„ C++ å®è·µï¼Œé‡Œæ°æ›¿æ¢åŸåˆ™æŒ‡å‡ºï¼šåº”ç”¨ç¨‹åºä¸­ä»»ä½•çˆ¶ç±»å¯¹è±¡å‡ºç°çš„åœ°æ–¹ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥ç”¨å…¶å­ç±»çš„å¯¹è±¡æ¥æ›¿æ¢ã€‚ä¸€ä¸ªç»å…¸çš„åä¾‹æ˜¯ä¸€ä¸ª public ç»§æ‰¿è‡ªé•¿æ–¹å½¢ç±»çš„æ­£æ–¹å½¢ç±»ï¼Œæ­£æ–¹å½¢ç±»ä¸èƒ½åƒé•¿æ–¹å½¢é‚£æ ·éšæ„åœ°æ”¹å˜é•¿åº¦ä¸å®½åº¦ï¼Œå³ setLength () å’Œ setWidth () æ¥å£åœ¨æ­£æ–¹å½¢ç±»çš„ä½¿ç”¨ä¸­ä¼šå‡ºç°éº»çƒ¦ï¼Œå› æ­¤æ­£æ–¹å½¢ç±»ä¸åº”è¯¥ public ç»§æ‰¿è‡ªé•¿æ–¹å½¢ç±»ã€‚&lt;/p&gt;
&lt;h3 id=&#34;item33-é¿å…è¦†ç›–é€šè¿‡ç»§æ‰¿å¾—åˆ°çš„åç§°&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item33-é¿å…è¦†ç›–é€šè¿‡ç»§æ‰¿å¾—åˆ°çš„åç§°&#34;&gt;#&lt;/a&gt; item33  é¿å…è¦†ç›– â€œé€šè¿‡ç»§æ‰¿å¾—åˆ°çš„åç§°â€&lt;/h3&gt;
&lt;p&gt;åœ¨å­ç±»ä¸­ï¼Œåªè¦å£°æ˜äº†ä¸€ä¸ªä¸çˆ¶ç±»åŒåçš„å‡½æ•°ï¼Œæ¯”å¦‚ &lt;code&gt;foo()&lt;/code&gt; ï¼Œé‚£ä¹ˆçˆ¶ç±»ä¸­æ‰€æœ‰çš„&lt;strong&gt;åŒåå‡½æ•°&lt;/strong&gt;éƒ½ä¼šå˜å¾—ä¸å¯è§ï¼Œä¸ç®¡æ˜¯ &lt;code&gt;foo()&lt;/code&gt;  è¿˜æ˜¯ &lt;code&gt;foo(int)&lt;/code&gt;  è¿˜æ˜¯ &lt;code&gt;foo() const&lt;/code&gt; ,&lt;strong&gt; ä½œç”¨åŸŸçº§åˆ«çš„é®ç›–æ˜¯å’Œå‚æ•°ç±»å‹ä»¥åŠæ˜¯å¦è™šå‡½æ•°æ— å…³çš„&lt;/strong&gt;ï¼Œè¿™å¯èƒ½æœ‰äº›è¿åç›´è§‰ï¼Œä½œè€…çš„è§£é‡Šæ˜¯è¿™æ˜¯ä¸ºäº†é˜²æ­¢ programmer åœ¨ä»æŸä¸ªåº“æˆ–è€…æŸä¸ªæ¡†æ¶ä¸­åˆ›å»ºä¸€ä¸ªæ´¾ç”Ÿç±»æ—¶ï¼Œåœ¨ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹ä»é¥è¿œçš„æŸä¸ª base classes ä¸­ç»§æ‰¿äº†åŒåçš„å…¶å®ƒå‡½æ•° (over loads) çš„æƒ…å†µã€‚ä¸å¹¸çš„æ˜¯ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ programmer æ˜¯éœ€è¦ç»§æ‰¿è¿™äº› overloads çš„ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹å¦‚ä½•ç»•è¿‡ C++ å¯¹ â€œé€šè¿‡ç»§æ‰¿å¾—åˆ°çš„åå­—â€ çš„ç¼ºçœçš„è¦†ç›–æœºåˆ¶å‘¢ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨ using declarations, è¿™å°†ä½¿çˆ¶ç±»çš„æ‰€æœ‰åŒåå‡½æ•°å¯è§:&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;Derived&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token base-clause&#34;&gt;&lt;span class=&#34;token keyword&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;Base&lt;/span&gt;&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;using&lt;/span&gt; Base&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;mf1&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;       &lt;span class=&#34;token comment&#34;&gt;// make all things in Base named mf1 and mf3&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;using&lt;/span&gt; Base&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;mf3&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;       &lt;span class=&#34;token comment&#34;&gt;// visible (and public) in Derived&#39;s scope&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;virtual&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;mf1&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;mf3&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;mf4&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;è¿˜æœ‰ä¸€ç§æƒ…å†µæ˜¯ï¼Œåªæƒ³è®© base classes çš„æŸä¸ªåŒåå‡½æ•°å¯è§ï¼ˆè¿™æ˜¯ä¸åº”è¯¥å‘ç”Ÿåœ¨ public ç»§æ‰¿ä¸­çš„ï¼Œå¦åˆ™å°†è¿å item32ï¼‰ï¼Œè¿™ç§æ—¶å€™åº”å½“ä½¿ç”¨ä¸€ä¸ªç®€å•çš„ forwarding function:&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;Derived&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token base-clause&#34;&gt;&lt;span class=&#34;token keyword&#34;&gt;private&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;Base&lt;/span&gt;&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;virtual&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;mf1&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;                   &lt;span class=&#34;token comment&#34;&gt;// forwarding function; implicitly&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;Base&lt;/span&gt;&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;mf1&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;                     &lt;span class=&#34;token comment&#34;&gt;// inline (see Item 30)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;Derived d&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;int&lt;/span&gt; x&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;d&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;mf1&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;                               &lt;span class=&#34;token comment&#34;&gt;// fine, calls Derived::mf1&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;d&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;mf1&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;x&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;                              &lt;span class=&#34;token comment&#34;&gt;// error! Base::mf1() is hidden&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;æ€»ç»“ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;derived classes ä¸­çš„åå­—ä¼šè¦†ç›– base classes ä¸­çš„åå­—ï¼Œåœ¨ public ç»§æ‰¿ä¸­ ä¸­ï¼Œè¿™ä¸åº”å½“å‘ç”Ÿã€‚&lt;/li&gt;
&lt;li&gt;ä¸ºäº†ä½¿éšè—çš„ name é‡æ–°å¯è§ï¼Œä½¿ç”¨ using declarations æˆ–è€… forwarding functionsï¼ˆè½¬è°ƒå‡½æ•°ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;item-34-åŒºåˆ†-inheritance-of-interfaceæ¥å£ç»§æ‰¿å’Œ-inheritance-of-implementationå®ç°ç»§æ‰¿&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item-34-åŒºåˆ†-inheritance-of-interfaceæ¥å£ç»§æ‰¿å’Œ-inheritance-of-implementationå®ç°ç»§æ‰¿&#34;&gt;#&lt;/a&gt; item 34 åŒºåˆ† inheritance of interfaceï¼ˆæ¥å£ç»§æ‰¿ï¼‰å’Œ inheritance of implementationï¼ˆå®ç°ç»§æ‰¿ï¼‰&lt;/h3&gt;
&lt;p&gt;ç»§æ‰¿çš„æƒ…å†µå¯ä»¥åˆ†ä¸ºä¸‰ç§ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ç»§æ‰¿äº†ä¸€ä¸ªçº¯è™šå‡½æ•°ï¼ˆPure virtual functionsï¼‰&lt;/li&gt;
&lt;li&gt;ç»§æ‰¿äº†ä¸€ä¸ªç®€å•è™šæ‹Ÿå‡½æ•°ï¼ˆSimple virtual functions)&lt;/li&gt;
&lt;li&gt;ç»§æ‰¿äº†ä¸€ä¸ªéè™šæ‹Ÿå‡½æ•° ï¼ˆNon-virtual functions)&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä»€ä¹ˆæ—¶å€™è¯¥é€‰å“ªç§æ–¹å¼å‘¢ï¼Ÿä½œè€…æä¾›äº†è¿™ä¸‰ç§ç»§æ‰¿æ–¹å¼çš„è¯­ä¹‰ï¼Œä»¥ä¾›é€‰æ‹©çš„æ—¶å€™å‚è€ƒ&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;çº¯è™šå‡½æ•°æŒ‡å®š&lt;strong&gt;ä»…æœ‰æ¥å£è¢«ç»§æ‰¿&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;ç®€å•è™šæ‹Ÿå‡½æ•°æŒ‡å®š æ¥å£ç»§æ‰¿åŠ ä¸Š &lt;strong&gt;ç¼ºçœå®ç°ç»§æ‰¿&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;éè™šæ‹Ÿå‡½æ•°æŒ‡å®šæ¥å£ç»§æ‰¿åŠ ä¸Š&lt;strong&gt;å¼ºåˆ¶å®ç°ç»§æ‰¿&lt;/strong&gt;ï¼Œå‚è§ item32 å¯¹äºéè™šæ‹Ÿå‡½æ•°ä¸€èˆ¬æ¥è¯´ä¸èƒ½é‡å†™å®ƒã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;item35-è€ƒè™‘å¯é€‰çš„è™šå‡½æ•°çš„æ›¿ä»£æ–¹æ³•&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item35-è€ƒè™‘å¯é€‰çš„è™šå‡½æ•°çš„æ›¿ä»£æ–¹æ³•&#34;&gt;#&lt;/a&gt; item35 è€ƒè™‘å¯é€‰çš„è™šå‡½æ•°çš„æ›¿ä»£æ–¹æ³•&lt;/h3&gt;
&lt;p&gt;è™šå‡½æ•°ç®€å•æ˜“æ‡‚åˆåŠŸèƒ½å¼ºå¤§ï¼Œæ— è„‘çš„ä½¿ç”¨è™šå‡½æ•°å¯ä»¥è§£å†³å¤§éƒ¨åˆ†é—®é¢˜ï¼Œä½†æ˜¯åœ¨ä¸€äº›ç‰¹æ®Šåœºæ™¯ä¸­ï¼Œä»¥ä¸‹å‡ ä¸ªæ–¹æ³•å¯èƒ½ä¼šæ›´å¥½ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;non-virtual interface (NVI) idiomï¼ˆéè™šæ‹Ÿæ¥å£æƒ¯ç”¨æ³•ï¼‰ï¼Œè¿™ä¸ªæ–¹æ³•ä¸»å¼ å°†è™šå‡½æ•°å£°æ˜ä¸ºç§æœ‰ï¼Œç„¶åé€šè¿‡éè™šæ‹Ÿçš„ public æ¥å£è°ƒç”¨å®ƒã€‚è¿™ä¸ªæ–¹æ³•é€‚åˆç»§æ‰¿ä½“ç³»çš„å„ä¸ªæ–¹æ³•åŒ…å«ç›¸åŒçš„å¤„ç†é€»è¾‘çš„æ—¶å€™ï¼Œå°†ä¸åŒçš„éƒ¨åˆ†æ”¾åœ¨è™šå‡½æ•°ä¸­ï¼Œè®©è™šå‡½æ•°ä¸“æ³¨äºå®ç°å„ä¸ªç±»ä¸åŒçš„éƒ¨åˆ†ï¼Œç„¶ååœ¨è°ƒç”¨å®ƒçš„ public æ¥å£ä¸­åšä¸€äº›é€šç”¨çš„æ§åˆ¶å·¥ä½œï¼Œfor exampleï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;GameCharacter&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;healthValue&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt;               &lt;span class=&#34;token comment&#34;&gt;// derived classes do not redefine&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;                                     &lt;span class=&#34;token comment&#34;&gt;// this - see Item 36&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;                                 &lt;span class=&#34;token comment&#34;&gt;// do &#34;before&#34; stuff - see below&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;int&lt;/span&gt; retVal &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;doHealthValue&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;       &lt;span class=&#34;token comment&#34;&gt;// do the real work&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;                                 &lt;span class=&#34;token comment&#34;&gt;// do &#34;after&#34; stuff - see below&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;return&lt;/span&gt; retVal&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;15&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;16&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;private&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;17&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;virtual&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;doHealthValue&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt;     &lt;span class=&#34;token comment&#34;&gt;// derived classes may redefine this&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;18&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;19&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;                                 &lt;span class=&#34;token comment&#34;&gt;// default algorithm for calculating&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;20&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;                                     &lt;span class=&#34;token comment&#34;&gt;// character&#39;s health&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;21&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;åœ¨è°ƒç”¨è™šæ‹Ÿçš„ doHeadthValue æ–¹æ³•ä¹‹å‰å’Œä¹‹åå¯ä»¥åšä¸€äº›å¤„ç†ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½¿ç”¨ä½œä¸ºæˆå‘˜å˜é‡çš„å‡½æ•°æŒ‡é’ˆï¼Œä¸€ä¸ªç­–ç•¥æ¨¡å¼çš„ç®€å•å®ç°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½¿ç”¨ std::function å¯¹è±¡ï¼Œè¿™æ ·åšçš„ä¼˜ç‚¹æ˜¯ function å¯¹è±¡å¯ä»¥è¢«å¤šä¸ªä¸åŒç±»è°ƒç”¨ï¼Œæ›´æ–¹ä¾¿ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;item36-ç»ä¸è¦é‡å®šä¹‰ä¸€ä¸ª-inherited-non-virtual-functioné€šè¿‡ç»§æ‰¿å¾—åˆ°çš„éè™šæ‹Ÿå‡½æ•°&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item36-ç»ä¸è¦é‡å®šä¹‰ä¸€ä¸ª-inherited-non-virtual-functioné€šè¿‡ç»§æ‰¿å¾—åˆ°çš„éè™šæ‹Ÿå‡½æ•°&#34;&gt;#&lt;/a&gt; item36 ç»ä¸è¦é‡å®šä¹‰ä¸€ä¸ª inherited non-virtual functionï¼ˆé€šè¿‡ç»§æ‰¿å¾—åˆ°çš„éè™šæ‹Ÿå‡½æ•°ï¼‰&lt;/h3&gt;
&lt;p&gt;å¯ä»¥å‚ç…§ item32 ä¸é‡Œå¼æ›¿æ¢æ³•åˆ™ï¼Œåœ¨èƒ½ä½¿ç”¨çˆ¶ç±»çš„åœ°æ–¹ä¸€å®šèƒ½å¤Ÿä½¿ç”¨å­ç±»ï¼Œè€Œä¸ä¼šç ´åç¨‹åºçš„è¡Œä¸ºã€‚åŒæ—¶ï¼Œå¦‚æœä½ çš„å‡½æ•°æœ‰å¤šæ€è°ƒç”¨çš„éœ€æ±‚ï¼Œä¸€å®šè®°å¾—æŠŠå®ƒè®¾ä¸ºè™šå‡½æ•°ï¼Œå¦åˆ™åŸºç±»æŒ‡é’ˆæŒ‡å‘å­ç±»å¯¹è±¡çš„æ—¶å€™æ˜¯ä¸ä¼šè°ƒç”¨åˆ°å­ç±»é‡è½½è¿‡çš„å‡½æ•°çš„ï¼Œå¾ˆå¯èƒ½ä¼šå‡ºé”™ã€‚&lt;/p&gt;
&lt;h3 id=&#34;item37-ç»ä¸è¦é‡å®šä¹‰ä¸€ä¸ªå‡½æ•°çš„-inherited-default-parameter-valueé€šè¿‡ç»§æ‰¿å¾—åˆ°çš„ç¼ºçœå‚æ•°å€¼&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item37-ç»ä¸è¦é‡å®šä¹‰ä¸€ä¸ªå‡½æ•°çš„-inherited-default-parameter-valueé€šè¿‡ç»§æ‰¿å¾—åˆ°çš„ç¼ºçœå‚æ•°å€¼&#34;&gt;#&lt;/a&gt; item37 ç»ä¸è¦é‡å®šä¹‰ä¸€ä¸ªå‡½æ•°çš„ inherited default parameter valueï¼ˆé€šè¿‡ç»§æ‰¿å¾—åˆ°çš„ç¼ºçœå‚æ•°å€¼ï¼‰&lt;/h3&gt;
&lt;p&gt;åŸå› æ˜¯ç¼ºçœå‚æ•°æ˜¯é™æ€ç»‘å®šçš„ï¼Œä½†æ˜¯å¯¹äºè™šå‡½æ•°æ˜¯åŠ¨æ€ç»‘å®šçš„ï¼Œå› æ­¤é€šè¿‡çˆ¶ç±»æŒ‡é’ˆè°ƒç”¨å­ç±»çš„è™šå‡½æ•°çš„æ—¶å€™ï¼Œä¼šå‘ç”Ÿå®ç°æŒ‰ç…§å­ç±»ï¼Œä½†ç¼ºçœå‚æ•°æŒ‰ç…§çˆ¶ç±»çš„æƒ…å†µã€‚åŒæ—¶åŒ item36ï¼Œé™¤äº†è™šå‡½æ•°å¤–ï¼Œä¹Ÿå¸Œæœ›å­ç±»çš„è¡¨ç°ä¸çˆ¶ç±»ç›¸åŒã€‚&lt;/p&gt;
&lt;h3 id=&#34;item38-é€šè¿‡-compositionæ¨¡æ‹Ÿ-has-aæˆ–-is-implemented-in-terms-ofæ˜¯æ ¹æ®å®ç°çš„&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item38-é€šè¿‡-compositionæ¨¡æ‹Ÿ-has-aæˆ–-is-implemented-in-terms-ofæ˜¯æ ¹æ®å®ç°çš„&#34;&gt;#&lt;/a&gt; item38 é€šè¿‡ composition æ¨¡æ‹Ÿ &amp;quot;has-a&amp;quot; æˆ– &amp;quot;is-implemented-in-terms-of&amp;quot;ï¼ˆæ˜¯æ ¹æ®â€¦â€¦ å®ç°çš„ï¼‰&lt;/h3&gt;
&lt;p&gt;ä½¿ç”¨å¤åˆä»£æ›¿ç»§æ‰¿æ˜¯ä¸€ä¸ªç»å…¸çš„è®¾è®¡æ€æƒ³ï¼Œèƒ½æé«˜ç¨‹åºè¿è¡Œçš„æ€§èƒ½ã€‚å‡è®¾ A ç±»æ‹¥æœ‰ä¸€ä¸ª B ç±»çš„æˆå‘˜å˜é‡ï¼Œè¯­ä¹‰æ˜¯ A ç±»æ˜¯æ ¹æ® B ç±»å®ç°çš„ï¼Œè¿™å¾ˆå®¹æ˜“ç†è§£ã€‚&lt;/p&gt;
&lt;h3 id=&#34;item39-è°¨æ…ä½¿ç”¨-private-inheritanceç§æœ‰ç»§æ‰¿&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item39-è°¨æ…ä½¿ç”¨-private-inheritanceç§æœ‰ç»§æ‰¿&#34;&gt;#&lt;/a&gt; item39 è°¨æ…ä½¿ç”¨ private inheritanceï¼ˆç§æœ‰ç»§æ‰¿ï¼‰&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬çŸ¥é“ï¼Œpublic ç»§æ‰¿ä»£è¡¨ç€ &amp;quot;is a&amp;quot; å…³ç³»ï¼Œprivate ç»§æ‰¿ä»£è¡¨ç€ has a æˆ–è€…è¯´ &amp;quot;æ˜¯æ ¹æ®... å®ç°çš„&amp;quot; å…³ç³»ã€‚å› ä¸º private ç»§æ‰¿ä¸ä¼šæ‹¥æœ‰ä¸çˆ¶ç±»ç›¸åŒçš„æ¥å£ï¼Œä½†æ˜¯å¯ä»¥å¤ç”¨çˆ¶ç±»çš„æ‰€æœ‰æ¥å£ä¸æˆå‘˜å˜é‡æ¥å¯¹å¤–æä¾›æ–°åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯æ ¹æ® item38ï¼Œå¤åˆä¹Ÿæ‹¥æœ‰ä¸ç§æœ‰ç»§æ‰¿åŒæ ·çš„è¯­ä¹‰ï¼Œé‚£ä¹ˆå¦‚ä½•åœ¨è¿™ä¸¤è€…ä¸­è¿›è¡Œé€‰æ‹©å‘¢ï¼Ÿç»“è®ºæ˜¯è¿™æ ·çš„ï¼š== åªè¦ä½ èƒ½å°±ç”¨ compositionï¼ˆå¤åˆï¼‰ï¼Œåªæœ‰åœ¨ç»å¯¹å¿…è¦çš„æ—¶å€™æ‰ç”¨ private inheritanceï¼ˆç§æœ‰ç»§æ‰¿ï¼‰ã€‚== è¿™é‡Œç»å¯¹å¿…è¦çš„æƒ…å†µä¸»è¦æ˜¯å½“ protected members å’Œè™šå‡½æ•°å‚ä¸è¿›æ¥çš„æ—¶å€™ã€‚æ¯”å¦‚è¯´ï¼Œå½“ä½ è¦å¤„ç†çš„ä¸¤ä¸ª classesï¼ˆç±»ï¼‰ä¸å…·æœ‰ is-aï¼ˆæ˜¯ä¸€ä¸ªï¼‰çš„å…³ç³»ï¼Œè€Œä¸”å…¶ä¸­çš„ä¸€ä¸ªè¿˜éœ€è¦è®¿é—®å¦ä¸€ä¸ªçš„ protected membersï¼ˆä¿æŠ¤æˆå‘˜ï¼‰æˆ–éœ€è¦é‡å®šä¹‰ä¸€ä¸ªæˆ–æ›´å¤šä¸ªå®ƒçš„ è™šå‡½æ•°ã€‚ç”šè‡³åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¹Ÿçœ‹åˆ° public inheritance å’Œ containment çš„æ··åˆä½¿ç”¨é€šå¸¸ä¹Ÿèƒ½äº§ç”Ÿä½ æƒ³è¦çš„è¡Œä¸ºï¼Œè™½ç„¶æœ‰æ›´å¤§çš„è®¾è®¡å¤æ‚åº¦ã€‚&lt;/p&gt;
&lt;p&gt;ä¸¤ä¸ªåŸå› ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;private ç»§æ‰¿çš„å­ç±»å¦‚æœè¿˜å¯èƒ½è¢«æ–°çš„ç±»ç»§æ‰¿çš„æ—¶å€™ï¼Œå¯èƒ½éœ€è¦ç¦æ­¢å½“å‰ç±»çš„è™šå‡½æ•°è¢«é‡è½½ï¼Œä½œè€…ä½¿ç”¨äº†å¤æ‚çš„æ–¹æ³•ï¼Œä½† C++ 11 åä½¿ç”¨ final å…³é”®å­—ä¾¿å¯è§£å†³æ­¤é—®é¢˜ï¼Œæ•…æ­¤åŸå› å¯å¿½ç•¥&lt;/li&gt;
&lt;li&gt;item31 æåˆ°çš„æœ€å°åŒ–ç¼–è¯‘ä¾èµ–çš„é—®é¢˜ï¼Œå¤åˆå¯ä»¥åªéœ€è¦å¯¹è±¡çš„å£°æ˜ï¼Œè€Œç»§æ‰¿å¿…é¡»çœ‹åˆ°å¯¹è±¡çš„å®šä¹‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;item40-è°¨æ…ä½¿ç”¨å¤šç»§æ‰¿&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item40-è°¨æ…ä½¿ç”¨å¤šç»§æ‰¿&#34;&gt;#&lt;/a&gt; item40 è°¨æ…ä½¿ç”¨å¤šç»§æ‰¿&lt;/h3&gt;
&lt;p&gt;èƒ½é¿å…ä½¿ç”¨å¤šç»§æ‰¿å°±é¿å…ä½¿ç”¨å¤šç»§æ‰¿ï¼Œç›®å‰è¿˜æ²¡æœ‰çœ‹åˆ°è¿‡å¿…é¡»ä½¿ç”¨å¤šç»§æ‰¿çš„ä¾‹å­ï¼Œjava åˆ é™¤äº†å¤šç»§æ‰¿è²Œä¼¼ä¹Ÿæ²¡ä»€ä¹ˆé—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;æ€»ç»“ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¤šç»§æ‰¿æ¯” single inheritance å•ç»§æ‰¿æ›´å¤æ‚ã€‚å®ƒèƒ½å¯¼è‡´æ–°çš„æ­§ä¹‰é—®é¢˜ï¼ˆçˆ¶ç±»ä¸­æ‹¥æœ‰åŒå members) å’Œå¯¹ virtual inheritanceï¼ˆè™šç»§æ‰¿ï¼‰çš„éœ€è¦ã€‚&lt;/li&gt;
&lt;li&gt;virtual inheritanceï¼ˆè™šç»§æ‰¿ï¼‰å¢åŠ äº† size å’Œ speed æˆæœ¬ï¼Œä»¥åŠ initializationï¼ˆåˆå§‹åŒ–ï¼‰å’Œ assignmentï¼ˆèµ‹å€¼ï¼‰çš„å¤æ‚åº¦ã€‚å½“ virtual base classesï¼ˆè™šæ‹ŸåŸºç±»ï¼‰æ²¡æœ‰æ•°æ®æ—¶å®ƒæ˜¯æœ€é€‚ç”¨çš„ã€‚&lt;/li&gt;
&lt;li&gt;å¤šç»§æ‰¿æœ‰åˆç†çš„ç”¨é€”ã€‚æ¯”å¦‚ä¸€ç§æ–¹æ¡ˆæ¶‰åŠç»„åˆä»ä¸€ä¸ª Interface classï¼ˆæ¥å£ç±»ï¼‰çš„å…¬æœ‰ç»§æ‰¿å’Œä»ä¸€ä¸ªæœ‰åŠ©äºå®ç°çš„ ç±»çš„ ç§æœ‰ç»§æ‰¿ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æ¨¡æ¿&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#æ¨¡æ¿&#34;&gt;#&lt;/a&gt; æ¨¡æ¿&lt;/h2&gt;
&lt;p&gt;è¿™ä¸€ç« çš„å†…å®¹å€¼å¾—åå¤é˜…è¯»ï¼Œè¡Œæ–‡ç¯ç¯ç›¸æ‰£ï¼Œå®åœ¨æ˜¯éš¾ä»¥å†æµ“ç¼©äº†ã€‚&lt;/p&gt;
&lt;h3 id=&#34;item41-ç†è§£-implicit-interfaceséšå¼æ¥å£å’Œ-compile-time-polymorphismç¼–è¯‘æœŸå¤šæ€&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item41-ç†è§£-implicit-interfaceséšå¼æ¥å£å’Œ-compile-time-polymorphismç¼–è¯‘æœŸå¤šæ€&#34;&gt;#&lt;/a&gt; item41 ç†è§£ implicit interfacesï¼ˆéšå¼æ¥å£ï¼‰å’Œ compile-time polymorphismï¼ˆç¼–è¯‘æœŸå¤šæ€ï¼‰&lt;/h3&gt;
&lt;p&gt;ç±»å’Œæ¨¡ç‰ˆçš„ä¸€ä¸ªå…±åŒç‰¹ç‚¹æ˜¯å®ƒä»¬éƒ½æ”¯æŒæ¥å£å’Œå¤šæ€ï¼ŒåŒºåˆ«æ˜¯ç±»æ”¯æŒæ˜¾å¼æ¥å£å’Œè¿è¡Œæ—¶å¤šæ€ï¼ˆé€šè¿‡è™šå‡½æ•°å®ç°ï¼‰ï¼Œè€Œæ¨¡ç‰ˆæ”¯æŒéšå¼æ¥å£å’Œç¼–è¯‘æœŸå¤šæ€ã€‚&lt;/p&gt;
&lt;p&gt;è¿è¡Œæ—¶å¤šæ€ä¸ç¼–è¯‘å™¨å¤šæ€å¾ˆå¥½ç†è§£ã€‚æ˜¾å¼æ¥å£çš„æ„æ€æ˜¯ï¼Œä¸€ä¸ªç±»æä¾›äº†å“ªäº›æ¥å£ï¼Œåœ¨å®ƒçš„ç±»å®šä¹‰ä¹‹ä¸­å°±èƒ½å…¨éƒ¨æ‰¾åˆ°ï¼Œæ‰€ä»¥æ˜¯æ˜¾å¼çš„ã€‚è€Œå¯¹äºæ¨¡æ¿æ¥è¯´ï¼Œå‚æ•°åŒ–çš„ç±»éœ€è¦æä¾›çš„æ¥å£æ˜¯åŸºäºåˆæ³•è¡¨è¾¾å¼çš„ï¼Œæ¯”å¦‚ä¸€ä¸ªè¡¨è¾¾å¼ &lt;code&gt;if (templateClass.size() &amp;gt; 10)&lt;/code&gt; , æˆ‘ä»¬å¯ä»¥&lt;strong&gt;æ¨æµ‹&lt;/strong&gt;å‡ºè¿™ä¸ªå‚æ•°åŒ–çš„ç±»å¿…é¡»æä¾› templateClass æ¥å£ï¼Œæ‰€ä»¥è¯´æ˜¯éšå¼çš„ã€‚&lt;/p&gt;
&lt;h3 id=&#34;item42-ç†è§£-typename-çš„ä¸¤ä¸ªå«ä¹‰&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item42-ç†è§£-typename-çš„ä¸¤ä¸ªå«ä¹‰&#34;&gt;#&lt;/a&gt; item42 ç†è§£ typename çš„ä¸¤ä¸ªå«ä¹‰&lt;/h3&gt;
&lt;p&gt;ç¬¬ä¸€ä¸ªå«ä¹‰ï¼Œç”¨äºæ¨¡ç‰ˆå£°æ˜ä¸­ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;Widget&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;                 &lt;span class=&#34;token comment&#34;&gt;// uses &#34;class&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;Widget&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;              &lt;span class=&#34;token comment&#34;&gt;// uses &#34;typename&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;è¿™é‡Œçš„ &lt;code&gt;typename&lt;/code&gt;  å’Œ &lt;code&gt;class&lt;/code&gt;  åœ¨è¯­æ³•å±‚é¢ä¸Šæ²¡æœ‰ä»€ä¹ˆä¸åŒï¼Œéƒ½ç”¨åœ¨å£°æ˜ä¸€ä¸ªæ¨¡æ¿ç±»å‹å‚æ•°çš„æ—¶å€™ã€‚ä½†æ˜¯ï¼Œåœ¨æƒ¯ä¾‹ä¸Šï¼Œä¸€èˆ¬ä¼šä½¿ç”¨ &lt;code&gt;typename&lt;/code&gt; ï¼Œè¡¨ç¤ºç±»å‹ T ä¸ä»…å¯ä»¥æ˜¯ä¸€ä¸ªç±»ç±»å‹ï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶å®ƒç±»å‹ï¼Œä»…å½“æ¨¡æ¿ç±»å‹å‚æ•°ä»…æ¥å—ç”¨æˆ·å®šä¹‰ç±»å‹çš„æ—¶å€™ä½¿ç”¨ classã€‚&lt;/p&gt;
&lt;p&gt;ç¬¬äºŒä¸ªå«ä¹‰ï¼Œç”¨ &lt;code&gt;typename&lt;/code&gt;  å»æ ‡è¯† nested dependent type namesï¼ˆåµŒå¥—ä¾èµ–ç±»å‹åï¼‰&lt;/p&gt;
&lt;p&gt;è¿™é‡Œè®¾è®¡ä¸¤ä¸ªæ¦‚å¿µï¼š&lt;strong&gt;åµŒå¥—&lt;/strong&gt;å’Œ&lt;strong&gt;ä¾èµ–&lt;/strong&gt;ï¼Œfor exampleï¼Œè¿™ä¸ªä»£ç è¿˜ä¸èƒ½é€šè¿‡ç¼–è¯‘ï¼Œåªæ˜¯ä¸¾ä¾‹ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;C&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;                            &lt;span class=&#34;token comment&#34;&gt;// print 2nd element in&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;print2nd&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; C&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; container&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;               &lt;span class=&#34;token comment&#34;&gt;// container;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;                                               &lt;span class=&#34;token comment&#34;&gt;// this is not valid C++!&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;container&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;&gt;=&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;     C&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;const_iterator &lt;span class=&#34;token function&#34;&gt;iter&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;container&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;begin&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;token comment&#34;&gt;// get iterator to 1st element&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;     &lt;span class=&#34;token operator&#34;&gt;++&lt;/span&gt;iter&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;                                    &lt;span class=&#34;token comment&#34;&gt;// move iter to 2nd element&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;     &lt;span class=&#34;token keyword&#34;&gt;int&lt;/span&gt; value &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt;iter&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;                         &lt;span class=&#34;token comment&#34;&gt;// copy that element to an int&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;     std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;cout &lt;span class=&#34;token operator&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; value&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;                        &lt;span class=&#34;token comment&#34;&gt;// print the int&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;è¿™ä¸ªå‡½æ•°ä¸­æœ‰ä¸¤ä¸ªå±€éƒ¨å˜é‡ï¼Œ &lt;code&gt;iter&lt;/code&gt;  å’Œ  &lt;code&gt;value&lt;/code&gt; ã€‚ &lt;code&gt;iter &lt;/code&gt; çš„ç±»å‹æ˜¯  &lt;code&gt;C::const_iterator&lt;/code&gt; ï¼Œä¸€ä¸ªä¾èµ–äºæ¨¡æ¿å‚æ•° C çš„ç±»å‹ã€‚ä¸€ä¸ª æ¨¡æ¿ä¸­çš„ä¾èµ–äºä¸€ä¸ª æ¨¡æ¿å‚æ•°çš„åå­—è¢«ç§°ä¸º dependent namesï¼ˆä¾èµ–åå­—ï¼‰ã€‚å½“ä¸€ä¸ª dependent namesï¼ˆä¾èµ–åå­—ï¼‰åµŒå¥—åœ¨ä¸€ä¸ªç±»çš„å†…éƒ¨æ—¶ï¼Œæˆ‘ç§°å®ƒä¸º nested dependent nameï¼ˆåµŒå¥—ä¾èµ–åå­—ï¼‰ã€‚C::const_iterator æ˜¯ä¸€ä¸ª nested dependent nameï¼ˆåµŒå¥—ä¾èµ–åå­—ï¼‰ã€‚å®é™…ä¸Šï¼Œå®ƒæ˜¯ä¸€ä¸ª nested dependent type nameï¼ˆåµŒå¥—ä¾èµ–ç±»å‹åï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ&lt;strong&gt;ä¸€ä¸ªæ¶‰åŠåˆ°ä¸€ä¸ª typeï¼ˆç±»å‹ï¼‰çš„ nested dependent nameï¼ˆåµŒå¥—ä¾èµ–åå­—ï¼‰&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;print2nd ä¸­çš„å¦ä¸€ä¸ª å±€éƒ¨å˜é‡ &lt;code&gt;value&lt;/code&gt;  å…·æœ‰ int ç±»å‹ã€‚int æ˜¯ä¸€ä¸ªä¸ä¾èµ–äºä»»ä½•æ¨¡æ¿å‚æ•°çš„åå­—ã€‚è¿™æ ·çš„åå­—è¢«ç§°ä¸º non-dependent namesï¼ˆéä¾èµ–åå­—ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ä¸Šé¢çš„è¿™ä¸ªä»£ç é”™åœ¨ &lt;code&gt;C::const_iterator iter(container.begin());&lt;/code&gt;  è¿™ä¸€è¡Œï¼Œåœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä¹‹æ‰€ä»¥è§‰å¾—èƒ½å¤Ÿå£°æ˜ &lt;code&gt;iter&lt;/code&gt;  è¿™ä¸ªå˜é‡ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬é»˜è®¤ C::const_iterator æ˜¯ä¸€ä¸ªç±»å‹ï¼Œä¹Ÿå°±æ˜¯è¯´ &lt;code&gt;iter&lt;/code&gt;  çš„å£°æ˜ä»…åœ¨ &lt;code&gt;C::const_iterator&lt;/code&gt;  æ˜¯ä¸€ä¸ªç±»å‹æ—¶æ‰æœ‰æ„ä¹‰ï¼Œä½†æ˜¯åœ¨ç¼–è¯‘å™¨çœ‹æ¥è¿™æ˜¯ä¸å¯¹çš„ï¼Œç¼–è¯‘å™¨ä¼šè®¤ä¸º C::const_iterator å¯èƒ½æ˜¯ C ä¸­çš„ä¸€ä¸ªé™æ€æ•°æ®æˆå‘˜ï¼Œå› ä¸ºç¼–è¯‘å™¨ä¼šè€ƒè™‘æ‰€æœ‰å¯èƒ½çš„è¾“å…¥ï¼Œ** å› æ­¤åœ¨ C è¿˜ä¸æ˜¯å·²çŸ¥çš„æ—¶å€™ï¼Œå®ƒä¼šå‡å®šåµŒå¥—ä¾èµ–åå­—ä¸æ˜¯ä¸€ä¸ª type (ç±»å‹)ã€‚** å› æ­¤ä¸ºäº†å£°æ˜ &lt;code&gt;iter&lt;/code&gt;  å˜é‡ï¼Œæˆ‘ä»¬å¿…é¡»å‘Šè¯‰ç¼–è¯‘å™¨ &lt;code&gt; C::const_iterator&lt;/code&gt;  æ˜¯ä¸€ä¸ªç±»å‹ï¼Œæˆ‘ä»¬å°† &lt;code&gt;typename&lt;/code&gt;  æ”¾åœ¨è¿™ä¸ªå£°æ˜çš„å‰é¢æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;C&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;                           &lt;span class=&#34;token comment&#34;&gt;// this is valid C++&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;print2nd&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; C&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; container&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;container&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;&gt;=&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;C&lt;/span&gt;&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;const_iterator &lt;span class=&#34;token function&#34;&gt;iter&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;container&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;begin&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;è¿™å°±æ˜¯ &lt;code&gt;typename&lt;/code&gt;  çš„ç¬¬äºŒä¸ªå«ä¹‰ï¼Œ &lt;code&gt;typename &lt;/code&gt; å‰ç½®äºåµŒå¥—ä¾èµ–ç±»å‹åã€‚ä½†è¿™ä¸€è§„åˆ™ä¹Ÿæœ‰ä¸¤ä¸ªä¾‹å¤–ï¼š&lt;/p&gt;
&lt;p&gt;&lt;code&gt;typename &lt;/code&gt; ä¸å¿…å‰ç½®äºåœ¨ä¸€ä¸ª list of base classesï¼ˆåŸºç±»åˆ—è¡¨ï¼‰ä¸­çš„æˆ–è€…åœ¨ä¸€ä¸ª member initialization listï¼ˆæˆå‘˜åˆå§‹åŒ–åˆ—è¡¨ï¼‰ä¸­ä½œä¸ºä¸€ä¸ª base classes identifierï¼ˆåŸºç±»æ ‡è¯†ç¬¦ï¼‰çš„ nested dependent type nameï¼ˆåµŒå¥—ä¾èµ–ç±»å‹åï¼‰ã€‚å¾ˆæ‹—å£ï¼Œä½†ä¾‹å­å¾ˆç®€å•ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;Derived&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token base-clause&#34;&gt;&lt;span class=&#34;token keyword&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;Base&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token class-name&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;token class-name&#34;&gt;Nested&lt;/span&gt;&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt; &lt;span class=&#34;token comment&#34;&gt;// åŸºç±»åˆ—è¡¨ä¸­ typename not&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;                                 &lt;span class=&#34;token comment&#34;&gt;// allowed&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;explicit&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;Derived&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;int&lt;/span&gt; x&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;Base&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;T&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;Nested&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;x&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;                  &lt;span class=&#34;token comment&#34;&gt;// åˆå§‹åŒ–åˆ—è¡¨ä¸­çš„åŸºç±»æ ‡è¯†ç¬¦&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;                                     &lt;span class=&#34;token comment&#34;&gt;// : typename not allowed&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;Base&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;T&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;Nested temp&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;      &lt;span class=&#34;token comment&#34;&gt;// use of nested dependent type&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;                                 &lt;span class=&#34;token comment&#34;&gt;// name not in a base class list or&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;                                     &lt;span class=&#34;token comment&#34;&gt;// as a base class identifier in a&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;                                   &lt;span class=&#34;token comment&#34;&gt;// mem. init. list: typename required&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼Œæ¶‰åŠ &lt;code&gt;typedef&lt;/code&gt;  ä¸ &lt;code&gt;typename&lt;/code&gt; ï¼ŒåŒæ—¶è¿˜éœ€è¦ä¸€ç‚¹ç‚¹æ¨¡æ¿å…ƒç¼–ç¨‹çš„çŸ¥è¯†ã€‚&lt;/p&gt;
&lt;p&gt;å‡è®¾æˆ‘ä»¬åœ¨å†™ä¸€ä¸ªå–å¾—ä¸€ä¸ª iterator çš„ å‡½æ•°æ¨¡æ¿ï¼Œè€Œä¸”æˆ‘ä»¬è¦åšä¸€ä¸ª iterator æŒ‡å‘çš„å¯¹è±¡çš„å±€éƒ¨æ‹·è´ tempï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·åšï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;IterT&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;workWithIterator&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;IterT iter&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;iterator_traits&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;IterT&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;value_type &lt;span class=&#34;token function&#34;&gt;temp&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt;iter&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;è¿™é‡Œ &lt;code&gt;typename std::iterator_traits&amp;lt;IterT&amp;gt;::value_type&lt;/code&gt;  å®åœ¨å¤ªé•¿äº†ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨è¿™ç§è¯­æ³•ç®€åŒ–å®ƒï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;IterT&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;workWithIterator&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;IterT iter&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;typedef&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;iterator_traits&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;IterT&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;value_type value_type&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  value_type &lt;span class=&#34;token function&#34;&gt;temp&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt;iter&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;æœ‰ç‚¹æ€ªï¼Œä½†æ˜¯è¿™æ˜¯åˆç†çš„ï¼Œå¯ä»¥å¾ˆå¿«çš„ä¹ æƒ¯è¿™ç§è¯­æ³•ï¼Œå› ä¸ºè¾“ä¸€é•¿ä¸² typename + ç±»å‹å¤ªéº»çƒ¦äº†&lt;/p&gt;
&lt;h3 id=&#34;item-43äº†è§£å¦‚ä½•è®¿é—®-templatized-base-classesæ¨¡æ¿åŒ–åŸºç±»ä¸­çš„åå­—&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item-43äº†è§£å¦‚ä½•è®¿é—®-templatized-base-classesæ¨¡æ¿åŒ–åŸºç±»ä¸­çš„åå­—&#34;&gt;#&lt;/a&gt; item 43 äº†è§£å¦‚ä½•è®¿é—® templatized base classesï¼ˆæ¨¡æ¿åŒ–åŸºç±»ï¼‰ä¸­çš„åå­—&lt;/h3&gt;
&lt;p&gt;åœ¨æ¨¡æ¿ç±»çš„ç»§æ‰¿ä½“ç³»ä¸­ï¼Œå­ç±»ä¸èƒ½åƒ Object-oriented C++ é‚£æ ·ç›´æ¥ä½¿ç”¨çˆ¶ç±»çš„æ–¹æ³•ï¼Œè¿™æ˜¯æ¨¡æ¿å…·æœ‰ç‰¹åŒ–çš„ç‰¹æ€§å¼•èµ·çš„é—®é¢˜ï¼Œå³&lt;strong&gt;é’ˆå¯¹æŸä¸ªç±»å‹è¿›è¡Œçš„ç‰¹åŒ–ï¼Œè¿™ä¸ªç‰¹åŒ–åçš„ç±»ä¸å…¶ä»–é€šè¿‡ç›¸åŒæ¨¡æ¿çš„ç±»å¯èƒ½æ‹¥æœ‰ä¸åŒçš„æ–¹æ³•&lt;/strong&gt;ï¼Œå› æ­¤ C++ æ‹’ç»æ¨¡ç‰ˆæ´¾ç”Ÿç±»å¯¹æ¨¡ç‰ˆåŸºç±»æ–¹æ³•çš„ç›´æ¥ä½¿ç”¨ï¼Œå› æ­¤ï¼Œç¨‹åºå‘˜éœ€è¦å‘ç¼–è¯‘å™¨ä¿è¯ä»»ä½•åç»§çš„ base class templateï¼ˆåŸºç±»æ¨¡æ¿ï¼‰çš„ specializationsï¼ˆç‰¹åŒ–ï¼‰éƒ½å°†æ”¯æŒ general templateï¼ˆé€šç”¨æ¨¡æ¿ï¼‰æä¾›çš„ interfaceï¼ˆæ¥å£ï¼‰ï¼Œå¦‚æœä¿è¯è¢«è¯å®ä¸æˆç«‹ï¼ŒçœŸç›¸å°†åœ¨åç»§çš„ç¼–è¯‘è¿‡ç¨‹ä¸­æš´éœ²ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™ã€‚&lt;/p&gt;
&lt;p&gt;ä¿è¯çš„æ–¹æ³•æœ‰ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç»ç”± &amp;quot;this-&amp;gt;&amp;quot; å‰ç¼€&lt;/li&gt;
&lt;li&gt;ç»ç”± using declarations&lt;/li&gt;
&lt;li&gt;ç»ç”±ä¸€ä¸ª explicit base class qualificationï¼ˆæ˜¾å¼åŸºç±»é™å®šï¼‰å¼•ç”¨ base class templatesï¼ˆåŸºç±»æ¨¡æ¿ï¼‰ä¸­çš„åå­—ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ¯”å¦‚æƒ³è¦ä½¿ç”¨åŸºç±»æ¨¡æ¿çš„ &lt;code&gt;sendClear(...)&lt;/code&gt;  å‡½æ•°ï¼Œç›´æ¥ä½¿ç”¨ &lt;code&gt;sendClear()&lt;/code&gt;  ä¸è¡Œï¼Œè€Œä¸‹é¢è¿™äº›è¯­æ³•æ‰æ˜¯æ­£ç¡®çš„ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;Company&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;LoggingMsgSender&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token base-clause&#34;&gt;&lt;span class=&#34;token keyword&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;MsgSender&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token class-name&#34;&gt;Company&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;sendClearMsg&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; MsgInfo&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; info&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    write &lt;span class=&#34;token string&#34;&gt;&#34;before sending&#34;&lt;/span&gt; info to the log&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;-&gt;&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;sendClear&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;info&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;                &lt;span class=&#34;token comment&#34;&gt;// okay, assumes that&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;                                          &lt;span class=&#34;token comment&#34;&gt;// sendClear will be inherited&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    write &lt;span class=&#34;token string&#34;&gt;&#34;after sending&#34;&lt;/span&gt; info to the log&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;15&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;16&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;17&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;18&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;Company&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;LoggingMsgSender&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token base-clause&#34;&gt;&lt;span class=&#34;token keyword&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;MsgSender&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token class-name&#34;&gt;Company&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;using&lt;/span&gt; MsgSender&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;Company&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;sendClear&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;   &lt;span class=&#34;token comment&#34;&gt;// tell compilers to assume&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;                                    &lt;span class=&#34;token comment&#34;&gt;// that sendClear is in the&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;                                         &lt;span class=&#34;token comment&#34;&gt;// base class&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;sendClearMsg&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; MsgInfo&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; info&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token function&#34;&gt;sendClear&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;info&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;                     &lt;span class=&#34;token comment&#34;&gt;// okay, assumes that&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;                                  &lt;span class=&#34;token comment&#34;&gt;// sendClear will be inherited&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;15&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;Company&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;LoggingMsgSender&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token base-clause&#34;&gt;&lt;span class=&#34;token keyword&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;MsgSender&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token class-name&#34;&gt;Company&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;sendClearMsg&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; MsgInfo&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; info&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token class-name&#34;&gt;MsgSender&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;Company&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;sendClear&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;info&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;      &lt;span class=&#34;token comment&#34;&gt;// okay, assumes that&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;                                       &lt;span class=&#34;token comment&#34;&gt;// sendClear will be&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;                                           &lt;span class=&#34;token comment&#34;&gt;// inherited&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;h3 id=&#34;item44-ä»æ¨¡æ¿ä¸­åˆ†ç¦»å‡ºå‚æ•°æ— å…³çš„ä»£ç &#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item44-ä»æ¨¡æ¿ä¸­åˆ†ç¦»å‡ºå‚æ•°æ— å…³çš„ä»£ç &#34;&gt;#&lt;/a&gt; item44 ä»æ¨¡æ¿ä¸­åˆ†ç¦»å‡ºå‚æ•°æ— å…³çš„ä»£ç &lt;/h3&gt;
&lt;p&gt;è€ƒè™‘ä»¥ä¸‹æ±‚çŸ©é˜µå¾— invert çš„ä»£ç ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt;           &lt;span class=&#34;token comment&#34;&gt;// template for n x n matrices of&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;         std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;size_t n&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;        &lt;span class=&#34;token comment&#34;&gt;// objects of type T; see below for info&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;SquareMatrix&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;           &lt;span class=&#34;token comment&#34;&gt;// on the size_t parameter&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;invert&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;               &lt;span class=&#34;token comment&#34;&gt;// invert the matrix in place&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;SquareMatrix&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;double&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt; sm1&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;sm1&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;invert&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;                  &lt;span class=&#34;token comment&#34;&gt;// call SquareMatrix&amp;lt;double, 5&gt;::invert&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;SquareMatrix&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;double&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt; sm2&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;15&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;sm2&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;invert&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;                  &lt;span class=&#34;token comment&#34;&gt;// call SquareMatrix&amp;lt;double, 10&gt;::invert&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;è¿™é‡Œå°†æœ‰ä¸¤ä¸ª invert å‡½æ•°è¢«å®ä¾‹åŒ–ã€‚è¿™ä¸¤ä¸ªå‡½æ•°ä¸æ˜¯ç›¸åŒçš„ï¼Œå› ä¸ºä¸€ä¸ªä½œç”¨äº 5 x 5 çŸ©é˜µï¼Œè€Œå¦ä¸€ä¸ªä½œç”¨äº 10 x 10 çŸ©é˜µï¼Œä½†æ˜¯é™¤äº†å¸¸æ•° 5 å’Œ 10 ä»¥å¤–ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°æ˜¯ç›¸åŒçš„ã€‚å¾ˆæ˜æ˜¾ï¼Œè¿™é‡Œå‘ç”Ÿäº†ä»£ç è†¨èƒ€ã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤æ­£ç¡®çš„åšæ³•æ˜¯æä¾›ä¸€ä¸ªæ¨¡æ¿çˆ¶ç±»ï¼Œæ´¾ç”Ÿè‡ªè¿™ä¸ªçˆ¶ç±»çš„æ‰€æœ‰å…·æœ‰ç›¸åŒ T ç±»å‹çš„ SquareMatrix å­ç±»éƒ½å…±äº«åŒä¸€ä¸ª invert å‡½æ•°ã€‚&lt;/p&gt;
&lt;h3 id=&#34;item45-ç”¨æˆå‘˜å‡½æ•°æ¨¡æ¿æ¥å—æ‰€æœ‰å…¼å®¹ç±»å‹&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item45-ç”¨æˆå‘˜å‡½æ•°æ¨¡æ¿æ¥å—æ‰€æœ‰å…¼å®¹ç±»å‹&#34;&gt;#&lt;/a&gt; item45 ç”¨æˆå‘˜å‡½æ•°æ¨¡æ¿æ¥å—æ‰€æœ‰å…¼å®¹ç±»å‹&lt;/h3&gt;
&lt;p&gt;æœ¬åŸåˆ™çš„åœºæ™¯æ˜¯ï¼šè€ƒè™‘ä¸€ä¸ª A ç±»å‹ä¸ B ç±»å‹ï¼Œå…¶ä¸­ B ç±»å‹æ˜¯ A ç±»å‹çš„æ´¾ç”Ÿç±»ï¼Œé‚£ä¹ˆä¸€ä¸ª B ç±»å‹çš„å¯¹è±¡æˆ–æŒ‡é’ˆå¯ä»¥éšå¼çš„è½¬æ¢ä¸º A ç±»å‹çš„æŒ‡é’ˆæˆ–å¯¹è±¡ã€‚ä½†æ˜¯ï¼Œå¯¹äºæ™ºèƒ½æŒ‡é’ˆæˆ–ç±»ä¼¼åŠŸèƒ½çš„å…¶ä»–ç±»ï¼Œä¸€ä¸ª share_ptr&amp;lt;B&amp;gt; ç±»å‹å¯¹è±¡å´æ— æ³•éšå¼è½¬æ¢ä¸º share_ptr&amp;lt;A &amp;gt; ç±»å‹ï¼Œ&lt;strong&gt;å› ä¸ºåŒä¸€ä¸ªæ¨¡æ¿çš„ä¸åŒå®ä¾‹åŒ–ä¹‹é—´æ²¡æœ‰ç»§æ‰¿å…³ç³»&lt;/strong&gt;ï¼Œè™½ç„¶è¿™æ ·çš„è½¬æ¢ç¬¦åˆç›´è§‰å¹¶ä¸”å¤§å¤šæ•°æƒ…å†µä¸‹å¾ˆæœ‰ç”¨ã€‚å› æ­¤åœ¨ç”¨æˆ·å®šä¹‰ç±»å‹ä¸­æ¨¡ä»¿è¿™æ ·çš„è½¬æ¢æ˜¯æœ‰æ„ä¹‰çš„ï¼Œå¹¶ä¸”éœ€è¦ä¸€äº›æŠ€å·§ã€‚&lt;/p&gt;
&lt;p&gt;æ­£ç¡®çš„åšæ³•æ˜¯ä½¿ç”¨ä¸€ä¸ªæ¨¡æ¿æ„é€ å‡½æ•°ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;SmartPtr&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;U&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token function&#34;&gt;SmartPtr&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; SmartPtr&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;U&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; other&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;         &lt;span class=&#34;token comment&#34;&gt;// initialize this held ptr&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;heldPtr&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;other&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;             &lt;span class=&#34;token comment&#34;&gt;// with other&#39;s held ptr&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  T&lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;return&lt;/span&gt; heldPtr&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;private&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;                                     &lt;span class=&#34;token comment&#34;&gt;// built-in pointer held&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  T &lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt;heldPtr&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;                                &lt;span class=&#34;token comment&#34;&gt;// by the SmartPtr&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;ä»–æ¥å—ä»»æ„ç±»å‹çš„å…¶ä»–æ™ºèƒ½æŒ‡é’ˆï¼Œå¹¶ä¸”ä»…å½“ U ç±»å‹èƒ½éšå¼è½¬æ¢ä¸º T ç±»å‹çš„æ—¶å€™ï¼Œä»£ç èƒ½é€šè¿‡ç¼–è¯‘ï¼Œè¿™æ­£æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œèµ‹å€¼æ“ä½œä¹Ÿåº”è¯¥è¾¾åˆ°è¿™ä¸ªæ•ˆæœï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å†™å‡ºä¸‹é¢çš„ä»£ç ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;shared_ptr&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;Y&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;                                     &lt;span class=&#34;token comment&#34;&gt;// construct from&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;explicit&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;shared_ptr&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;Y &lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt; p&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;                         &lt;span class=&#34;token comment&#34;&gt;// any compatible&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;Y&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;                                     &lt;span class=&#34;token comment&#34;&gt;// built-in pointer,&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token function&#34;&gt;shared_ptr&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;shared_ptr&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;Y&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; r&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;                 &lt;span class=&#34;token comment&#34;&gt;// shared_ptr,&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;Y&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;                                     &lt;span class=&#34;token comment&#34;&gt;// weak_ptr, or&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;explicit&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;shared_ptr&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;weak_ptr&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;Y&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; r&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;          &lt;span class=&#34;token comment&#34;&gt;// auto_ptr&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;Y&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;explicit&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;shared_ptr&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;auto_ptr&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;Y&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; r&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;Y&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;                                     &lt;span class=&#34;token comment&#34;&gt;// assign from&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    shared_ptr&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;operator&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;shared_ptr&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;Y&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; r&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;      &lt;span class=&#34;token comment&#34;&gt;// any compatible&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;Y&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;                                     &lt;span class=&#34;token comment&#34;&gt;// shared_ptr or&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    shared_ptr&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;operator&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;auto_ptr&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;Y&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; r&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;              &lt;span class=&#34;token comment&#34;&gt;// auto_ptr&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;15&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;16&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆå‘˜æ¨¡æ¿å¹¶ä¸æ”¹å˜è¯­è¨€è§„åˆ™ï¼Œè€Œä¸”è§„åˆ™è§„å®šä¸€ä¸ªæ‹·è´æ„é€ å‡½æ•°æ—¶å¿…éœ€çš„è€Œæˆ‘ä»¬æ²¡æœ‰æä¾›ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªï¼Œæ‰€ä»¥&lt;strong&gt;ä¸€ä¸ªæ¨¡æ¿æ„é€ å‡½æ•°ä¸ä¼šé˜»æ­¢ç¼–è¯‘å™¨ç”Ÿæˆéæ¨¡æ¿çš„æ„é€ å‡½æ•°&lt;/strong&gt;ã€‚å› æ­¤ä¸ºäº†å…¨é¢æ”¯é…æ‹·è´æ„é€ ï¼Œæˆ‘ä»¬å¿…é¡»æ—¢å£°æ˜ä¸€ä¸ªæ¨¡æ¿æ‹·è´æ„é€ å‡½æ•°ï¼Œåˆå£°æ˜ä¸€ä¸ªå¸¸è§„çš„ï¼Œéæ¨¡æ¿çš„æ‹·è´æ„é€ å‡½æ•°ï¼Œè¿™åŒæ ·é€‚ç”¨äºèµ‹å€¼ï¼Œæ­£ç¡®çš„å®è·µåº”å½“åƒè¿™æ ·ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;shared_ptr&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token function&#34;&gt;shared_ptr&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;shared_ptr &lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; r&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;                 &lt;span class=&#34;token comment&#34;&gt;// copy constructor&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;Y&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;                                &lt;span class=&#34;token comment&#34;&gt;// generalized&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token function&#34;&gt;shared_ptr&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;shared_ptr&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;Y&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; r&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;            &lt;span class=&#34;token comment&#34;&gt;// copy constructor&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  shared_ptr&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;operator&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;shared_ptr &lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; r&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;      &lt;span class=&#34;token comment&#34;&gt;// copy assignment&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;Y&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;                                &lt;span class=&#34;token comment&#34;&gt;// generalized&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    shared_ptr&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;operator&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;shared_ptr&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;Y&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; r&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;token comment&#34;&gt;// copy assignment&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;h3 id=&#34;item46-éœ€è¦ç±»å‹è½¬æ¢æ—¶åœ¨æ¨¡æ¿å†…å®šä¹‰éæˆå‘˜å‡½æ•°&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item46-éœ€è¦ç±»å‹è½¬æ¢æ—¶åœ¨æ¨¡æ¿å†…å®šä¹‰éæˆå‘˜å‡½æ•°&#34;&gt;#&lt;/a&gt; item46 éœ€è¦ç±»å‹è½¬æ¢æ—¶åœ¨æ¨¡æ¿å†…å®šä¹‰éæˆå‘˜å‡½æ•°&lt;/h3&gt;
&lt;p&gt;æ­¤èŠ‚é’ˆå¯¹ item24 ä¸­çš„ç¤ºä¾‹å¢åŠ äº†æ‰©å±•è®¨è®º (æ¨¡æ¿åŒ– Rational å’Œ operator*)ã€‚item 24 çš„ç»“è®ºå‘Šè¯‰æˆ‘ä»¬ï¼Œéæˆå‘˜å‡½æ•°é€‚åˆåº”ç”¨åˆ°æ‰€æœ‰å‚æ•°éƒ½éœ€è¦è¿›è¡Œéšå¼ç±»å‹è½¬æ¢çš„åœºæ™¯ä¹‹ä¸­ã€‚å› æ­¤åœ¨æ¨¡æ¿ä¸­ä¹Ÿä½¿ç”¨ç›¸åŒçš„æ–¹æ³•æ˜¯å¾ˆè‡ªç„¶çš„:&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;Rational&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token function&#34;&gt;Rational&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; T&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; numerator &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt;     &lt;span class=&#34;token comment&#34;&gt;// see Item 20 for why params&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;           &lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; T&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; denominator &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;  &lt;span class=&#34;token comment&#34;&gt;// are now passed by reference&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; T &lt;span class=&#34;token function&#34;&gt;numerator&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;           &lt;span class=&#34;token comment&#34;&gt;// see Item 28 for why return&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; T &lt;span class=&#34;token function&#34;&gt;denominator&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;         &lt;span class=&#34;token comment&#34;&gt;// values are still passed by value,&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;                                  &lt;span class=&#34;token comment&#34;&gt;// Item 3 for why they&#39;re const&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; Rational&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;T&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;operator&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; Rational&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;T&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; lhs&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;                            &lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; Rational&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;T&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; rhs&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;15&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;æ­£å¦‚ item24 ä¸­æåˆ°çš„ï¼Œæˆ‘ä»¬æƒ³è¦æ”¯æŒ mixed-mode arithmeticï¼ˆæ··åˆæ¨¡å¼è¿ç®—ï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦è®©ä¸‹é¢è¿™äº›ä»£ç èƒ½å¤Ÿç¼–è¯‘ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;Rational&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;oneHalf&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token number&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;          &lt;span class=&#34;token comment&#34;&gt;// this example is from Item 24,&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;                                      &lt;span class=&#34;token comment&#34;&gt;// except Rational is now a template&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;Rational&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt; result &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; oneHalf &lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;   &lt;span class=&#34;token comment&#34;&gt;// error! won&#39;t compile&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;ç¼–è¯‘å¤±è´¥çš„åŸå› æ˜¯ï¼š&lt;mark&gt;æ¨¡æ¿å®å‚æ¨å¯¼çš„è¿‡ç¨‹ä¸­ï¼Œä»ä¸è€ƒè™‘éšå¼ç±»å‹è½¬æ¢&lt;/mark&gt;å› æ­¤é¢å¯¹ä¸€ä¸ª Rational&amp;lt;int&amp;gt; ç±»å‹çš„å‚æ•° &lt;code&gt;oneHalf&lt;/code&gt;  å’Œ int ç±»å‹çš„å‚æ•° &lt;code&gt;2&lt;/code&gt; , ç¼–è¯‘å™¨ä¸ä¼šå°† &lt;code&gt;2&lt;/code&gt;  éšå¼è½¬æ¢ä¸º Rational&amp;lt;int&amp;gt; ç±»å‹ï¼Œä¹Ÿå°±å¯¼è‡´äº† operator * æ¨¡æ¿æ¨å¯¼å¤±è´¥ï¼Œç¼–è¯‘å™¨æ‰¾ä¸åˆ°èƒ½ç”¨çš„å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæˆ‘ä»¬æœ‰äº†ä¸€ä¸ªå®ä¾‹åŒ–çš„å‡½æ•°ï¼Œå¯¹å®ƒçš„è°ƒç”¨è¿‡ç¨‹ä¸­å‚æ•°å¯ä»¥å‘ç”Ÿéšå¼ç±»å‹è½¬æ¢ï¼Œä½†æ—¢ç„¶æ¨¡æ¿æ¨å¯¼è¿‡ç¨‹å¤±è´¥äº†ï¼Œæˆ‘ä»¬ä¹Ÿå°±æ²¡æœ‰äº†å®ä¾‹åŒ–çš„å‡½æ•°ï¼Œè¿™å°±æ˜¯ç¼–è¯‘å¤±è´¥çš„åŸå› ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œç”¨åˆ°çš„è§£å†³æ–¹æ¡ˆæ˜¯è®© class Rational&amp;lt;T&amp;gt; ä¸º Rational&amp;lt;T&amp;gt; å£°æ˜ä½œä¸ºä¸€ä¸ªå‹å…ƒå‡½æ•°çš„ operator*ã€‚&lt;strong&gt;class ç±»æ¨¡æ¿ä¸ä¾é  æ¨¡æ¿å®å‚æ¨æ¼”ï¼ˆè¿™ä¸ªè¿‡ç¨‹ä»…é€‚ç”¨äº function templatesï¼ˆå‡½æ•°æ¨¡æ¿ï¼‰ï¼‰ï¼Œæ‰€ä»¥ T åœ¨ class Rational&amp;lt;T&amp;gt; è¢«å®ä¾‹åŒ–æ—¶æ€»æ˜¯å·²çŸ¥çš„ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;Rational&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;friend&lt;/span&gt;                                              &lt;span class=&#34;token comment&#34;&gt;// declare operator*&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; Rational &lt;span class=&#34;token keyword&#34;&gt;operator&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; Rational&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; lhs&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt;     &lt;span class=&#34;token comment&#34;&gt;// function (see&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;                           &lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; Rational&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; rhs&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;    &lt;span class=&#34;token comment&#34;&gt;// below for details)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;                                &lt;span class=&#34;token comment&#34;&gt;// define operator*&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; Rational&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;T&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;operator&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; Rational&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;T&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; lhs&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token comment&#34;&gt;// functions&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;                            &lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; Rational&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;T&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; rhs&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;ç°åœ¨å¯¹ operator * çš„æ··åˆæ¨¡å¼è°ƒç”¨å¯ä»¥ç¼–è¯‘äº†ï¼Œå› ä¸ºå½“ object oneHalf è¢«å£°æ˜ä¸º Rational&amp;lt;int&amp;gt; ç±»å‹æ—¶ï¼Œclass Rational&amp;lt;int&amp;gt; è¢«å®ä¾‹åŒ–ï¼Œè€Œä½œä¸ºè¿™ä¸€è¿‡ç¨‹çš„ä¸€éƒ¨åˆ†ï¼Œå–å¾— Rational&amp;lt;int &amp;gt; å‚æ•°çš„å‹å…ƒå‡½æ•° operator* è¢«è‡ªåŠ¨å£°æ˜ã€‚ä½œä¸ºå·²å£°æ˜ å‡½æ•°ï¼ˆå¹¶éä¸€ä¸ª å‡½æ•°æ¨¡æ¿ï¼‰ï¼Œåœ¨è°ƒç”¨å®ƒçš„æ—¶å€™ç¼–è¯‘å™¨å¯ä»¥ä½¿ç”¨éšå¼è½¬æ¢å‡½ï¼ˆè­¬å¦‚ Rational çš„éæ˜¾å¼æ„é€ å‡½æ•°ï¼‰ï¼Œè€Œè¿™å°±æ˜¯å®ƒä»¬å¦‚ä½•ä½¿å¾—æ··åˆæ¨¡å¼è°ƒç”¨æˆåŠŸçš„ã€‚&lt;/p&gt;
&lt;p&gt;by the wayï¼Œæœ‰ä¸€ä¸ªå°çŸ¥è¯†ç‚¹æ˜¯ï¼šåœ¨ä¸€ä¸ª ç±»æ¨¡æ¿å†…éƒ¨ï¼Œæ¨¡æ¿çš„åå­—å¯ä»¥è¢«ç”¨åš æ¨¡æ¿å’Œå®ƒçš„å‚æ•°çš„ç¼©å†™ï¼Œæ‰€ä»¥ï¼Œåœ¨ Rational&amp;lt;T&amp;gt; å†…éƒ¨ï¼Œæˆ‘ä»¬å¯ä»¥åªå†™ Rational ä»£æ›¿ Rational&amp;lt;T&amp;gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯ï¼Œä¸Šé¢çš„ä»£ç è™½ç„¶èƒ½å¤Ÿç¼–è¯‘ï¼Œä½†æ˜¯è¿˜ä¸èƒ½é“¾æ¥ï¼Œå› ä¸º operator* è¿˜æ²¡æœ‰æä¾›å®ç°ã€‚æˆ‘ä»¬æ‰“ç®—è®© class ä¹‹å¤–çš„ operator* æ¨¡æ¿æä¾›è¿™ä¸ªå®šä¹‰ï¼Œä½†æ˜¯è¿™ç§æ–¹æ³•ä¸èƒ½å·¥ä½œ (why)ã€‚è®©å®ƒèƒ½å·¥ä½œçš„æœ€ç®€å•çš„æ–¹æ³•æˆ–è®¸å°±æ˜¯å°† operator* çš„æœ¬ä½“åˆå¹¶åˆ°å®ƒçš„ å®šä¹‰ä¸­ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;Rational&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;friend&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; Rational &lt;span class=&#34;token keyword&#34;&gt;operator&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; Rational&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; lhs&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; Rational&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; rhs&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;Rational&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;lhs&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;numerator&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt; rhs&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;numerator&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt;       &lt;span class=&#34;token comment&#34;&gt;// same impl&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;                  lhs&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;denominator&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt; rhs&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;denominator&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;  &lt;span class=&#34;token comment&#34;&gt;// as in&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;                                                          &lt;span class=&#34;token comment&#34;&gt;// Item 24&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;h3 id=&#34;item47-ä¸ºç±»å‹ä¿¡æ¯ä½¿ç”¨-traits-classesç‰¹å¾ç±»&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item47-ä¸ºç±»å‹ä¿¡æ¯ä½¿ç”¨-traits-classesç‰¹å¾ç±»&#34;&gt;#&lt;/a&gt; item47 ä¸ºç±»å‹ä¿¡æ¯ä½¿ç”¨ traits classesï¼ˆç‰¹å¾ç±»ï¼‰&lt;/h3&gt;
&lt;p&gt;å½“æˆ‘ä»¬çš„å‡½æ•°æƒ³ä¸ºæŸäº›ç‰¹å®šç±»å‹æä¾›æ›´é«˜æ•ˆçš„å®ç°ï¼Œå¹¶ä¸”ä¸æƒ³åœ¨è¿è¡ŒæœŸèŠ±è´¹é¢å¤–å¼€é”€è¿›è¡Œç±»å‹åˆ¤æ–­çš„æ—¶å€™ï¼Œæœ¬èŠ‚çš„æŠ€å·§ååˆ†æœ‰ç”¨ã€‚æœ¬èŠ‚çš„ä¸€äº›åšæ³•åœ¨ C++ 11 åæœ‰äº†æ›´ç®€æ´çš„åšæ³•ï¼Œä¸è¿‡äº†è§£ä¸€ä¸‹è¿˜æ˜¯å¾ˆæœ‰å¿…è¦çš„ï¼Œæ›¿ä»£æ–¹æ³•åœ¨èŠ‚æœ«ä¹Ÿæœ‰æ¶‰åŠã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ STL æä¾›çš„ advance å‡½æ•°ä¸ºä¾‹ï¼Œadvance å°†ä¸€ä¸ªæŒ‡å®šçš„ iterator ç§»åŠ¨ä¸€ä¸ªæŒ‡å®šçš„è·ç¦»ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;IterT&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;DistT&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;       &lt;span class=&#34;token comment&#34;&gt;// move iter d units&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;advance&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;IterT&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; iter&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; DistT d&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;            &lt;span class=&#34;token comment&#34;&gt;// forward; if d &amp;lt; 0,&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;                                               &lt;span class=&#34;token comment&#34;&gt;// move iter backward&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;åœ¨æ¦‚å¿µä¸Šï¼Œadvance ä»…ä»…æ˜¯åœ¨åš &lt;code&gt;iter += d&lt;/code&gt; , ä½†æ˜¯è¿™æ ·å®ç°æ˜¯é”™è¯¯çš„ï¼Œå› ä¸ºåªæœ‰éšæœºè®¿é—®è¿­ä»£å™¨æ”¯æŒ &lt;code&gt;+=&lt;/code&gt;  æ“ä½œã€‚å…¶å®ƒè¿­ä»£å™¨ä¸å¾—ä¸åå¤åˆ©ç”¨ &lt;code&gt;++&lt;/code&gt;  æˆ– &lt;code&gt;--&lt;/code&gt;  d æ¬¡æ¥å®ç° advanceã€‚&lt;/p&gt;
&lt;p&gt;STL çš„ iterator ä¸åŒç§ç±»çš„ç®€å•å›é¡¾ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åç§°&lt;/th&gt;
&lt;th&gt;ç‰¹ç‚¹&lt;/th&gt;
&lt;th&gt;ä»£è¡¨&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;input iterators (è¾“å…¥è¿­ä»£å™¨)&lt;/td&gt;
&lt;td&gt;åªèƒ½å‘å‰ç§»åŠ¨ï¼Œæ¯æ¬¡ç§»åŠ¨ä¸€æ­¥ï¼Œåªè¯»&lt;/td&gt;
&lt;td&gt;è¾“å…¥æ–‡ä»¶çš„è¯»æŒ‡é’ˆ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;output iterators (è¾“å‡ºè¿­ä»£å™¨)&lt;/td&gt;
&lt;td&gt;åªèƒ½å‘å‰ç§»åŠ¨ï¼Œæ¯æ¬¡ç§»åŠ¨ä¸€æ­¥ï¼Œåªå†™&lt;/td&gt;
&lt;td&gt;è¾“å‡ºæ–‡ä»¶çš„å†™æŒ‡é’ˆ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;forward iterators (å‰å‘è¿­ä»£å™¨)&lt;/td&gt;
&lt;td&gt;åªèƒ½å‘å‰ç§»åŠ¨ï¼Œæ¯æ¬¡ç§»åŠ¨ä¸€æ­¥&lt;/td&gt;
&lt;td&gt;å•å‘é“¾è¡¨å®¹å™¨çš„è¿­ä»£å™¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;bidirectional iterators (åŒå‘è¿­ä»£å™¨)&lt;/td&gt;
&lt;td&gt;åŠ ä¸Šäº†å’Œå‰å‘è¿­ä»£å™¨ä¸€æ ·çš„å‘åç§»åŠ¨èƒ½åŠ›&lt;/td&gt;
&lt;td&gt;set,map çš„è¿­ä»£å™¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;random access iterators (éšæœºè®¿é—®è¿­ä»£å™¨)&lt;/td&gt;
&lt;td&gt;å¯ä»¥åœ¨å¸¸é‡æ—¶é—´é‡Œå‘å‰æˆ–å‘åè·³è½¬ä»»æ„è·ç¦»&lt;/td&gt;
&lt;td&gt;vector,string çš„è¿­ä»£å™¨&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;å¯¹äºäº”ç§è¿­ä»£å™¨ç§ç±»ï¼ŒC++ éƒ½æœ‰ä¸€ä¸ªç”¨äºè¯†åˆ«å®ƒçš„ &amp;quot;tag struct&amp;quot; ç»“æ„ä½“åœ¨æ ‡å‡†åº“ä¸­ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;input_iterator_tag&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;output_iterator_tag&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;forward_iterator_tag&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token base-clause&#34;&gt;&lt;span class=&#34;token keyword&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;input_iterator_tag&lt;/span&gt;&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;bidirectional_iterator_tag&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token base-clause&#34;&gt;&lt;span class=&#34;token keyword&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;forward_iterator_tag&lt;/span&gt;&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;random_access_iterator_tag&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token base-clause&#34;&gt;&lt;span class=&#34;token keyword&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;bidirectional_iterator_tag&lt;/span&gt;&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;è¿™äº›ç»“æ„ä½“ä¹‹é—´çš„ç»§æ‰¿å…³ç³»ä½“ç°äº† &amp;quot;is a&amp;quot; å…³ç³»&lt;/p&gt;
&lt;p&gt;è¿”å›åˆ° advanceï¼Œå¯¹äºä¸åŒçš„ iterator, å®ç° advance çš„ä¸€ä¸ªæ–¹æ³•æ˜¯ä½¿ç”¨åå¤å¢åŠ æˆ–å‡å°‘ iterator çš„å¾ªç¯ï¼Œè¿™ä¸ªæ–¹æ³•æ—¶é—´å¤æ‚åº¦æ˜¯ O (n)ï¼Œä½†æ˜¯éšæœºè®¿é—®è¿­ä»£å™¨æ”¯æŒå¸¸é‡æ—¶é—´çš„ç§»åŠ¨ï¼Œæ‰€ä»¥å½“å®ƒå‡ºç°çš„æ—¶å€™æˆ‘ä»¬æœ€å¥½èƒ½åˆ©ç”¨è¿™ç§èƒ½åŠ›ã€‚æˆ‘ä»¬çœŸæ­£æƒ³åšçš„å¤§è‡´å¯ä»¥è¿™æ ·æè¿°ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;IterT&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;DistT&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;advance&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;IterT&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; iter&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; DistT d&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;iter is a random access iterator&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;     iter &lt;span class=&#34;token operator&#34;&gt;+=&lt;/span&gt; d&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;                                      &lt;span class=&#34;token comment&#34;&gt;// use iterator arithmetic&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;                                                  &lt;span class=&#34;token comment&#34;&gt;// for random access iters&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;d &lt;span class=&#34;token operator&#34;&gt;&gt;=&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;d&lt;span class=&#34;token operator&#34;&gt;--&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;++&lt;/span&gt;iter&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;              &lt;span class=&#34;token comment&#34;&gt;// use iterative calls to&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;d&lt;span class=&#34;token operator&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;--&lt;/span&gt;iter&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;                     &lt;span class=&#34;token comment&#34;&gt;// ++ or -- for other&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;                                                  &lt;span class=&#34;token comment&#34;&gt;// iterator categories&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;** ç°åœ¨çš„å…³é”®æ˜¯ï¼Œæˆ‘ä»¬å¦‚ä½•å¾—åˆ°å…³äºä¸€ä¸ªç±»å‹çš„æŸäº›ä¿¡æ¯ã€‚è¿™å°±æ˜¯ traits èƒ½åšåˆ°çš„ï¼šå®ƒä»¬å…è®¸ä½ åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­å¾—åˆ°è¿‡äºä¸€ä¸ªç±»å‹çš„ä¿¡æ¯ã€‚**traits ä¸æ˜¯ C++ ä¸­çš„ä¸€ä¸ªå…³é”®å­—æˆ–é¢„å®šä¹‰ç»“æ„ï¼›å®ƒä»¬æ˜¯ä¸€é¡¹æŠ€æœ¯å’Œ C++ ç¨‹åºå‘˜éµå®ˆçš„æƒ¯ä¾‹ã€‚å»ºç«‹è¿™é¡¹æŠ€æœ¯çš„è¦æ±‚ä¹‹ä¸€æ˜¯å®ƒåœ¨ å†…å»ºç±»å‹ä¸Šå¿…é¡»å’Œåœ¨ user-defined typesï¼ˆç”¨æˆ·å®šä¹‰ç±»å‹ï¼‰ä¸Šä¸€æ ·æœ‰æ•ˆï¼Œå› æ­¤å°†ä¿¡æ¯åµŒå…¥åˆ°ç±»å‹å†…éƒ¨æ˜¯ä¸å¯ä»¥çš„ï¼Œå› ä¸ºæ— æ³•å°†ä¿¡æ¯åµŒå…¥ä¸€ä¸ªæŒ‡é’ˆå†…éƒ¨ã€‚é‚£ä¹ˆï¼Œä¸€ä¸ªç±»å‹çš„ traits ä¿¡æ¯ï¼Œå¿…é¡»åœ¨ç±»å‹å¤–éƒ¨ã€‚æ ‡å‡†çš„æ–¹æ³•æ˜¯å°†å®ƒæ”¾åˆ° æ¨¡ä»¥åŠè¿™ä¸ªæ¨¡æ¿çš„ä¸€ä¸ªæˆ–æ›´å¤šçš„ç‰¹åŒ–ä¸­ã€‚å¯¹äº iteratorsï¼Œæ ‡å‡†åº“ä¸­æ¨¡æ¿è¢«ç§°ä¸º iterator_traitsï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;IterT&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;          &lt;span class=&#34;token comment&#34;&gt;// template for information about&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;iterator_traits&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;           &lt;span class=&#34;token comment&#34;&gt;// iterator types&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;iterator_traits çš„å·¥ä½œæ–¹æ³•æ˜¯å¯¹äºæ¯ä¸€ä¸ª IterT ç±»å‹ï¼Œåœ¨ ç»“æ„ä½“ iterator_traits&amp;lt;IterT&amp;gt; ä¸­å£°æ˜ä¸€ä¸ªåä¸º iterator_category çš„ typedefã€‚è¿™ä¸ª typedef è¢«çœ‹æˆæ˜¯ IterT çš„ iterator categoryï¼ˆè¿­ä»£å™¨ç§ç±»ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;iterator_traits é€šè¿‡ä¸¤éƒ¨åˆ†å®ç°è¿™ä¸€ç‚¹ã€‚é¦–å…ˆï¼Œå®ƒå¼ºåˆ¶è¦æ±‚ä»»ä½• user-defined iteratorï¼ˆç”¨æˆ·å®šä¹‰è¿­ä»£å™¨ï¼‰ç±»å‹å¿…é¡»åŒ…å«ä¸€ä¸ªåä¸º iterator_category çš„åµŒå¥— typedef ç”¨ä»¥è¯†åˆ«é€‚åˆçš„ tag structï¼ˆæ ‡ç­¾ç»“æ„ä½“ï¼‰ã€‚ä¾‹å¦‚ï¼Œdeque çš„ iteratorsï¼ˆè¿­ä»£å™¨ï¼‰æ˜¯éšæœºè®¿é—®çš„ï¼Œæ‰€ä»¥ä¸€ä¸ª deque iterators çš„ class çœ‹èµ·æ¥å°±åƒè¿™æ ·ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;                    &lt;span class=&#34;token comment&#34;&gt;// template params elided&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;deque&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;iterator&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;typedef&lt;/span&gt; random_access_iterator_tag iterator_category&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;å¯¹äºä¸€ä¸ª list (åŒå‘é“¾è¡¨)ï¼Œåˆ™æ˜¯è¿™æ ·ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;list&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;iterator&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;typedef&lt;/span&gt; bidirectional_iterator_tag iterator_category&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;è€Œ iterator_traits ä»…ä»…æ˜¯ç®€å•åœ°æ¨¡ä»¿äº† iterator class çš„åµŒå¥— typedefï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;// the iterator_category for type IterT is whatever IterT says it is;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;// see Item 42 for info on the use of &#34;typedef typename&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;IterT&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;iterator_traits&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;typedef&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;IterT&lt;/span&gt;&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;iterator_category iterator_category&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;åŒæ—¶ä¸ºäº†æ”¯æŒæŒ‡é’ˆè¿™æ ·æ— æ³•å¸¦æœ‰åµŒå¥— typedef çš„ä¸œè¥¿ï¼Œiterator_traites ä¸ºå…¶æä¾›äº†ä¸€ä¸ªéƒ¨åˆ†æ¨¡æ¿ç‰¹åŒ–ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;IterT&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;               &lt;span class=&#34;token comment&#34;&gt;// partial template specialization&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;iterator_traits&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;IterT&lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;         &lt;span class=&#34;token comment&#34;&gt;// for built-in pointer types&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;typedef&lt;/span&gt; random_access_iterator_tag iterator_category&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;åˆ°æ­¤ä¸ºæ­¢ï¼Œå¯ä»¥æ€»ç»“å‡ºå¦‚ä½•è®¾è®¡å’Œå®ç°ä¸€ä¸ª traits classï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¯†åˆ«ä½ æƒ³è®©å®ƒå¯ç”¨çš„å…³äºç±»å‹çš„ä¸€äº›ä¿¡æ¯ï¼ˆä¾‹å¦‚ï¼Œå¯¹äº iteratorsï¼ˆè¿­ä»£å™¨ï¼‰æ¥è¯´ï¼Œå°±æ˜¯å®ƒä»¬çš„ iterator categoryï¼ˆè¿­ä»£å™¨ç§ç±»ï¼‰ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;é€‰æ‹©ä¸€ä¸ªåå­—æ ‡è¯†è¿™ä¸ªä¿¡æ¯ï¼ˆä¾‹å¦‚ï¼Œiterator_categoryï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;æä¾›ä¸€ä¸ªæ¨¡æ¿å’Œä¸€ç³»åˆ—ç‰¹åŒ–ï¼ˆä¾‹å¦‚ï¼Œiterator_traitsï¼‰ï¼Œå®ƒä»¬åŒ…å«ä½ è¦æ”¯æŒçš„ç±»å‹çš„ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æœ‰äº† iterator_traitsï¼Œå°±å¯ä»¥æ”¹å–„ advance çš„ä¼ªä»£ç ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;IterT&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;DistT&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;advance&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;IterT&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; iter&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; DistT d&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;typeid&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;iterator_traits&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;IterT&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;iterator_category&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;     &lt;span class=&#34;token keyword&#34;&gt;typeid&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;random_access_iterator_tag&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt; &lt;span class=&#34;token comment&#34;&gt;// è¿™ä¸ªä»£ç å¯èƒ½æ¶‰åŠç¼–è¯‘é—®é¢˜ è§åŸä¹¦ item48&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;ç°åœ¨çš„é—®é¢˜æ˜¯ï¼šIterT çš„ç±»å‹åœ¨ç¼–è¯‘æœŸé—´æ˜¯å·²çŸ¥çš„ï¼Œæ‰€ä»¥ iterator_traits&amp;lt;IterT&amp;gt;::iterator_category å¯ä»¥åœ¨ç¼–è¯‘æœŸé—´è¢«ç¡®å®šã€‚ä½†æ˜¯ if è¯­å¥è¿˜æ˜¯è¦åˆ°è¿è¡Œæ—¶æ‰èƒ½è¢«æ±‚å€¼ã€‚ä¸ºä»€ä¹ˆè¦åˆ°è¿è¡Œæ—¶æ‰åšæˆ‘ä»¬åœ¨ç¼–è¯‘æœŸé—´å°±èƒ½åšçš„äº‹æƒ…å‘¢ï¼Ÿå®ƒæµªè´¹äº†æ—¶é—´ã€‚&lt;/p&gt;
&lt;p&gt;è§£å†³æ–¹æ³•æ˜¯ï¼Œé‡è½½ï¼Œé‡è½½çš„æœ€ä½³åŒ¹é…æ˜¯ç¼–è¯‘æœŸé—´å®Œæˆçš„ï¼Œè¿™ä¸ªè¡Œä¸ºä¹Ÿæœ‰ç‚¹åƒ if è¯­å¥é€‰æ‹©åˆ†æ”¯çš„è¿‡ç¨‹ã€‚ä¸ºäº†è®© advance æ‹¥æœ‰æˆ‘ä»¬æƒ³è¦çš„è¡Œä¸ºæ–¹å¼ï¼Œæˆ‘ä»¬å¿…é¡»è¦åšçš„å…¨éƒ¨å°±æ˜¯åˆ›å»ºä¸€ä¸ªåŒ…å« advance çš„ â€œå†…å®¹â€ çš„é‡è½½å‡½æ•°çš„å¤šä¸ªç‰ˆæœ¬ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;IterT&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;DistT&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;              &lt;span class=&#34;token comment&#34;&gt;// use this impl for&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;doAdvance&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;IterT&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; iter&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; DistT d&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt;                  &lt;span class=&#34;token comment&#34;&gt;// random access&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;               std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;random_access_iterator_tag&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;       &lt;span class=&#34;token comment&#34;&gt;// iterators&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  iter &lt;span class=&#34;token operator&#34;&gt;+=&lt;/span&gt; d&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;IterT&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;DistT&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;              &lt;span class=&#34;token comment&#34;&gt;// use this impl for&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;doAdvance&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;IterT&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; iter&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; DistT d&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt;                  &lt;span class=&#34;token comment&#34;&gt;// bidirectional&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;               std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;bidirectional_iterator_tag&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;       &lt;span class=&#34;token comment&#34;&gt;// iterators&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;d &lt;span class=&#34;token operator&#34;&gt;&gt;=&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;d&lt;span class=&#34;token operator&#34;&gt;--&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;++&lt;/span&gt;iter&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;d&lt;span class=&#34;token operator&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;--&lt;/span&gt;iter&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;15&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;16&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;17&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;IterT&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;DistT&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;              &lt;span class=&#34;token comment&#34;&gt;// use this impl for&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;18&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;doAdvance&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;IterT&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; iter&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; DistT d&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt;                  &lt;span class=&#34;token comment&#34;&gt;// input iterators&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;19&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;               std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;input_iterator_tag&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;20&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;21&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;d &lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;22&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;     &lt;span class=&#34;token keyword&#34;&gt;throw&lt;/span&gt; std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;out_of_range&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;Negative distance&#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;    &lt;span class=&#34;token comment&#34;&gt;// see below&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;23&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;24&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;d&lt;span class=&#34;token operator&#34;&gt;--&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;++&lt;/span&gt;iter&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;25&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;ç»™å‡ºé’ˆå¯¹ doAdvance çš„å„ç§é‡è½½ï¼Œadvance éœ€è¦åšçš„å…¨éƒ¨å°±æ˜¯è°ƒç”¨å®ƒä»¬ï¼Œä¼ é€’ä¸€ä¸ªé€‚å½“çš„ iterator category ç±»å‹çš„é¢å¤– object ä»¥ä¾¿ç¼–è¯‘å™¨åˆ©ç”¨é‡è½½åŒ¹é…æ­£ç¡®çš„å®ç°ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;IterT&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;DistT&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;advance&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;IterT&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; iter&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; DistT d&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token function&#34;&gt;doAdvance&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;                                              &lt;span class=&#34;token comment&#34;&gt;// call the version&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    iter&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; d&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt;                                              &lt;span class=&#34;token comment&#34;&gt;// of doAdvance&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt;                                              &lt;span class=&#34;token comment&#34;&gt;// that is&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;token class-name&#34;&gt;iterator_traits&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;IterT&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;iterator_category&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;    &lt;span class=&#34;token comment&#34;&gt;// appropriate for&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;                                                      &lt;span class=&#34;token comment&#34;&gt;// iter&#39;s iterator&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;ps: C++17 åæä¾›çš„ constexpr if å’Œ &amp;lt;type_traits&amp;gt; åº“æ˜¯é‡è½½çš„ä¸€ä¸ªæ›¿ä»£æ–¹æ³•ï¼Œå¯ä»¥ä½¿ä¸Šè¿°ä»£ç æ›´ç®€å•æ˜“è¯»ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token macro property&#34;&gt;&lt;span class=&#34;token directive-hash&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;token directive keyword&#34;&gt;include&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&amp;lt;type_traits&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;IterT&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;DistT&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;advance&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;IterT&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; iter&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; DistT d&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;constexpr&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;is_same_v&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;iterator_traits&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;IterT&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;iterator_category&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;random_access_iterator_tag&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        &lt;span class=&#34;token function&#34;&gt;doAdvance&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;iter&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; d&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;random_access_iterator_tag&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;constexpr&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;is_same_v&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;iterator_traits&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;IterT&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;iterator_category&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;bidirectional_iterator_tag&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        &lt;span class=&#34;token function&#34;&gt;doAdvance&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;iter&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; d&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;bidirectional_iterator_tag&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        &lt;span class=&#34;token function&#34;&gt;doAdvance&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;iter&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; d&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;input_iterator_tag&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;h3 id=&#34;item48-æ„Ÿå—æ¨¡æ¿å…ƒç¼–ç¨‹tmp&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item48-æ„Ÿå—æ¨¡æ¿å…ƒç¼–ç¨‹tmp&#34;&gt;#&lt;/a&gt; item48 æ„Ÿå—æ¨¡æ¿å…ƒç¼–ç¨‹ (TMP)&lt;/h3&gt;
&lt;p&gt;æœ¬èŠ‚æä¾›çš„ä¾‹å­æ˜¯ TMP ç•Œçš„ &amp;quot;hello world&amp;quot; ç¨‹åºï¼šç”¨æ¨¡æ¿å…ƒç¼–ç¨‹è®¡ç®—é˜¶ä¹˜ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;unsigned&lt;/span&gt; n&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;                 &lt;span class=&#34;token comment&#34;&gt;// general case: the value of&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;Factorial&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;                   &lt;span class=&#34;token comment&#34;&gt;// Factorial&amp;lt;n&gt; is n times the value&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;                                     &lt;span class=&#34;token comment&#34;&gt;// of Factorial&amp;lt;n-1&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;enum&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt; value &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; n &lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt; Factorial&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;n&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token number&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;value &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;                           &lt;span class=&#34;token comment&#34;&gt;// special case: the value of&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;Factorial&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;                &lt;span class=&#34;token comment&#34;&gt;// Factorial&amp;lt;0&gt; is 1&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;enum&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt; value &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;ç„¶åå¯ä»¥è¿™æ ·ä½¿ç”¨ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;cout &lt;span class=&#34;token operator&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; Factorial&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token number&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;value&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;            &lt;span class=&#34;token comment&#34;&gt;// prints 120&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;cout &lt;span class=&#34;token operator&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; Factorial&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token number&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;value&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;           &lt;span class=&#34;token comment&#34;&gt;// prints 3628800&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;å¾ˆåŸºç¡€ï¼Œä½†æ˜¯èƒ½ä½“ç° TMP çš„æœ€å¤§ä¼˜åŠ¿ï¼šå°†è¿è¡ŒæœŸçš„è®¡ç®—æ”¾åˆ°ç¼–è¯‘å™¨è®¡ç®—ï¼Œä½†æ˜¯å¯èƒ½è¿˜ä¸è¶³å¤Ÿæ˜¾ç¤ºæ¨¡æ¿å…ƒç¼–ç¨‹çš„å·¨å¤§å¨åŠ›ã€‚æ¨¡æ¿å…ƒç¼–ç¨‹æ˜¯ä¸€é—¨å›¾çµå®Œå¤‡çš„è¯­è¨€ï¼Œå®ƒèƒ½åšåˆ°å¾ˆå¤šäº‹ï¼Œå®ƒå¸¦æ¥çš„æ•ˆç‡æå‡ä»¤äººæƒŠå¹...&lt;/p&gt;
&lt;p&gt;C++11 åï¼Œæ¨¡æ¿å…ƒç¼–ç¨‹æ­£å¼è·å¾—äº†æ ‡å‡†åº“æ”¯æŒï¼Œé—æ†¾çš„æ˜¯æœ¬ä¹¦å®Œæˆä¹‹å‰è¿˜æ²¡æœ‰å¼•å…¥ï¼Œæ¨¡æ¿å…ƒç¼–ç¨‹ç°åœ¨æœ‰äº†è®¸å¤šé€šç”¨çš„èŒƒå¼å’Œæƒ¯ä¾‹ï¼Œå½“éœ€è¦çš„æ—¶å€™ï¼Œå¯ä»¥æ·±å…¥å»äº†è§£å®ƒä»¬ã€‚&lt;/p&gt;
&lt;p&gt;C++11 çš„ &amp;lt;type_traits&amp;gt; åº“æä¾›äº†ä¸€äº›éå¸¸æœ‰ç”¨çš„æ¨¡æ¿å…ƒç¼–ç¨‹æ”¯æŒï¼ŒåŒ…æ‹¬ (gpt ç”Ÿæˆï¼‰ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å‹åˆ«ç‰¹å¾ (Type Traits)&lt;/strong&gt;:
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;std::is_same&amp;lt;T, U&amp;gt;&lt;/code&gt; : æ£€æŸ¥ä¸¤ä¸ªç±»å‹æ˜¯å¦ç›¸åŒã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;std::is_integral&amp;lt;T&amp;gt;&lt;/code&gt; : æ£€æŸ¥ç±»å‹æ˜¯å¦ä¸ºæ•´å‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;std::is_floating_point&amp;lt;T&amp;gt;&lt;/code&gt; : æ£€æŸ¥ç±»å‹æ˜¯å¦ä¸ºæµ®ç‚¹å‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;std::is_pointer&amp;lt;T&amp;gt;&lt;/code&gt; : æ£€æŸ¥ç±»å‹æ˜¯å¦ä¸ºæŒ‡é’ˆã€‚&lt;/li&gt;
&lt;li&gt;è¿˜æœ‰å¾ˆå¤šå…¶ä»–æœ‰ç”¨çš„å‹åˆ«ç‰¹å¾ï¼Œå¦‚  &lt;code&gt;is_array&lt;/code&gt; ã€ &lt;code&gt;is_class&lt;/code&gt; ã€ &lt;code&gt;is_enum&lt;/code&gt;  ç­‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç±»å‹è½¬æ¢&lt;/strong&gt;:
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;std::conditional&amp;lt;B, T, F&amp;gt;&lt;/code&gt; : æ ¹æ®å¸ƒå°”å€¼  &lt;code&gt;B&lt;/code&gt;  é€‰æ‹©ç±»å‹  &lt;code&gt;T&lt;/code&gt;  æˆ–  &lt;code&gt;F&lt;/code&gt; ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;std::enable_if&amp;lt;B, T&amp;gt;&lt;/code&gt; : æ ¹æ®å¸ƒå°”å€¼  &lt;code&gt;B&lt;/code&gt;  å¯ç”¨æˆ–ç¦ç”¨ç±»å‹  &lt;code&gt;T&lt;/code&gt; ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;std::decay&amp;lt;T&amp;gt;&lt;/code&gt; : è·å–ç±»å‹  &lt;code&gt;T&lt;/code&gt;  çš„ &amp;quot;è¡°å‡&amp;quot;(decay) å½¢å¼ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°å€¼è®¡ç®—&lt;/strong&gt;:
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;std::integral_constant&amp;lt;T, v&amp;gt;&lt;/code&gt; : è¡¨ç¤ºä¸€ä¸ªç¼–è¯‘æ—¶å¸¸é‡å€¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;std::tuple&amp;lt;Types...&amp;gt;&lt;/code&gt; : å¼‚æ„å®¹å™¨ï¼Œå¯ç”¨äºç¼–è¯‘æ—¶è®¡ç®—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;std::pair&amp;lt;T, U&amp;gt;&lt;/code&gt; : äºŒå…ƒç»„ï¼Œå¯ç”¨äºç¼–è¯‘æ—¶è®¡ç®—ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å‡½æ•°æ“ä½œ&lt;/strong&gt;:
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;std::invoke&amp;lt;F, Args...&amp;gt;&lt;/code&gt; : è°ƒç”¨å¯è°ƒç”¨å¯¹è±¡  &lt;code&gt;F&lt;/code&gt;  å¹¶ä¼ é€’å‚æ•°  &lt;code&gt;Args&lt;/code&gt; ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;std::result_of&amp;lt;F(Args...)&amp;gt;&lt;/code&gt; : è·å–è°ƒç”¨  &lt;code&gt;F(Args...)&lt;/code&gt;  çš„ç»“æœç±»å‹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç®—æ³•&lt;/strong&gt;:
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;std::make_index_sequence&amp;lt;N&amp;gt;&lt;/code&gt; : ç”Ÿæˆä¸€ä¸ªåŒ…å«  &lt;code&gt;0&lt;/code&gt;  åˆ°  &lt;code&gt;N-1&lt;/code&gt;  çš„æ•´æ•°åºåˆ—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;std::index_sequence_for&amp;lt;T1, T2, ..., TN&amp;gt;&lt;/code&gt; : æ ¹æ®ç»™å®šç±»å‹ç”Ÿæˆæ•´æ•°åºåˆ—ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä»è¿™äº›å‡½æ•°çš„ä½œç”¨å¯è§ TMP çš„å¼ºå¤§æ•ˆç”¨ï¼Œè¶³ä»¥åœ¨éœ€è¦çš„æ—¶å€™æ‹…å½“é‡ä»»ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å†…å­˜ç®¡ç†&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#å†…å­˜ç®¡ç†&#34;&gt;#&lt;/a&gt; å†…å­˜ç®¡ç†&lt;/h2&gt;
&lt;h3 id=&#34;item49-äº†è§£-new-handlerçš„è¡Œä¸º&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item49-äº†è§£-new-handlerçš„è¡Œä¸º&#34;&gt;#&lt;/a&gt; item49 äº†è§£ new-handler çš„è¡Œä¸º&lt;/h3&gt;
&lt;p&gt;å¯¹æ˜¯å¦å¤„ç†å†…å­˜åˆ†é…å¤±è´¥è¿™ä»¶äº‹æœ‰äº‰è®®ï¼Œä¸€ç§è¯´æ³•æ˜¯ç›´æ¥è®©ç¨‹åº crash å³å¯ï¼Œæ¯•ç«Ÿå†…å­˜ä¸è¶³å·²ç»æ˜¯ååˆ†ä¸¥é‡çš„ç³»ç»Ÿé—®é¢˜ï¼Œå¹¶ä¸”å¯¹äºå†…å­˜åˆ†é…å¤±è´¥ç¨‹åºå‘˜å¤§å¤šæ•°æ—¶å€™æ€»æ˜¯æ— èƒ½ä¸ºåŠ›ã€‚ä½†æ˜¯ï¼Œä»»ä½•æŠ€æœ¯éƒ½æœ‰é€‚åˆçš„åœºæ™¯ï¼Œå¹¶ä¸”æœ¬èŠ‚æ¶‰åŠçš„ä¸€äº›æŠ€å·§è¿˜æ˜¯ååˆ†ç²¾å¦™ï¼Œæœ‰åŠ©äºå­¦ä¹ ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸€èŠ‚ä¸»è¦ä»‹ç»äº†å¯¹ new è¡Œä¸ºåˆ†é…å†…å­˜å¤±è´¥çš„ä¸€ç§å¤„ç†æ–¹æ¡ˆï¼šnew-handlerï¼Œç¨‹åºå‘˜å¯ä»¥ä½¿ç”¨ &amp;lt;new&amp;gt; æ ‡å‡†åº“ä¸­çš„ set_new_handler å‡½æ•°è®¾ç½®ä¸€ä¸ª new-handlerï¼Œåœ¨å†…å­˜åˆ†é…å¤±è´¥æ—¶ä¼šè°ƒç”¨è®¾ç½®çš„ new-handlerï¼Œå…·ä½“æ¥è¯´å®ƒä»¬çš„å£°æ˜æ˜¯è¿™æ ·çš„ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;namespace&lt;/span&gt; std &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;	&lt;span class=&#34;token keyword&#34;&gt;typedef&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt;new_handler&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;token comment&#34;&gt;//new_handler æ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆç±»å‹&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;	new_handler &lt;span class=&#34;token function&#34;&gt;set_new_handler&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;new_handler p&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;throw&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;token comment&#34;&gt;// è®¾ç½® global new_handler ä¸º pï¼Œå¹¶è¿”å›æ—§çš„ new_handler&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;ä¸€ä¸ªä½¿ç”¨çš„ä¾‹å­æ˜¯:&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;outOfMem&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;	std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;cerr &lt;span class=&#34;token operator&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;Unable to satisfy request for memory\n&#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;	std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;abort&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;	std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;set_new_handler&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;outOfMem&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt; pBigDataArray &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;token number&#34;&gt;1000000000L&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;å½“ operator new æ— æ³•æ»¡è¶³å†…å­˜ç”³è¯·æ—¶ï¼Œå®ƒä¼šä¸æ–­è°ƒç”¨ new-handlerï¼Œç›´åˆ°æ‰¾åˆ°è¶³å¤Ÿå†…å­˜ (è§ item 51)ï¼Œä»è¿™ä¸ªæè¿°å¯ä»¥æ€»ç»“å‡º&lt;strong&gt;ä¸€ä¸ªå¥½çš„ new-handler å¿…é¡»åšä»¥ä¸‹äº‹æƒ…ä¹‹ä¸€&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è®©æ›´å¤šå†…å­˜è¢«ä½¿ç”¨&lt;/li&gt;
&lt;li&gt;å®‰è£…å¦ä¸€ä¸ª new-handlerï¼ˆè®©æœ‰èƒ½åŠ›çš„äººæ¥)&lt;/li&gt;
&lt;li&gt;å¸è½½ new-handlerï¼ˆå°† new-handler è®¾ç½®ä¸º nullï¼Œæ²¡æœ‰å®‰è£…ä»»ä½• new-handler æ—¶ï¼Œoperator new ä¼šåœ¨å†…å­˜åˆ†é…å¤±è´¥æ—¶æŠ›å‡ºå¼‚å¸¸&lt;/li&gt;
&lt;li&gt;æŠ›å‡º bad_alloc å¼‚å¸¸&lt;/li&gt;
&lt;li&gt;ä¸è¿”å›ï¼Œè°ƒç”¨ abort æˆ– exit&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¾ˆå¤šæ—¶å€™æˆ‘ä»¬å¸Œæœ›ä»¥ä¸åŒçš„æ–¹å¼å¤„ç†å†…å­˜åˆ†é…å¤±è´¥æƒ…å†µï¼Œç‰¹åˆ«æ˜¯å¸Œæœ›è§†åˆ†é…ç‰©å±äºå“ªä¸ª class è€Œå®šï¼Œæˆ‘ä»¬æƒ³è¦è¾¾åˆ°è¿™æ ·çš„æ•ˆæœï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c++&#34;&gt;class X &amp;#123;
public:
	static void outOfMemory();
	...
&amp;#125;
class Y &amp;#123;
public:
	static void outOfMemory();
&amp;#125;
X *p1 = new X; //å¤±è´¥æ—¶è°ƒç”¨X::outOfMemory
Y *p2 = new Y; //å¤±è´¥æ—¶è°ƒç”¨Y::outOfMemory
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;é—æ†¾çš„æ˜¯ C++ ä¸æ”¯æŒä¸ºç±»æä¾›ä¸“å±çš„ new-handlers, æˆ‘ä»¬ä¸å¾—ä¸è‡ªå·±å®ç°è¿™ç§è¡Œä¸ºã€‚åªéœ€æ¯ä¸ª class æä¾›è‡ªå·±çš„ set_new_handler å’Œ operator new å³å¯ï¼Œ&lt;strong&gt;å…¶ä¸­ set_new_handler ä½¿å®¢æˆ·å¾—ä»¥æŒ‡å®š class ä¸“å±çš„ new-handler, è€Œ operator new åˆ™ç¡®ä¿åœ¨åˆ†é… class  å¯¹è±¡å†…å­˜çš„è¿‡ç¨‹ä¸­ç”¨ç±»ä¸“å±çš„ new-handler æ›¿æ¢ global new-handlerã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å‡è®¾æˆ‘ä»¬ç°åœ¨æƒ³ä¸º Widget ç±»æä¾›ä¸€ä¸ªä¸“å± new-handler&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;Widget&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;	&lt;span class=&#34;token keyword&#34;&gt;static&lt;/span&gt; std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;new_handler set_new&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;handler&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;new_handler p&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;throw&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;	&lt;span class=&#34;token keyword&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;operator&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;size_t size&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;throw&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;bad_alloc&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;private&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;	&lt;span class=&#34;token keyword&#34;&gt;static&lt;/span&gt; std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;new_handler currentHandler&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;new_handler Widget&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;currentHandler &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;new_handler &lt;span class=&#34;token class-name&#34;&gt;Widget&lt;/span&gt;&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;set_new_handler&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;new_handler p&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;throw&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt; &lt;span class=&#34;token comment&#34;&gt;// å’Œæ ‡å‡†ç‰ˆæ²¡ä»€ä¹ˆåŒºåˆ«&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;new_handler oldHandler &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; currentHandler&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    currentHandler &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; p&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;return&lt;/span&gt; oldHandler&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;æœ€é‡è¦çš„æ˜¯ Widget é‡è½½çš„ opertor new, å®ƒéœ€è¦åšåˆ°ä»¥ä¸‹äº‹æƒ…:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;è°ƒç”¨æ ‡å‡† set_new_handler, å°† Widget çš„ new-handler å®‰è£…ä¸º global new-handler&lt;/li&gt;
&lt;li&gt;è°ƒç”¨ global operator new æ‰§è¡Œå®é™…çš„å†…å­˜åˆ†é…ï¼Œå¦‚æœåˆ†é…å¤±è´¥ï¼Œä¼šè°ƒç”¨ widget çš„ new-handlerï¼Œå¦‚æœæœ€ç»ˆä»æ— æ³•åˆ†é…ï¼Œä¼šæŠ›å‡º bad_alloc å¼‚å¸¸ï¼Œå¹¶ä¸”å¿…é¡»æ¢å¤åŸæœ¬çš„ global new-handlerã€‚ä¸ºäº†ç¡®ä¿åŸæ¥çš„ new-handler æ€»æ˜¯èƒ½å¤Ÿè¢«é‡æ–°å®‰è£…å›å»ï¼Œå°†ç”¨åˆ° RAII æœºåˆ¶&lt;/li&gt;
&lt;li&gt;å¦‚æœ global operator new æˆåŠŸåˆ†é…ï¼ŒWidget çš„ operator new ä¼šè¿”å›ä¸€ä¸ªæŒ‡å‘åˆ†é…çš„å†…å­˜çš„æŒ‡é’ˆï¼Œå¹¶ä¸”è¦è‡ªåŠ¨æ¢å¤è°ƒç”¨å‰çš„ global new-handlerã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä»£ç ï¼Œè¿ç”¨åˆ°äº† RAII æœºåˆ¶ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;NewHandlerHolder&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;	&lt;span class=&#34;token comment&#34;&gt;//	èµ„æºç®¡ç†ç±»&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;	&lt;span class=&#34;token keyword&#34;&gt;explicit&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;NewHandlerHolder&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;new_handler nh&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;handler&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;nh&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token operator&#34;&gt;~&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;NewHandlerHolder&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;set_new_handler&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;handler&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;	&lt;span class=&#34;token comment&#34;&gt;// ææ„æ—¶æ¢å¤ global new_handler&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token function&#34;&gt;NewHandlerHolder&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; NewHandlerHolder &lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;delete&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;	&lt;span class=&#34;token comment&#34;&gt;// ç¦æ­¢æ‹·è´å’Œèµ‹å€¼&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    NewHandlerHolder&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;operator&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; NewHandlerHolder &lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;delete&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;private&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;	std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;new_handler handler&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;// Widget çš„ operator new ä¹Ÿå¾ˆç®€å•&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt; Widget&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;operator&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;size_t size&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;throw&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;bad_alloc&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    NewHandlerHolder &lt;span class=&#34;token function&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;set_new_handler&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;currentHandler&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;operator&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;size&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;token comment&#34;&gt;// æˆåŠŸè¿”å›æˆ–æŠ›å‡ºå¼‚å¸¸æ—¶ä¼šè‡ªåŠ¨æ¢å¤ä¹‹å‰çš„ new-handler&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;ç°åœ¨ Widget çš„å®¢æˆ·å¯ä»¥è¿™æ ·æ–¹ä¾¿åœ°ä¸ºå…¶æŒ‡å®š new-handler:&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;outOfMem&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token class-name&#34;&gt;Widget&lt;/span&gt;&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;set_new_handler&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;outOfMem&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;Widget&lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt; pw1 &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;new&lt;/span&gt; Widget&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;token comment&#34;&gt;// å¤±è´¥æ˜¯è°ƒç”¨ outOfMem&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;string&lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt; ps &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;new&lt;/span&gt; std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;string&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;token comment&#34;&gt;// å¤±è´¥æ—¶è°ƒç”¨ global new-handler&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token class-name&#34;&gt;Widget&lt;/span&gt;&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;set_new_handler&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;Widget&lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt; pw2 &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;new&lt;/span&gt; Widget&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;	&lt;span class=&#34;token comment&#34;&gt;// å¤±è´¥æ—¶æŠ›å‡ºå¼‚å¸¸&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;å®ç°è¿™ä¸€æ–¹æ¡ˆçš„ä»£ç å¹¶ä¸å›  class çš„ä¸åŒè€Œä¸åŒï¼Œå› æ­¤è€ƒè™‘å¦‚ä½•åŠ ä¸Šå¤ç”¨æ˜¯ä¸€ä¸ªè‡ªç„¶çš„æƒ³æ³•ï¼Œä¸€ä¸ªç®€å•çš„åšæ³•æ˜¯æä¾›ä¸€ä¸ª base class æ¥å…è®¸æ´¾ç”Ÿç±»ç»§æ‰¿è¿™ä¸€èƒ½åŠ›ã€‚ç”±äºæ¯ä¸ªç±»éƒ½éœ€è¦è·å¾—ä¸€ä¸ªä¸åŒçš„é™æ€ currentHandler å¯¹è±¡ï¼Œéœ€è¦ç”¨åˆ°æ¨¡æ¿ã€‚&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;NewHandlerSupport&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;	&lt;span class=&#34;token keyword&#34;&gt;static&lt;/span&gt; std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;new_handler set_new&lt;span class=&#34;token operator&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;handler&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;new_handler p&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;throw&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;	&lt;span class=&#34;token keyword&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;operator&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;std&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;size_t size&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;throw&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;bad_alloc&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;	&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;private&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;	&lt;span class=&#34;token keyword&#34;&gt;static&lt;/span&gt; std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;new_handler currentHandler&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;new_handler&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token class-name&#34;&gt;NewHandlerSupport&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;T&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;set_new_handler&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;new_handler p&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;throw&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;	std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;new_handler oldHandler &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; currentHandler&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;15&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;	currentHandler &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; p&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;16&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;	&lt;span class=&#34;token keyword&#34;&gt;return&lt;/span&gt; oldHandler&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;17&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;18&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;templace&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;19&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt; NewHandlerSupport&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;T&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;operator&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;size_t size&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;throw&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;bad_alloc&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;20&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;	NewHandlerHolder &lt;span class=&#34;token function&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;set_new_handler&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;currentHandler&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;21&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;	&lt;span class=&#34;token keyword&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;operator&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;size&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;22&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;23&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;24&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;typename&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;25&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;new_handler NewHandlerSupport&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;T&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;currentHandler &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;26&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;27&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;// ç°åœ¨ widget ç±»åªéœ€è¦&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;28&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;Widget&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;token base-clause&#34;&gt;&lt;span class=&#34;token keyword&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;NewHandlerSupport&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;token class-name&#34;&gt;Widget&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;29&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;30&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;h3 id=&#34;item50-é¢†ä¼šä½•æ—¶æ›¿æ¢newå’Œdeleteæ‰æœ‰æ„ä¹‰&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item50-é¢†ä¼šä½•æ—¶æ›¿æ¢newå’Œdeleteæ‰æœ‰æ„ä¹‰&#34;&gt;#&lt;/a&gt; item50 é¢†ä¼šä½•æ—¶æ›¿æ¢ new å’Œ delete æ‰æœ‰æ„ä¹‰&lt;/h3&gt;
&lt;p&gt;åœ¨ä»¥ä¸‹æƒ…å†µå¯ä»¥æ›¿æ¢ç¼ºçœçš„ new å’Œ deleteï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸ºäº†æ£€æµ‹è¿ç”¨é”™è¯¯&lt;/li&gt;
&lt;li&gt;ä¸ºäº†æ”¶é›†åŠ¨æ€åˆ†é…å†…å­˜çš„ä½¿ç”¨ç»Ÿè®¡ä¿¡æ¯&lt;/li&gt;
&lt;li&gt;ä¸ºäº†å¢åŠ åˆ†é…å’Œå½’è¿˜çš„é€Ÿåº¦&lt;/li&gt;
&lt;li&gt;ä¸ºäº†é™ä½ç¼ºçœå†…å­˜ç®¡ç†å™¨å¸¦æ¥çš„é¢å¤–ç©ºé—´å¼€é”€&lt;/li&gt;
&lt;li&gt;ä¸ºäº†å¼¥è¡¥ç¼ºçœåˆ†é…å™¨ä¸­çš„éæœ€ä½³é½ä½ (æ¯”å¦‚ x86 æ¶æ„å¯¹ 8 byte é½ä½çš„ double ç±»å‹æœ€å¿«ï¼Œæ‰€ä»¥é‡è½½ opertor new è®©åˆ†é…åœ°å€éƒ½æ˜¯ 8 byte é½ä½)&lt;/li&gt;
&lt;li&gt;ä¸ºäº†å°†ç›¸å…³å¯¹è±¡é›†ä¸­&lt;/li&gt;
&lt;li&gt;ä¸ºäº†è·å¾—éä¼ ç»Ÿçš„è¡Œä¸º&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;å†…å­˜åˆ†é…å¾ˆå›°éš¾ï¼Œå‘ä¹Ÿå¾ˆå¤šï¼Œå¦‚éœ€è¦é‡å†™æœ€å¥½è¿˜æ˜¯å¼•å…¥æˆ–è€…å‚è€ƒå¼€æºåº“ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&#34;item51-ç¼–å†™-new-å’Œ-delete-æ—¶è¦éµå®ˆæƒ¯ä¾‹&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item51-ç¼–å†™-new-å’Œ-delete-æ—¶è¦éµå®ˆæƒ¯ä¾‹&#34;&gt;#&lt;/a&gt; item51 ç¼–å†™ new å’Œ delete æ—¶è¦éµå®ˆæƒ¯ä¾‹&lt;/h3&gt;
&lt;p&gt;é¦–å…ˆçœ‹çœ‹ operator new å¤§æ¦‚åšäº†ä»€ä¹ˆï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;operator&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;size_t size&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;throw&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;bad_alloc&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;                                      &lt;span class=&#34;token comment&#34;&gt;// your operator new might&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;using&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;namespace&lt;/span&gt; std&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;                 &lt;span class=&#34;token comment&#34;&gt;// take additional params&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;size &lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;                     &lt;span class=&#34;token comment&#34;&gt;// handle 0-byte requests&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    size &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;                          &lt;span class=&#34;token comment&#34;&gt;// by treating them as&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;                                    &lt;span class=&#34;token comment&#34;&gt;// 1-byte requests&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token boolean&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;   _attempt to allocate size bytes&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;_&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;_the allocation was successful_&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;       &lt;span class=&#34;token keyword&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;_a pointer to the memory_&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token comment&#34;&gt;// allocation was unsuccessful; find out what the&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;15&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token comment&#34;&gt;// current new-handling function is (see below)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;16&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    new_handler globalHandler &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;set_new_handler&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;17&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token function&#34;&gt;set_new_handler&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;globalHandler&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;18&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;19&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;globalHandler&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt;globalHandler&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;20&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;throw&lt;/span&gt; std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;bad_alloc&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;21&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;22&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;å®ƒå¤„ç†äº†é›¶å­—èŠ‚ï¼ˆC++ è¦æ±‚å³ä½¿è¯·æ±‚é›¶å­—èŠ‚ï¼Œoperator new ä¹Ÿè¦è¿”å›ä¸€ä¸ªåˆç†çš„æŒ‡é’ˆï¼‰ï¼Œä¹ŸåŒ…å«äº†ä¸€ä¸ªæ— é™å¾ªç¯ï¼Œè·³å‡ºå¾ªç¯çš„å”¯ä¸€å‡ºè·¯æ˜¯å†…å­˜è¢«æˆåŠŸåˆ†é…æˆ– new-handling function åšäº† item49 ä¸­æè¿°çš„äº‹æƒ…ä¹‹ä¸€ï¼šä½¿å¾—æ›´å¤šçš„å†…å­˜å¯ç”¨ï¼Œå®‰è£…ä¸€ä¸ªä¸åŒçš„ new-handlerï¼Œå¸è½½ new-handlerï¼ŒæŠ›å‡ºä¸€ä¸ª bad_allocï¼Œæˆ–ä¸å†è¿”å›ã€‚æˆ‘ä»¬è‡ªå·±é‡å†™çš„ operator new ä¹Ÿéœ€è¦éµå¾ªè¿™äº›è§„åˆ™ã€‚&lt;/p&gt;
&lt;p&gt;æœ‰ä¸€ä¸ªå®¹æ˜“è¢«å¿½ç•¥çš„ç‚¹æ˜¯ operator new æˆå‘˜å‡½æ•°ä¼šè¢«æ´¾ç”Ÿç±»ç»§æ‰¿ï¼Œå¯¹äº Class X æ¥è¯´ å®ƒçš„ operator new æˆå‘˜å‡½æ•°çš„ size ä¸€èˆ¬æ˜¯ä¸ sizeof (X) é€‚é…çš„ï¼Œç»ä¸ä¼šæ›´å¤§æˆ–è€…æ›´å°ã€‚ç„¶è€Œï¼Œç”±äºç»§æ‰¿ï¼Œå°±æœ‰å¯èƒ½ä¸€ä¸ªåŸºç±»ä¸­çš„ operator new è¢«è°ƒç”¨æ¥ä¸ºä¸€ä¸ªæ´¾ç”Ÿç±»åˆ†é…å†…å­˜ã€‚å¦‚æœåŸºç±» çš„ operator new ä¸æ˜¯è¢«è®¾è®¡æˆåº”ä»˜è¿™ç§æƒ…å†µçš„ï¼ˆå¾ˆæœ‰å¯èƒ½æ˜¯åŸºç±»ä¸“å±çš„æ“ä½œï¼‰ã€‚å®ƒå¤„ç†è¿™ç§å±€é¢çš„æœ€ä½³æ–¹æ³•å°±æ˜¯æŠŠè¿™ä¸ªè¯·æ±‚è°ƒç”¨ç”©ç»™ standard operator new:&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt; Base&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;operator&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;size_t size&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;throw&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;bad_alloc&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;size &lt;span class=&#34;token operator&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;Base&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;              &lt;span class=&#34;token comment&#34;&gt;// if size is &#34;wrong,&#34;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;     &lt;span class=&#34;token keyword&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;operator&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;size&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;         &lt;span class=&#34;token comment&#34;&gt;// have standard operator&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;                                          &lt;span class=&#34;token comment&#34;&gt;// new handle the request&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;                                     &lt;span class=&#34;token comment&#34;&gt;// otherwise handle&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;                                          &lt;span class=&#34;token comment&#34;&gt;// the request here&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;å¯¹äº operator deleteï¼Œäº‹æƒ…å°±æ›´ç®€å•äº†ï¼Œå”¯ä¸€éœ€è¦æ³¨æ„çš„å°±æ˜¯ C++ ä¿è¯åˆ é™¤ç©ºæŒ‡é’ˆæ€»æ˜¯å®‰å…¨çš„ï¼Œæ‰€ä»¥ä½ éœ€è¦éµå¾ªè¿™ä¸ªä¿è¯ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ª standard operator delete çš„ä¼ªä»£ç ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;operator&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;delete&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt;rawMemory&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;throw&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;rawMemory &lt;span class=&#34;token operator&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;token number&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;            &lt;span class=&#34;token comment&#34;&gt;// do nothing if the null&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;                                         &lt;span class=&#34;token comment&#34;&gt;// pointer is being deleted&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  _deallocate the memory pointed to by rawMemory&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;_&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;ç±»ä¼¼åœ°ï¼Œå¯¹äºé”™è¯¯å¤§å°çš„ delete è¯·æ±‚ï¼Œä¹Ÿå¯ä»¥å§”æ‰˜ç»™ stardard operator delete æ¥åšã€‚&lt;/p&gt;
&lt;h3 id=&#34;item52-å¦‚æœç¼–å†™äº†-placement-newå°±è¦ç¼–å†™-placement-delete&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#item52-å¦‚æœç¼–å†™äº†-placement-newå°±è¦ç¼–å†™-placement-delete&#34;&gt;#&lt;/a&gt; item52 å¦‚æœç¼–å†™äº† placement newï¼Œå°±è¦ç¼–å†™ placement delete&lt;/h3&gt;
&lt;p&gt;ä¸¤ä¸ªè¦ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åœ¨ç¼–å†™ä¸€ä¸ª operator new çš„ placement ç‰ˆæœ¬æ—¶ï¼Œç¡®ä¿åŒæ—¶ç¼–å†™ operator delete çš„ç›¸åº”çš„ placement ç‰ˆæœ¬ã€‚å¦åˆ™ï¼Œä½ çš„ç¨‹åºå¯èƒ½ä¼šå‘ç”Ÿå¾®å¦™çš„ï¼Œæ–­ç»­çš„ memory leaks å†…å­˜æ³„æ¼ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åŸå› æ˜¯ï¼Œè€ƒè™‘ä¸‹é¢è¿™ç§ä»£ç ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;Widget &lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt;pw &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;new&lt;/span&gt; Widget&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;è¿™è¡Œä»£ç ä¼šå‘ç”Ÿä¸¤ä»¶äº‹ï¼Œä¸€æ˜¯è°ƒç”¨ operator new ä¸º Widget åˆ†é…å†…å­˜ï¼Œç„¶åè°ƒç”¨ Widget çš„é»˜è®¤æ„é€ å‡½æ•°ï¼Œå‡è®¾ç¬¬äºŒæ­¥è°ƒç”¨æŠ›å‡ºäº†ä¸€ä¸ªå¼‚å¸¸ï¼Œç¬¬ä¸€æ­¥çš„å†…å­˜åˆ†é…å¿…é¡»è¢«æ’¤é”€ï¼Œå¦åˆ™å°±æ˜¯ä¸€ä¸ªå†…å­˜æ³„æ¼ã€‚ç”±äº clients æ— æ³•è·å–ç¬¬ä¸€æ­¥åˆ†é…çš„åœ°å€ï¼Œå› æ­¤æ’¤é”€æ“ä½œå¿…é¡»ç”± C++ runtime system æ¥å®Œæˆã€‚&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆ C++ ä¼šè°ƒç”¨å“ªä¸ª delete å‡½æ•°æ¥æ’¤é”€å‘¢ï¼Œå®ƒä¼šè°ƒç”¨ä¸è¿™ä¸ª new æ“ä½œå‚æ•°ä¸€è‡´çš„ operator delete æ¥æ’¤é”€ï¼Œå¦‚æœæ²¡æœ‰æä¾›ï¼Œå®ƒä»€ä¹ˆä¹Ÿä¸ä¼šåšï¼Œé‚£ä¹ˆå°±å°†å‘ç”Ÿå†…å­˜æ³„æ¼ã€‚&lt;/p&gt;
&lt;p&gt;æ¯”å¦‚è¯´ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;Widget&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;operator&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;size_t size&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;ostream&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; logStream&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;throw&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;bad_alloc&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;token comment&#34;&gt;// è¿™é‡Œæä¾›äº†ä¸€ä¸ª placement new &lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;operator&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;delete&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt;pMemory&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;throw&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token keyword&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;operator&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;delete&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt;pMemory&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;ostream&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt; logStream&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token keyword&#34;&gt;throw&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;	&lt;span class=&#34;token comment&#34;&gt;// å¿…é¡»æä¾›ä¸€ä¸ªä¸ placement new å¯¹åº”çš„ delete å‡½æ•°&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;  &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å½“ä½ å£°æ˜ new å’Œ delete çš„ placement ç‰ˆæœ¬æ—¶ï¼Œç¡®ä¿ä¸ä¼šæ— æ„ä¸­è¦†ç›–è¿™äº›å‡½æ•°çš„å¸¸è§„ç‰ˆæœ¬ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;item 33 è®¨è®ºäº†ç»§æ‰¿ä½“ç³»ä¸­ name è¢«è¦†ç›–çš„åœºæ™¯å’Œéœ€è¦è€ƒè™‘çš„ç»†èŠ‚ï¼Œnew å’Œ delete çš„ç¼–å†™ä¹Ÿä¸ä¾‹å¤–ã€‚&lt;/p&gt;
&lt;p&gt;C++ åœ¨å…¨å±€æä¾›å¦‚ä¸‹å½¢å¼çš„ operator new:&lt;/p&gt;
&lt;figure class=&#34;highlight cpp&#34;&gt;&lt;figcaption data-lang=&#34;C++&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;operator&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;size_t&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;throw&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;bad_alloc&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;      &lt;span class=&#34;token comment&#34;&gt;// normal new&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;operator&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;size_t&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;throw&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;             &lt;span class=&#34;token comment&#34;&gt;// placement new&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token keyword&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;operator&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;size_t&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt;                             &lt;span class=&#34;token comment&#34;&gt;// nothrow new â€”&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;                   &lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; std&lt;span class=&#34;token double-colon punctuation&#34;&gt;::&lt;/span&gt;nothrow_t&lt;span class=&#34;token operator&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;throw&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;          &lt;span class=&#34;token comment&#34;&gt;// see [Item 49]&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;å› æ­¤å¦‚æœä½ åœ¨ä¸€ä¸ª class ä¸­å£°æ˜äº†ä»»ä½• operator newsï¼Œéƒ½å°†è¦†ç›–æ‰€æœ‰è¿™äº›æ ‡å‡†å½¢å¼ã€‚&lt;strong&gt;é™¤éä½ æœ‰æ„é˜²æ­¢ class çš„å®¢æˆ·ä½¿ç”¨è¿™äº›å½¢å¼ï¼Œå¦åˆ™ï¼Œé™¤äº†ä½ åˆ›å»ºçš„ä»»ä½•è‡ªå®šä¹‰ new å½¢å¼ä»¥å¤–ï¼Œè¿˜è¦ç¡®ä¿å®ƒä»¬éƒ½å¯ä»¥ä½¿ç”¨ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">http://example.com/2022/11/14/C-%EF%BC%9A%E7%A7%BB%E5%8A%A8%E8%AF%AD%E4%B9%89%E4%B8%8E%E5%8F%B3%E5%80%BC%E5%BC%95%E7%94%A8/</guid>
            <title>C++ï¼šç§»åŠ¨è¯­ä¹‰ä¸å³å€¼å¼•ç”¨</title>
            <link>http://example.com/2022/11/14/C-%EF%BC%9A%E7%A7%BB%E5%8A%A8%E8%AF%AD%E4%B9%89%E4%B8%8E%E5%8F%B3%E5%80%BC%E5%BC%95%E7%94%A8/</link>
            <category>C++</category>
            <pubDate>Mon, 14 Nov 2022 16:08:33 +0800</pubDate>
            <description><![CDATA[ &lt;h1 id=&#34;cçš„ç§»åŠ¨è¯­ä¹‰ä¸å³å€¼å¼•ç”¨&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#cçš„ç§»åŠ¨è¯­ä¹‰ä¸å³å€¼å¼•ç”¨&#34;&gt;#&lt;/a&gt; C++ çš„ç§»åŠ¨è¯­ä¹‰ä¸å³å€¼å¼•ç”¨&lt;/h1&gt;
&lt;p&gt;&lt;span id=&#34;more&#34;&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;preview.jpg&#34; alt=&#34;Gaze&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;ç§»åŠ¨è¯­ä¹‰&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#ç§»åŠ¨è¯­ä¹‰&#34;&gt;#&lt;/a&gt; ç§»åŠ¨è¯­ä¹‰&lt;/h2&gt;
&lt;h3 id=&#34;ä¸ºä½•éœ€è¦ç§»åŠ¨è¯­ä¹‰&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#ä¸ºä½•éœ€è¦ç§»åŠ¨è¯­ä¹‰&#34;&gt;#&lt;/a&gt; ä¸ºä½•éœ€è¦ç§»åŠ¨è¯­ä¹‰&lt;/h3&gt;
&lt;p&gt;å‡è®¾æœ‰å¦‚ä¸‹ä»£ç ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c++&#34;&gt;vector&amp;lt;string&amp;gt; vstr;// build up a vector of 20000 strings,each of 1000 characters
vector&amp;lt;string&amp;gt; vstr_copy1(vstr);
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ä¸ºäº†åˆå§‹åŒ– vstr_copy1 å…ˆè°ƒç”¨ vector çš„å¤åˆ¶æ„é€ å‡½æ•°ï¼Œä½¿ç”¨ new ç»™ 20000 ä¸ª string å¯¹è±¡åˆ†é…å†…å­˜ï¼Œè€Œæ¯ä¸ª string å¯¹è±¡åˆè°ƒç”¨ string çš„å¤åˆ¶æ„é€ å‡½æ•°ï¼Œä¸º 1000 ä¸ªå­—ç¬¦åˆ†é…å†…å­˜ã€‚è¿™å¾ˆæµªè´¹æ—¶é—´ï¼Œä½†å¦‚æœ vstr ä¸ vstr_copy1 éƒ½éœ€è¦ä½¿ç”¨ï¼Œè¿™å¾ˆéš¾é¿å…ã€‚&lt;/p&gt;
&lt;p&gt;å¯æœ‰æ—¶å€™è¿™æ ·ä¸å¤ªå¦¥å½“ï¼Œä¾‹å¦‚ vstr ä¸å†è¢«ä½¿ç”¨æ—¶ã€‚ä¾‹å¦‚å¦‚ä¸‹å®šä¹‰çš„å‡½æ•°ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c++&#34;&gt;vector&amp;lt;string&amp;gt; allcaps(const vector&amp;lt;string&amp;gt; &amp;amp; vs)
&amp;#123;
    vector&amp;lt;string&amp;gt; temp;
    //è®©tempå­˜å‚¨vsä¸­stringçš„å¤§å†™ç‰ˆæœ¬çš„ä»£ç 
    return temp;
&amp;#125;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å¹¶è¿™æ ·ä½¿ç”¨å®ƒï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-c++&#34;&gt;vector&amp;lt;string&amp;gt; vstr;
vector&amp;lt;string&amp;gt; vstr_copy1(vstr); //#1
vector&amp;lt;string&amp;gt; vstr_copy2(allcaps(vstr)); //#2
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;allcaps () åˆ›å»ºäº†å¯¹è±¡ tempï¼Œè¯¥å¯¹è±¡ç®¡ç†ç€ 20000000 ä¸ªå­—ç¬¦ï¼›è¯­å¥äºŒä½¿ç”¨ vector å’Œ string çš„å¤åˆ¶æ„é€ å‡½æ•°åˆ›å»ºäº†ä¸€ä¸ª temp çš„å‰¯æœ¬ï¼Œç„¶ååˆ é™¤äº† tempï¼Œåšäº†å¤§é‡æ— ç”¨åŠŸã€‚å¦‚æœç¼–è¯‘å™¨ç›´æ¥æŠŠ temp å¯¹æ•°æ®çš„æ‰€æœ‰æƒè½¬è®©ç»™ vstr_copy2ï¼Œå°†ä¼šæ›´å¥½ã€‚&lt;/p&gt;
&lt;p&gt;å®é™…ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®é™…å†…å®¹ä¿ç•™åœ¨åŸæ¥åœ°æ–¹ï¼Œè€Œä¹‹ä¿®æ”¹è®°å½•ï¼Œè¿™å°±æ˜¯ç§»åŠ¨è¯­ä¹‰çš„æœ¬è´¨ï¼Œå®ƒé¿å…äº†ç§»åŠ¨åŸå§‹æ•°æ®ï¼Œè€Œè½¬ä¸ºä¿®æ”¹è®°å½•ã€‚&lt;/p&gt;
&lt;p&gt;è¦å®ç°ç§»åŠ¨è¯­ä¹‰ï¼Œéœ€è¦é‡‡å–æŸç§æ–¹å¼ï¼Œè®©ç¼–è¯‘å™¨çŸ¥é“ä»€ä¹ˆæ—¶å€™éœ€è¦å¤åˆ¶ã€‚è¿™å°±æ˜¯å³å€¼å¼•ç”¨å‘æŒ¥ä½œç”¨çš„åœ°æ–¹ã€‚å¯å®šä¹‰ä¸¤ä¸ªæ„é€ å‡½æ•°ï¼Œå…¶ä¸­ä¸€ä¸ªæ˜¯å¸¸è§„å¤åˆ¶æ„é€ å‡½æ•°ï¼Œå®ƒä½¿ç”¨ const å·¦å€¼å¼•ç”¨ä½œä¸ºå‚æ•°ï¼Œå¦‚è¯­å¥ #1ã€‚å¦ä¸€ä¸ªæ˜¯ç§»åŠ¨æ„é€ å‡½æ•°ï¼Œå®ƒä½¿ç”¨å³å€¼å¼•ç”¨ä½œä¸ºå‚æ•°ï¼Œè¯¥å¼•ç”¨å…³è”åˆ°å³å€¼å®å‚ï¼Œå¦‚è¯­å¥ #2 ä¸­ allcaps (vstr) çš„è¿”å›å€¼ã€‚ç§»åŠ¨æ„é€ å‡½æ•°å¯èƒ½ä¿®æ”¹å…¶å®å‚ï¼Œè¿™æ„å‘³ç€å³å€¼å¼•ç”¨å‚æ•°ä¸åº”æ˜¯ constã€‚&lt;/p&gt;
&lt;h3 id=&#34;å¦‚ä½•ä½¿ç”¨&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#å¦‚ä½•ä½¿ç”¨&#34;&gt;#&lt;/a&gt; å¦‚ä½•ä½¿ç”¨&lt;/h3&gt;
&lt;p&gt;ç›´æ¥å°†å˜é‡çš„å€¼èµ‹å€¼ä¸ºå‚æ•°çš„å˜é‡å€¼ï¼Œå¦‚æœå˜é‡ä¸ºæŒ‡é’ˆï¼Œä¸ºäº†é˜²æ­¢ double freeï¼Œè¿˜éœ€å°†å‚æ•°çš„æŒ‡é’ˆæ”¹ä¸º nullptrã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Useless(Useless &amp;amp;&amp;amp; f) : n(f.n)
&amp;#123;
	++ct;
	pc = f.pc;
	f.pc = nullptr;
	f.n = 0;
&amp;#125;
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;å¼ºåˆ¶ç§»åŠ¨&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#å¼ºåˆ¶ç§»åŠ¨&#34;&gt;#&lt;/a&gt; å¼ºåˆ¶ç§»åŠ¨&lt;/h3&gt;
&lt;p&gt;ç§»åŠ¨æ„é€ å‡½æ•°å’Œç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦ä½¿ç”¨å³å€¼ï¼Œå¦‚æœè¦è®©å®ƒä»¬ä½¿ç”¨å·¦å€¼ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿä¾‹å¦‚ï¼Œå°†ä¸€ä¸ªå·¦å€¼å˜é‡èµ‹å€¼ç»™ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ç«‹åˆ»ä¸¢å¼ƒè¿™ä¸ªå˜é‡ã€‚æ­¤æ—¶å¯ä»¥ä½¿ç”¨å¤´æ–‡ä»¶ utility ä¸­å£°æ˜çš„å‡½æ•° std::moveã€‚&lt;/p&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">http://example.com/2022/10/05/STL%E5%AD%A6%E4%B9%A0-01-%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88%E4%B8%8Evector/</guid>
            <title>STLå­¦ä¹ -01-æ™ºèƒ½æŒ‡é’ˆä¸vector</title>
            <link>http://example.com/2022/10/05/STL%E5%AD%A6%E4%B9%A0-01-%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88%E4%B8%8Evector/</link>
            <category>STL C++</category>
            <pubDate>Wed, 05 Oct 2022 19:54:58 +0800</pubDate>
            <description><![CDATA[ &lt;h1 id=&#34;c-çš„æ ‡å‡†æ¨¡æ¿åº“&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#c-çš„æ ‡å‡†æ¨¡æ¿åº“&#34;&gt;#&lt;/a&gt; c++ çš„æ ‡å‡†æ¨¡æ¿åº“&lt;/h1&gt;
&lt;p&gt;&lt;span id=&#34;more&#34;&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;%E9%9B%A8%E5%A4%A9-%E5%A5%B3%E5%AD%A9-%E5%95%86%E5%BA%97.jpg&#34; alt=&#34;é›¨å¤© å¥³å­© å•†åº—&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;æ™ºèƒ½æŒ‡é’ˆæ¨¡æ¿ç±»&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#æ™ºèƒ½æŒ‡é’ˆæ¨¡æ¿ç±»&#34;&gt;#&lt;/a&gt; æ™ºèƒ½æŒ‡é’ˆæ¨¡æ¿ç±»&lt;/h2&gt;
&lt;p&gt;æ™ºèƒ½æŒ‡é’ˆæ˜¯ç±»ä¼¼äºæŒ‡é’ˆçš„ç±»å¯¹è±¡ï¼Œæ¯”è¾ƒæ–¹ä¾¿å†…å­˜ç®¡ç†ã€‚ä¼ ç»Ÿçš„æŒ‡é’ˆå¿…é¡»æ—¶æ—¶åˆ»åˆ»è®°å¾— new ä¸ delete çš„é…å¥—ä½¿ç”¨ï¼Œå¾ˆå®¹æ˜“é€ æˆå†…å­˜æ³„æ¼ã€‚è€Œæ™ºèƒ½æŒ‡é’ˆå®é™…ä¸Šç±»ä¼¼äºä¸€ä¸ªç±»ï¼Œæœ‰è‡ªå·±çš„ææ„å‡½æ•°ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨å†ä¸éœ€è¦æ™ºèƒ½æŒ‡é’ˆæ—¶ä¾¿å¯ä»¥è‡ªåŠ¨è°ƒç”¨å…¶ææ„å‡½æ•°é‡Šæ”¾å†…å­˜ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥ç•¥å» delete æ“ä½œã€‚&lt;/p&gt;
&lt;h3 id=&#34;ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆ&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆ&#34;&gt;#&lt;/a&gt; ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆ&lt;/h3&gt;
&lt;p&gt;è¦åˆ›å»ºæ™ºèƒ½æŒ‡é’ˆå¯¹è±¡ï¼Œå¿…é¡»åŒ…å«å¤´æ–‡ä»¶ memory ç„¶åä½¿ç”¨é€šå¸¸çš„æ¨¡æ¿è¯­æ³•æ¥å®ä¾‹åŒ–æ‰€éœ€ç±»å‹çš„æŒ‡é’ˆã€‚&lt;/p&gt;
&lt;p&gt;å£°æ˜ï¼š  &lt;code&gt; template &amp;lt;class X&amp;gt; class auto_ptr&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ egï¼š  &lt;code&gt; auto_ptr&amp;lt;double&amp;gt; pd(new double);&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;â€‹					  &lt;code&gt;auto_ptr&amp;lt;string&amp;gt; ps(new string);&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;æ³¨æ„ï¼š æ™ºèƒ½æŒ‡é’ˆæ¨¡æ¿ä½äºåç§°ç©ºé—´ std ä¸­ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æœ‰å…³æ™ºèƒ½æŒ‡é’ˆçš„æ³¨æ„äº‹é¡¹&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#æœ‰å…³æ™ºèƒ½æŒ‡é’ˆçš„æ³¨æ„äº‹é¡¹&#34;&gt;#&lt;/a&gt; æœ‰å…³æ™ºèƒ½æŒ‡é’ˆçš„æ³¨æ„äº‹é¡¹&lt;/h3&gt;
&lt;p&gt;c++ ç›®å‰æœ‰ä¸‰ç§å¸¸è§æ™ºèƒ½æŒ‡é’ˆï¼šauto_ptr, unique_ptr,shared_ptr&lt;/p&gt;
&lt;p&gt;åœ¨ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆæ—¶ï¼Œå¯èƒ½ä¼šé‡åˆ°é—®é¢˜ï¼Œæ¯”å¦‚å¦‚æœä¸¤ä¸ªæ™ºèƒ½æŒ‡é’ˆæŒ‡å‘åŒä¸€å—å†…å­˜åŒºåŸŸï¼Œåˆ™ç¨‹åºä¼šåˆ é™¤åŒä¸€ä¸ªå¯¹è±¡ä¸¤æ¬¡ï¼Œè¿™æ˜¯ä¼šé€ æˆæå¤§é”™è¯¯çš„ã€‚ä¸ºé¿å…è¿™ç§é—®é¢˜ï¼Œæ–¹æ³•æœ‰å¤šç§ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å»ºç«‹æ‰€æœ‰æƒæ¦‚å¿µï¼Œå¯¹äºç‰¹å®šå¯¹è±¡ï¼Œåªæœ‰ä¸€ä¸ªæ™ºèƒ½æŒ‡é’ˆå¯ä»¥æ‹¥æœ‰ä»–ã€‚ è¿™æ˜¯ç”¨äº auto_ptr å’Œ unique_ptr çš„ç­–ç•¥ï¼Œä½† unique_ptr æ›´ä¸¥æ ¼&lt;/li&gt;
&lt;li&gt;åˆ›å»ºæ™ºèƒ½æ›´é«˜çš„æŒ‡é’ˆï¼Œè·Ÿè¸ªå¼•ç”¨ç‰¹å®šå¯¹è±¡çš„æ™ºèƒ½æŒ‡é’ˆæ•°ï¼Œè¿™ç§°ä¸ºå¼•ç”¨è®¡æ•°ã€‚å½“æœ€åä¸€ä¸ªæŒ‡é’ˆè¿‡æœŸæ—¶ï¼Œæ‰è°ƒç”¨ deleteã€‚è¿™æ˜¯ shared_ptr çš„ç­–ç•¥&lt;/li&gt;
&lt;li&gt;æ‰§è¡Œæ·±æ‹·è´&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;auto_ptr å’Œ unique_ptr çš„åŒºåˆ«ï¼š&lt;/p&gt;
&lt;p&gt;â€‹		ä¸¤ä¸ª auto_ptr æŒ‡å‘åŒä¸€å—å†…å­˜åŒºåŸŸæ—¶ï¼Œå¯ä»¥é€šè¿‡ç¼–è¯‘ï¼Œä½†å¯èƒ½åœ¨è¿è¡Œæ—¶æŠ¥é”™ã€‚ä¸¤ä¸ª unique_ptr æŒ‡å‘åŒä¸€å—å†…å­˜åŒºåŸŸæ—¶ï¼Œä¼šåœ¨ç¼–è¯‘é˜¶æ®µå°±æŠ¥é”™ï¼ˆé™¤éèµ‹å€¼ç»™å…¶ä¸­ä¸€ä¸ª unique_ptr çš„å¦ä¸€ä¸ª unique_ptr æ˜¯ä¸€ä¸ªç”¨å®Œå³æ¯çš„æ™ºèƒ½æŒ‡é’ˆï¼Œå¦‚æŸä¸€å‡½æ•°ä¸­ new å‡ºæ¥çš„ unique_ptr çš„è¿”å›ï¼‰ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ¨¡æ¿ç±»vector&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#æ¨¡æ¿ç±»vector&#34;&gt;#&lt;/a&gt; æ¨¡æ¿ç±» vector&lt;/h2&gt;
&lt;h3 id=&#34;åˆ›å»ºvector&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#åˆ›å»ºvector&#34;&gt;#&lt;/a&gt; åˆ›å»º vector&lt;/h3&gt;
&lt;p&gt;è¦åˆ›å»º vector æ¨¡æ¿å¯¹è±¡ï¼Œ å¯ä½¿ç”¨é€šå¸¸çš„ &amp;lt;type&amp;gt; è¡¨ç¤ºæ³•æ¥æŒ‡å‡ºè¦ä½¿ç”¨çš„ç±»å‹ã€‚å¦å¤–ï¼Œvector æ¨¡æ¿ä½¿ç”¨åŠ¨æ€å†…å­˜åˆ†é…ï¼Œå› æ­¤å¯ä»¥ç”¨åˆå§‹åŒ–å‚æ•°æŒ‡å‡ºéœ€è¦å¤šå°‘å…ƒç´ ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt; vector&amp;lt;int&amp;gt; ratings(5);  // a vector of 5 ints&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&#34;å¯å¯¹vectoræ‰§è¡Œçš„æ“ä½œ&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#å¯å¯¹vectoræ‰§è¡Œçš„æ“ä½œ&#34;&gt;#&lt;/a&gt; å¯å¯¹ vector æ‰§è¡Œçš„æ“ä½œ&lt;/h3&gt;
&lt;p&gt;size ()â€”â€” è¿”å›å®¹å™¨ä¸­å…ƒç´ æ•°ç›®        swap ()â€”â€” äº¤æ¢ä¸¤ä¸ªå®¹å™¨çš„å†…å®¹             begin ()â€”â€” è¿”å›ä¸€ä¸ªæŒ‡å‘å®¹å™¨ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ çš„ &lt;em&gt;&lt;strong&gt;è¿­ä»£å™¨&lt;/strong&gt;&lt;/em&gt;      end () è¿”å›ä¸€ä¸ªè¡¨ç¤ºè¶…è¿‡å®¹å™¨å°¾çš„&lt;em&gt;&lt;strong&gt;è¿­ä»£å™¨&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;ä»€ä¹ˆæ˜¯è¿­ä»£å™¨ï¼Ÿ å®ƒæ˜¯ä¸€ä¸ªå¹¿ä¹‰çš„æŒ‡é’ˆï¼Œå¯ä»¥å¯¹å…¶æ‰§è¡Œç±»ä¼¼æŒ‡é’ˆçš„æ“ä½œï¼Œå¦‚è§£é™¤å¼•ç”¨ *ã€é€’å¢ ++&lt;/p&gt;
&lt;p&gt;STL çš„æ¯ä¸ªå®¹å™¨ç±»éƒ½å®šä¹‰äº†ä¸€ä¸ªåˆé€‚çš„è¿­ä»£å™¨ï¼Œè¯¥è¿­ä»£å™¨çš„ç±»å‹æ˜¯ä¸€ä¸ªåä¸º iterator çš„ typedefï¼Œä½œç”¨åŸŸä¸ºæ•´ä¸ªç±»ã€‚å¦‚è¦ä¸º vector çš„ double ç±»å‹è§„èŒƒå£°æ˜ä¸€ä¸ªè¿­ä»£å™¨ï¼Œå¯ä»¥è¿™æ ·åšï¼š&lt;/p&gt;
&lt;p&gt;â€‹	 &lt;code&gt;vector&amp;lt;double&amp;gt;::iterator pd;//  pd an iterator&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å‡è®¾ scores æ˜¯ä¸€ä¸ª vector&amp;lt;double&amp;gt; å¯¹è±¡ï¼Œå¯ä»¥åˆ©ç”¨å¥½ auto å…³é”®å­—ç®€åŒ–ä¹¦å†™ï¼š&lt;/p&gt;
&lt;p&gt;&lt;code&gt;auto pd = scores.begin()&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;vector è¿˜æ”¯æŒ push_back () (å†…å­˜ä¸å¤Ÿä¼šè‡ªåŠ¨æ‰©å……å®¹å™¨), erase () insert () ç­‰æ–¹æ³•&lt;/p&gt;
&lt;h3 id=&#34;å…¶å®ƒæ“ä½œ&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#å…¶å®ƒæ“ä½œ&#34;&gt;#&lt;/a&gt; å…¶å®ƒæ“ä½œ&lt;/h3&gt;
&lt;p&gt;æœ‰ä¸¤ä¸ªå…·æœ‰ä»£è¡¨æ€§çš„ STL å‡½æ•°ï¼šfor_each () å’Œ sort () ã€‚&lt;/p&gt;
&lt;p&gt;for_each () å‡½æ•°å¯ç”¨äºå¾ˆå¤šå®¹å™¨ç±»ï¼Œå®ƒæ¥å— 3 ä¸ªå‚æ•°ã€‚å‰ä¸¤ä¸ªæ˜¯å®šä¹‰å®¹å™¨ä¸­çš„è¿­ä»£å™¨ï¼Œæœ€åä¸€ä¸ªæ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆã€‚for_each () å‡½æ•°å°†è¢«æŒ‡å‘çš„å‡½æ•°åº”ç”¨äºå®¹å™¨åŒºé—´ä¸­çš„å„ä¸ªå…ƒç´ ï¼Œå¯ä»¥ç”¨ for_each () å‡½æ•°æ¥ä»£æ›¿ for å¾ªç¯ã€‚&lt;/p&gt;
&lt;p&gt;eg:  &lt;code&gt;for_each(books.begin(), books.end(), ShowReview);&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;sort () å‡½æ•°ä¹Ÿè¦æ±‚å‡½æ•°æ”¯æŒéšæœºè®¿é—®ã€‚è¯¥å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå®šä¹‰åŒºé—´çš„è¿­ä»£å™¨å‚æ•°ã€‚å¦‚æœå®¹å™¨ä¸­çš„å…ƒç´ æœ‰å†…ç½®çš„ &amp;lt; è¿ç®—ç¬¦è¿›è¡Œå€¼æ¯”è¾ƒï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚å¦‚æœå®¹å™¨ä¸­çš„å…ƒç´ æ˜¯ç”¨æˆ·å®šä¹‰çš„ç±»å¯¹è±¡ï¼Œåˆ™ç”¨æˆ·éœ€è¦åˆ©ç”¨é‡è½½å®šä¹‰ &amp;lt; è¿ç®—ç¬¦ã€‚&lt;/p&gt;
&lt;p&gt;è¿˜æœ‰ç¬¬äºŒä¸ªç‰ˆæœ¬çš„ sort () å‡½æ•°ï¼Œå®ƒæ¥æ”¶ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆï¼Œä¸ä¸€å®šæ˜¯ç”¨äºæ¯”è¾ƒçš„ operator&amp;lt;()ï¼Œè€Œæ˜¯ä¸€ä¸ªè¿”å›å€¼å¯è½¬æ¢ä¸º bool ç±»å‹çš„å‡½æ•°ï¼Œå®ƒæ¥æ”¶ä¸¤ä¸ªå®¹å™¨ä¸­çš„å…ƒç´ ï¼Œè¿”å›ä¸º false è¡¨ç¤ºä¸¤ä¸ªå‚æ•°çš„é¡ºåºä¸æ­£ç¡®ã€‚&lt;/p&gt;
 ]]></description>
        </item>
    </channel>
</rss>
